<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Verify_credentials -- I&#39;m doing something wrong here</title>
    <link>https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440</link>
    <description>(Is there a better place to ask questions about compliance?)

I&#39;m testing how Tusky responds to kepi, and something seems to be wrong with the way kepi implements `verify_credentials`. kepi&#39;s response in the presenting case is

```
{
  &quot;id&quot;: &quot;@marnanel&quot;,
  &quot;username&quot;: &quot;marnanel&quot;,
  &quot;acct&quot;: &quot;@marnanel@sandy-heath.thurman.org.uk&quot;,
  &quot;display_name&quot;: &quot;marnanel&quot;,
  &quot;locked&quot;: false,
  &quot;avatar&quot;: &quot;https://sandy-heath.thurman.org.uk/static/defaults/avatar_9.jpg&quot;,
  &quot;header&quot;: &quot;https://sandy-heath.thurman.org.uk/static/defaults/header.jpg&quot;,
  &quot;created_at&quot;: &quot;2019-12-25T23:51:03.882335Z&quot;,
  &quot;followers_count&quot;: 0,
  &quot;following_count&quot;: 0,
  &quot;statuses_count&quot;: 0,
  &quot;note&quot;: &quot;&quot;,
  &quot;url&quot;: &quot;https://sandy-heath.thurman.org.uk/users/marnanel&quot;,
  &quot;avatar_static&quot;: &quot;https://sandy-heath.thurman.org.uk/static/defaults/avatar_9.jpg&quot;,
  &quot;header_static&quot;: &quot;https://sandy-heath.thurman.org.uk/static/defaults/header.jpg&quot;,
  &quot;moved_to&quot;: null,
  &quot;fields&quot;: [],
  &quot;emojis&quot;: [],
  &quot;bot&quot;: false,
  &quot;source&quot;: {
    &quot;privacy&quot;: &quot;public&quot;,
    &quot;sensitive&quot;: false,
    &quot;note&quot;: &quot;&quot;,
    &quot;language&quot;: &quot;en&quot;
  }
}
```
whereupon Tusky crashes. `adb logcat` shows the exception

```
java.lang.NullPointerException: Attempt to invoke interface method &#39;int java.lang.CharSequence.length()&#39; on a null object reference
    at com.keylesspalace.tusky.entity.Account.getName(SourceFile:1)
```

[which is here](https://github.com/tuskyapp/Tusky/blob/2994af70916343765097b0d39597172177fd62d8/app/src/main/java/com/keylesspalace/tusky/entity/Account.kt) and is checking `display_name` for zero length. But `display_name` is not null in what I sent. Is there something else obviously wrong in what I&#39;m sending, or is this something I should be asking the Tusky devs about?</description>
    
    <lastBuildDate>Thu, 09 Jan 2020 20:30:26 +0000</lastBuildDate>
    <category>Mastodon</category>
    <atom:link href="https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Verify_credentials -- I&#39;m doing something wrong here</title>
        <dc:creator><![CDATA[marnanel]]></dc:creator>
        <description><![CDATA[
            <p>thank you! that’s very helpful.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440/4">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440/4</link>
        <pubDate>Thu, 09 Jan 2020 20:30:26 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-440-4</guid>
        <source url="https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440.rss">Verify_credentials -- I&#39;m doing something wrong here</source>
      </item>
      <item>
        <title>Verify_credentials -- I&#39;m doing something wrong here</title>
        <dc:creator><![CDATA[trwnh]]></dc:creator>
        <description><![CDATA[
            <p>one thing i’m noticing is that <code>acct</code> should not include the leading @ symbol. the acct: URI takes the form of <code>username</code> for local users and <code>username@domain</code> for remote users.</p>
<p>the other thing is that the <code>id</code> is a string that does not correspond to a number. you’ll have to check with tusky devs about this (and i suspect other clients), but it wouldn’t be the first time client devs have made technically incorrect assumptions here. ID is always a string, and although it is cast from a number, it is not guaranteed to be one; however, mastodon uses 64-bit integers as base10, and pleroma uses 128-bit flake ids as base62. since these two softwares are the primary providers of the mastodon api, there haven’t been any counterexamples to break the assumption that id should at least represent a number (for sortability purposes, e.g.).</p>
          <p><a href="https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440/3">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440/3</link>
        <pubDate>Tue, 31 Dec 2019 03:07:01 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-440-3</guid>
        <source url="https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440.rss">Verify_credentials -- I&#39;m doing something wrong here</source>
      </item>
      <item>
        <title>Verify_credentials -- I&#39;m doing something wrong here</title>
        <dc:creator><![CDATA[nightpool]]></dc:creator>
        <description><![CDATA[
            <p>I think this topic would be better for the mastodon forum, since it’s masto API specific. for now I’m going to move it to the mastodon category on this forum, but it might be better suited for another forum. I don’t want to give the impression that the mastodon API is a “de-facto” client to server standard, since it’s very poorly suited for that purpose, and is very tightly coupled to the specifics of mastodon’s design.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440/2">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440/2</link>
        <pubDate>Sat, 28 Dec 2019 17:39:38 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-440-2</guid>
        <source url="https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440.rss">Verify_credentials -- I&#39;m doing something wrong here</source>
      </item>
      <item>
        <title>Verify_credentials -- I&#39;m doing something wrong here</title>
        <dc:creator><![CDATA[marnanel]]></dc:creator>
        <description><![CDATA[
            <p>(Is there a better place to ask questions about compliance?)</p>
<p>I’m testing how Tusky responds to kepi, and something seems to be wrong with the way kepi implements <code>verify_credentials</code>. kepi’s response in the presenting case is</p>
<pre><code class="lang-auto">{
  "id": "@marnanel",
  "username": "marnanel",
  "acct": "@marnanel@sandy-heath.thurman.org.uk",
  "display_name": "marnanel",
  "locked": false,
  "avatar": "https://sandy-heath.thurman.org.uk/static/defaults/avatar_9.jpg",
  "header": "https://sandy-heath.thurman.org.uk/static/defaults/header.jpg",
  "created_at": "2019-12-25T23:51:03.882335Z",
  "followers_count": 0,
  "following_count": 0,
  "statuses_count": 0,
  "note": "",
  "url": "https://sandy-heath.thurman.org.uk/users/marnanel",
  "avatar_static": "https://sandy-heath.thurman.org.uk/static/defaults/avatar_9.jpg",
  "header_static": "https://sandy-heath.thurman.org.uk/static/defaults/header.jpg",
  "moved_to": null,
  "fields": [],
  "emojis": [],
  "bot": false,
  "source": {
    "privacy": "public",
    "sensitive": false,
    "note": "",
    "language": "en"
  }
}
</code></pre>
<p>whereupon Tusky crashes. <code>adb logcat</code> shows the exception</p>
<pre><code class="lang-auto">java.lang.NullPointerException: Attempt to invoke interface method 'int java.lang.CharSequence.length()' on a null object reference
    at com.keylesspalace.tusky.entity.Account.getName(SourceFile:1)
</code></pre>
<p><a href="https://github.com/tuskyapp/Tusky/blob/2994af70916343765097b0d39597172177fd62d8/app/src/main/java/com/keylesspalace/tusky/entity/Account.kt" rel="nofollow noopener">which is here</a> and is checking <code>display_name</code> for zero length. But <code>display_name</code> is not null in what I sent. Is there something else obviously wrong in what I’m sending, or is this something I should be asking the Tusky devs about?</p>
          <p><a href="https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440/1">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440/1</link>
        <pubDate>Sat, 28 Dec 2019 16:42:50 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-440-1</guid>
        <source url="https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440.rss">Verify_credentials -- I&#39;m doing something wrong here</source>
      </item>
  </channel>
</rss>
