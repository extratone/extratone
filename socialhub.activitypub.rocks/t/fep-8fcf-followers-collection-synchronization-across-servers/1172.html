<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>FEP-8fcf: Followers collection synchronization across servers - Fediverse Enhancement Proposals - SocialHub</title>
    <meta name="description" content="source: https://git.activitypub.dev/ActivityPubDev/Fediverse-Enhancement-Proposals/src/branch/main/feps/fep-8fcf.md">
    <meta name="generator" content="Discourse 2.8.0.beta2 - https://github.com/discourse/discourse version c39ab6c0ae3803b6a62501954ae40adb6b73d580">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/b7023860b3d7df97ea10ba3c7ab11cb046a77c7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1172.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://socialhub.activitypub.rocks","potentialAction":{"@type":"SearchAction","target":"https://socialhub.activitypub.rocks/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="SocialHub Search">

      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop" />
      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_5_969dd27459c19a0b7620746a3d179b86ef033d7a.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_3_f50bf2f225326f482d56e65e93f1f047d48417a9.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_8_e3f93470fef56ec97b63f77e16779e328baab8ea.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="8"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_4_8d506fd22b761a15044193a6d4ebda5f6bde2498.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;FEP-8fcf: Followers collection synchronization across servers&#39;" href="1172.rss" />
    <meta property="og:site_name" content="SocialHub" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:url" content="https://socialhub.activitypub.rocks/t/fep-8fcf-followers-collection-synchronization-across-servers/1172" />
<meta name="twitter:url" content="https://socialhub.activitypub.rocks/t/fep-8fcf-followers-collection-synchronization-across-servers/1172" />
<meta property="og:title" content="FEP-8fcf: Followers collection synchronization across servers" />
<meta name="twitter:title" content="FEP-8fcf: Followers collection synchronization across servers" />
<meta property="og:description" content="source: https://git.activitypub.dev/ActivityPubDev/Fediverse-Enhancement-Proposals/src/branch/main/feps/fep-8fcf.md" />
<meta name="twitter:description" content="source: https://git.activitypub.dev/ActivityPubDev/Fediverse-Enhancement-Proposals/src/branch/main/feps/fep-8fcf.md" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="21 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="11 ❤" />
<meta property="article:published_time" content="2020-12-01T17:25:06+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="next" href="1172@page=2.html">

    
  </head>
  <body class="crawler">
    
<script src="https://socialhub.activitypub.rocks/theme-javascripts/3a68d4ddcab78e923b7c4169708a8f1deb79df66.js?__ws=socialhub.activitypub.rocks"></script>
    <header>
      <a href="https://socialhub.activitypub.rocks/">
          <img src="../../uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png" alt="SocialHub" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1172.html">FEP-8fcf: Followers collection synchronization across servers</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/activitypub.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #0088CC'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>ActivityPub</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/activitypub/fep/54.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #0088CC'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Fediverse Enhancement Proposals</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/fep-8fcf.html' class='discourse-tag' rel="tag">fep-8fcf</a>, 
            <a href='../../tag/draft.html' class='discourse-tag' rel="tag">draft</a>, 
            <a href='../../tag/fep.html' class='discourse-tag' rel="tag">fep</a>
        </div>
      </div>
  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/system.html'><span itemprop='name'>system</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-12-01T17:25:06Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:25:29Z' class='post-time'>
                December 1, 2020,  5:25pm
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>source: <a href="https://git.activitypub.dev/ActivityPubDev/Fediverse-Enhancement-Proposals/src/branch/main/feps/fep-8fcf.md">https://git.activitypub.dev/ActivityPubDev/Fediverse-Enhancement-Proposals/src/branch/main/feps/fep-8fcf.md</a></p>
<hr>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>
          <meta itemprop='keywords' content='fep-8fcf, draft, fep'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../proposal-mechanism-for-synchronizing-followers-lists-across-servers/852/2.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://socialhub.activitypub.rocks/t/proposal-mechanism-for-synchronizing-followers-lists-across-servers/852/2'>
                      <span itemprop='name'>Proposal: Mechanism for synchronizing followers lists across servers</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../about-the-fediverse-enhancement-proposals/1168.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://socialhub.activitypub.rocks/t/about-the-fediverse-enhancement-proposals/1168'>
                      <span itemprop='name'>About the Fediverse Enhancement Proposals</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Claire.html'><span itemprop='name'>Claire</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-08-04T13:29:38Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:31Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <h2>Context</h2>
<p>Due to software bugs (e.g., Pleroma forgetting follow relationships a while ago, Mastodon mishandling Reject on Accepted Follows for the time being, etc.), crashes, backup rollbacks, etc., state may get out of sync between instances, in particular regarding followers information. With Mastodon’s follower-only privacy scope, this can get particularly damaging, as receiving remote instances are asked to deliver the message to who they know to follow the poster: if that gets out of sync, then the messages may reach people that the poster expects to not have access to.</p>
<p>Therefore, a mechanism to detect synchronization issues and correct them is needed. Such a mechanism has to take into account that the full list of an account’s followers may not be public information, and should thus only consider followers residing on a specific domain.</p>
<h2>Proposal</h2>
<p>Protocol extensions and an implementation are proposed in the following Mastodon Pull Request: <a href="https://github.com/tootsuite/mastodon/pull/14510" rel="noopener nofollow ugc">https://github.com/tootsuite/mastodon/pull/14510</a></p>
<p>The basic idea being the addition of an optional <code>collectionSynchronization</code> attribute to activities such as <code>Create</code> and <code>Announce</code> activities. This attribute, typically set on activities addressed to the author’s followers specifically, would contain one or more <code>SynchronizationItem</code> objects with the following attributes:</p>
<ul>
<li>
<code>object</code>: the identifier of the collection this is describing. This collection MUST be owned by the activity’s author. For our current purposes, it must be the activity author’s followers collection.</li>
<li>
<code>domain</code>: the domain name of the instance the message is addressed to. It can be used to catch implementation bugs or to allow implementations to inline multiple <code>SynchronizationItem</code> corresponding to different servers in a same payload (e.g. when using relays)</li>
<li>
<code>partialCollection</code>: an URI to a collection that is the subset of the <code>object</code> collection made of the URIs of objects owned by <code>domain</code>. Accessing this collection SHOULD require the request to be signed (HTTP Sigs) with an account owned by the <code>domain</code>. For security reasons, it must be on the same domain as the collection it is describing.</li>
<li>
<code>digest</code>: A <a href="https://w3c-ccg.github.io/security-vocab/#Digest" rel="noopener nofollow ugc">Digest</a> of the <code>partialCollection</code>'s items, in alphabetical order, and joined by a newline. In the proposed implementation, SHA256 (<code>http://www.w3.org/2001/04/xmlenc#sha256</code>) is the only acceptable algorithm. Choosing a common algorithm enables caching that information on each instance as necessary.</li>
</ul>
<p>A server receiving an activity with such a <code>SynchronizationItem</code> would check that it is the intended receiver (<code>domain</code> attribute), that the <code>object</code> is indeed the author’s follower collection, check that the <code>partialCollection</code> resides on the same domain name as the author, then check the digest, and in case that digest doesn’t match, it would fetch the <code>partialCollection</code>, remove any local follower not listed there, and send an <code>Undo Follow</code> for any follower listed there that it doesn’t know to be followers.</p>
<h2>Example</h2>
<p><code>Create</code> activity:</p>
<pre><code class="lang-json">{
  "@context": [
    "https://www.w3.org/ns/activitystreams",
    "https://w3id.org/security/v1",
    {
      "toot":"http://joinmastodon.org/ns#",
      "collectionSynchronization":"toot:collectionSynchronization",
      "SynchronizationItem":"toot:SynchronizationItem",
      "partialCollection": "toot:partialCollection"
  }],
  "id": "https://social.sitedethib.com/users/Thib/statuses/1234",
  "type": "Note",
  "attributedTo": "https://social.sitedethib.com/users/Thib",
  "to": ["https://social.sitedethib.com/users/Thib/followers"],
  "content": "This is just a private toot",
  "collectionSynchronization": [
    {
      "type": "SynchronizationItem",
      "domain": "mastodon.social",
      "object": "https://social.sitedethib.com/users/Thib/followers",
      "partialCollection": "https://social.sitedethib.com/users/Thib/followers_synchronization",
      "digest": {
        "type": "Digest",
        "digestAlgorithm": "http://www.w3.org/2001/04/xmlenc#sha256",
        "digestValue": "b08ab6951c7d6cc2b91e17ebd9557da7fae02489728e9332fcb3a97748244d50"
      }
    }
  ]
}
</code></pre>
<p>Result of querying <code>https://social.sitedethib.com/users/Thib/followers_synchronization</code> (when signing the request on behalf of a mastodon.social account):</p>
<pre><code class="lang-json">{
  "@context": "https://www.w3.org/ns/activitystreams",
  "id": "https://social.sitedethib.com/users/Thib/followers?domain=mastodon.social",
  "type": "OrderedCollection",
  "orderedItems": [
    "https://mastodon.social/users/Gargron"
  ]
}
</code></pre>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cjs.html'><span itemprop='name'>cjs</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-08-04T14:52:49Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I see the PR acknowledges it is not an AP-friendly solution. What were the reasons for discarding an ActivityPub-esque solution, like the following?</p>
<ol>
<li>Have a single <a href="https://www.w3.org/TR/activitystreams-vocabulary/#dfn-service" rel="nofollow noopener"><code>Service</code></a> actor representing the Mastodon server, with an HTTP Signature public key.</li>
<li>Have Mastodon respond to requests for <code>/user/{user}/followers</code> with a query parameter like <code>?domain=mastodon.social</code> that returns a properly-filtered <code>OrderedCollection</code>, but only in response to requests from a <code>Service</code> actor that is properly authenticated using HTTP Signatures</li>
<li>Have the receiving server call the authoritative server at <code>authoritative.server.example.com/user/{user}/followers?domain=receiving.server.example.com</code> using the <code>Service</code> when it receives a "followers-only scoped <code>Note</code>" and it gets the authoritative domain-filtered list.</li>
</ol>
<p>Edit: In fact, with HTTP Signatures, you could even eliminate the query parameter entirely, as by authenticating the <code>Service</code> you’d already have the hostname and therefore could respond with a filtered list anyway. So, uh, optionally eliminate half of step 2 above. /edit</p>
<p>This would:</p>
<ul>
<li>Not leak the followers collection outside of its domain, work through relays, and maintain the same synchronous-mechanism-outcome (a partial list of followers in an <code>OrderedCollection</code>)</li>
<li>Represent a Mastodon server as an ActivityPub <code>Service</code> actor, which is also an investment for future innovations</li>
<li>I’d hope it would touch less Mastodon internals than the proposed solution, for easier maintainability</li>
<li>Is easier to understand by other developers or maintainers than inventing whole new unofficial vocabularies</li>
<li>Less bytes being shuffled around on the wire</li>
<li>Just as many additional HTTP requests as in the original proposal</li>
</ul>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Claire.html'><span itemprop='name'>Claire</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-08-04T14:59:02Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <ol>
<li>Mastodon already has a <code>Service</code> actor representing the Mastodon server, and it is already used for signing HTTP requests (and would sign this one). However, there is no way to know which actor is the actor representing an instance, in the general case.</li>
<li>You would still need to know how to construct that query parameter, that is not defined in AP. The PR uses a different endpoint for that, but it could reuse the same. It’s just a matter of the code being simpler. There is also no query parameter, because the HTTP signature is required and is sufficient to identify the domain name.</li>
<li>How would it decide to make that query? Would it make the query every single time it receives a “followers-only scoped <code>Note</code>”? This would be pretty expensive. This is why I decided to add a hash value there.</li>
</ol>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cjs.html'><span itemprop='name'>cjs</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-08-04T15:29:12Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><strong>RE; Number 1</strong></p>
<p>Sure but that’s a really weak rationale. Mastodon isn’t a general case, it is a specific software that is creating a convention here. The least that it could do is pick a sensible one.</p>
<p>The same argument could be turned around and say that there’s no way to know that the actor being signed in the original proposal <em>isn’t</em> an admin, who would then be able to acquire the same exact “leak” of information as the original proposal, since they can access all the keys.</p>
<p>Furthermore, this kind of answer raises worrying questions: What’s the purpose of the existing Mastodon <code>Service</code> actor signing requests with HTTP Signatures already, but if Mastodon doesn’t know/care that it is the actor representing the server as surely it wouldn’t need to exist in the first place?</p>
<p><strong>RE: Number 2</strong></p>
<p>As you mention, there’s no need for a query parameter. One less thing to worry about! Woot! <img src="../../images/emoji/twitter/slight_smile.png@v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p><strong>RE 3: Number 3</strong></p>
<p>“The real problem is that programmers have spent far too much time worrying about efficiency in the wrong places and at the wrong times”. Computers are cheap, human beings are expensive. I would strongly encourage you to favor having the computer do harder work so the rest of the ecosystem can think easier, as a matter of principle.</p>
<p>Then, there’s the notion that there’s other ways to tackle this problem: rather than:</p>
<pre><code class="lang-auto">{
  [ ... ]
  "type": "Create",
  "object": "https://social.sitedethib.com/users/Thib/statuses/1234",
  "to": ["https://social.sitedethib.com/users/Thib/followers"]
}
</code></pre>
<p>One could do the perfectly-acceptable:</p>
<pre><code class="lang-auto">{
  [ ... ]
  "to": [
    {
      "@context": [...]
      "id": "https://social.sitedethib.com/users/Thib/followers",
      "type": "OrderedCollection",
      "first": [...],
      "digest": ABC123
    }
  ]
}
</code></pre>
<p>And there’s the digest, already in the proper location.</p>
<p>Plus, I’ve noticed Mastodon likes to try to tackle the “optimization” problem ahead of time (ex: sharedInbox). Before proposing adding extra crud in the name of optimization/performance it would help to actually measure that performance and have numbers to back that up. Measure it, otherwise there will be endless debates over how often followers-only is actually used, how much such a problem would actually load onto peer servers. Only then can a reasonable discussion over performance and optimization occur. And the answer may be to just use standard HTTP tools to do so: batching requests (for a small servers receiving a lot from one monolithic instance) or requiring the maintainer of monolithic instances to rightfully maintain a gateway for managing the massive traffic for incoming requests, <em>because you can’t rely on performance shortcuts from federated peers anyway</em>.</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Claire.html'><span itemprop='name'>Claire</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-08-04T15:44:42Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <h3>RE: Number 1</h3>
<p>This account is used to do all the signed fetches, forward reports, etc.<br>
Previously, we’d just pick an existing user (often, the instance admin, but that wasn’t a guarantee), but that could be confusing for remote users. It’s just a dedicated user.<br>
Anyway, I’m not sure how this consideration fits in the current proposal.</p>
<h3>RE: Number 2</h3>
<p>Yup. However, if you do re-use the followers collection endpoint, then you have the issue that you may want a few differents behavior from it:</p>
<ol>
<li>list all followers, regardless of the domain (default in Mastodon, can be opted out by the user, not suitable for the synchronization mechanism as there are potentially hundreds or thousands of unrelated accounts)</li>
<li>list none of the followers (when the user has decided to hide their followers, obviously not suitable for the synchronization mechanism)</li>
<li>list all followers from the instance of the requesting account</li>
</ol>
<p>Having something do the second behavior when no signature is provided but the third one when one is, would make sense, but then the case of the first behavior being “downgraded” by the presence of a signature does not (furthermore, you could want to show your full followers list, but only to your friends).</p>
<h3>RE: Number 3</h3>
<p>This makes sense, I considered it, and I do like this proposal to a large extent, however:</p>
<ul>
<li>I fear it might break backward-compatibility with previous Mastodon versions (haven’t fully checked it, but a quick glance didn’t look good) and possibly other software</li>
<li>same considerations as <strong>Number 2</strong>
</li>
<li>pretty minor, but does not allow you to inline hashes for multiple domains</li>
</ul>
<p>Performances concerns: right, I haven’t actually measured the cost of performing a query every single time, but having all your follower instances request a non-cacheable (not on edge servers anyway) endpoint every time you send them a followers-only toot does not seem good (especially with Mastodon, which uses technology that doesn’t provide asynchronous handling of incoming requests).</p>
<p>EDIT: I checked, and yeah, Mastodon isn’t going to like non-uris in the <code>to</code> attribute (we could improve that, but it’s not going to fix current versions)</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cjs.html'><span itemprop='name'>cjs</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-08-04T15:59:33Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Ah gotcha. Thanks for considering my feedback. I don’t think I have any further comments since your concerns get pretty Mastodon-specific, so while your software engineering skills could address them, mine can’t.</p>
<p>To summarize my understanding of the discussion:</p>
<p>The problem can be broken down into <em>detecting</em> the out-of-sync-ness and <em>correcting</em> it, no debate about digest for the former nor a HTTP request for the latter.</p>
<p><em>Detecting</em>: Current proposal is to enshrine the <code>digest</code> into a whole new vocabulary, I think I landed at embedding the <code>digest</code> into the very content-less followers <code>OrderedCollection</code> as a literal in the <code>to</code> property. Mastodon’s concerns are: backwards compatibility, no domain-specific hashes, harder to reason about Mastodon’s behavior.</p>
<p><em>Correcting</em>: The current proposal involves an HTTP Sigs fetch to <code>followers</code> by the user’s actor, I think I landed at an HTTP Sigs fetch to <code>followers</code> by the server’s <code>Service</code> actor. But in hindsight I agree w/ you, I think now this kind of looks silly now. A vestigial remain of my thought process for how to reason about this in an ActivityPub way. Mastodon’s concerns are: harder to reason about Mastodon’s behavior.</p>
<p>Final thing I have to say is that, on a personal note, I’m not very thrilled at the prospect of translating yet another whole new Mastodon-specific vocabulary for go-fed as it usually has very little and/or insufficient corresponding documentation, and I can’t read Ruby to save my life.</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Claire.html'><span itemprop='name'>Claire</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-08-04T16:09:56Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>On the <em>Correcting</em> part: the signed fetch <em>is</em> performed by the <code>Service</code> actor, but that doesn’t change much of anything overall.</p>
<p>I understand your concern about adding custom vocabulary, and I tried to keep that down (in the end, the new stuff is “only” <code>synchronizationCollection</code>, <code>SynchronizationItem</code> and <code>partialCollection</code>. We could have gotten rid of the first two by using your “embedding the <code>OrderedCollection</code>” proposal, but unfortunately that would break compatibility with at least past and current versions of Mastodon, and likely other software.</p>
<p>I also can hear you about the lack of documentation. We have some documentation on <a href="https://docs.joinmastodon.org/spec/activitypub/#extensions" rel="nofollow noopener">https://docs.joinmastodon.org/spec/activitypub/#extensions</a> but we could definitely improve it.</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/darius.html'><span itemprop='name'>darius</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-08-04T17:01:09Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I don’t have technical commentary but I do think this makes sense as something that most AP servers should have the ability to do from time to time.</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../scaling-up-cooperation/837/2.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://socialhub.activitypub.rocks/t/scaling-up-cooperation/837/2'>
                      <span itemprop='name'>Scaling Up Cooperation</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cwebber.html'><span itemprop='name'>cwebber</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-04T16:46:34Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>There’s a lot here… but here are my thoughts.</p>
<p>You’ve already heard from me that I don’t love the way AP deployments have become domain-oriented, and I know <a class="mention" href="../../u/claire.html">@Claire</a> has already acknowledged it’s an issue so I guess we won’t rehash that here.  I do fear this further entrenches that.  However I also want to acknowledge the amount of thought and care that has gone into this proposal by <a class="mention" href="../../u/claire.html">@claire</a> (and also the follow-up thinking by <a class="mention" href="../../u/cjs.html">@cjs</a>).</p>
<p>I actually think that the pairwise <code>Service</code> endpoint is the right solution though.  I also think there’s a question of “is this something that should be checked every request, or time to time for error correction?”</p>
<p>I’m going to suggest a modified workflow based on the latter, maybe as an alternate starting point:</p>
<ul>
<li>The check is not done on every receipt, but is done every now and then for error correction.</li>
<li>Attach the Service actor to every actor, including collections (such as the Follow collection).  This now becomes the equivalent “domain” for every actor.  (It would be better if the Service actor also signs off on this being true, though it’s probably fine to skip that and just say “well we’re not going to bother yet because we’ll just require it’s on the same domain”… an okay intermediate step.  That’s actually a security concern for other issues but not for this one.)</li>
<li>So now we can traverse from an Actor’s Followers collection -&gt; the appropriate Service endpoint.  Ok.</li>
<li>Now send the Service endpoint, “Hey, could you give me a hash of what the contents are for the following collections for the followers at <em>my</em> Service endpoint: [, , , …]” (man, we really need to build promise-resolution into AP systems huh… for now I guess you could use http request-response to do it)  So this is really a Service asking a Service for sanity checks on collections.  The request is signed via an http signature from the <em>requesting</em> endpoint.</li>
<li>The Service says “Sure, here you go:”</li>
</ul>
<pre><code class="lang-auto">{"type": "CollectionCheck",
 "checkResult": [
   {"uri": "https://social.example/u/alice/c/followers",
    "checkHash": &lt;hash-goes-here&gt;}]}
</code></pre>
<ul>
<li>If things are off, then the service which is mirroring the followers can request to the canonical service of those URIs to give them a corrected list.</li>
</ul>
<p>(Mastodon does nonces on its http signatures right?  That’ll be extra important here to prevent replay attacks in both requests to the Service).</p>
<p>This also has the advantage of not increasing the message size of each sent message by a large amount, which I think the original proposal appeared to do.  Instead it changes into an “occasional repair” approach.</p>
<p>What do you think <a class="mention" href="../../u/claire.html">@Claire</a> (and <a class="mention" href="../../u/cjs.html">@cjs</a>)?</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cjs.html'><span itemprop='name'>cjs</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-04T19:33:55Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks for the suggestion, Chris! I still strongly prefer an AP-friendly solution, and I would categorize your proposal as such.</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Claire.html'><span itemprop='name'>Claire</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-05T10:24:13Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I am mostly ok with this proposal, but there are a few things I’m not sure about.</p>
<h3>Which objects should have an attached service actor</h3>
<p>I’m not sure having a different attached actor for every collection would make a lot of sense. It could be useful for flexibility and for ease of use, however, what would be the point of an actor and its followers collection having a different attached service account? What would you do when that happens?</p>
<h3>Upgrade path</h3>
<p>This actor/collection → service actor thing would be a new thing, and the upgrade path really isn’t obvious.</p>
<p>For the followers synchronization mechanism to work, you need to know the attached service of <em>all</em> the followers/followed users, but realistically, you’d only know about them for individuals users when getting an <code>Update</code> or re-fetching one actor’s definition once <em>both</em> servers are upgraded.</p>
<p>So, unless specific action is taken, you’ll only know the attached service of a subset of the known accounts managed by that service. And running the followers synchronization mechanism when you know only about the attached service of a subset of those followers means the synchronization mechanism will effectively break the synchronization, removing the unaccounted followers from the following end, but not from the followed end.</p>
<p>This might be salvageable, as it seems reasonable to assume that if one actor on a specific domain advertises its attached service, all of them do (or at least all of them <em>managed by the same service</em>, which is what we’re interested in), so upon discovering an attached service on an account, we can schedule a re-fetch of all the actors on the same domain for which we do not know the attached service, but:</p>
<ul>
<li>it might involve a <em>lot</em> of requests (e.g., my small, single-user instance, knows about 12K mastodon.social users)</li>
<li>what do we do if one of those requests fails?</li>
<li>the synchronization mechanism remains unusable until this process has finished, so one needs to keep track of that</li>
<li>there is also the fact that actor json <em>can</em> get cached on an edge server, so the initial assumption might not <em>always</em> be true</li>
</ul>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cwebber.html'><span itemprop='name'>cwebber</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-05T12:37:28Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>I’m not sure having a different attached actor for every collection would make a lot of sense. It could be useful for flexibility and for ease of use, however, what would be the point of an actor and its followers collection having a different attached service account? What would you do when that happens?</p>
</blockquote>
<p>Think of it this way: we’re saying “Hm, we need to check that our understanding of the state of this collection is correct or not…”  Now consider that Followers is only one kind of collection, in theory people can have photo galleries, etc… and one might want to use the same technique.  From such an analysis, it is clear that the correct generalization is that it is the object being synchronized, namely the collection, that we look to for its service endpoint.</p>
<blockquote>
<p>For the followers synchronization mechanism to work, you need to know the attached service of <em>all</em> the followers/followed users, but realistically, you’d only know about them for individuals users when getting an <code>Update</code> or re-fetching one actor’s definition once <em>both</em> servers are upgraded.</p>
</blockquote>
<p>This might not be a problem if this is done as a periodic repair step:</p>
<ul>
<li>Occasionally see if repair checks can be done… including against those which you know the service endpoint (you can start the repair!  only one side needs to know in this case), and those which don’t.  If you’re testing if a server has gotten new service endpoint support, you could use a heuristic where you query one or two users’ collections as a short probe, and if you see service endpoints listed, begin fetching; if not, abort.  That allows for upgrading within the current world of domains stuff or not.</li>
<li>Or push out updates to start that process.</li>
<li>As evidence for “only one side needs to know in this case”, consider that when requesting from the requestor of the check, it already knows what the response-end’s endpoint is.  So the response-end can therefore say “oh, well this claims it’s checking against all these endpoints which are theoretically managed by this service… if that’s true, then I guess these objects must have services listed now”.  Start checking, and if you see some, then great, start noting them down and get the rest.  If not abort and return an error because their signature won’t be acceptable for this entire set anyway.</li>
<li>This might seem like a large amount of overhead, and it might be for a short period.  But in the long run, I’m going to argue that it’s less: consider how much is <em>not</em> being added to every message going forward in history <img src="../../images/emoji/twitter/slight_smile.png@v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:">
</li>
</ul>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Claire.html'><span itemprop='name'>Claire</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-05T13:34:55Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>Occasionally see if repair checks can be done… including against those which you know the service endpoint (you can start the repair! only one side needs to know in this case), and those which don’t. If you’re testing if a server has gotten new service endpoint support, you could use a heuristic where you query one or two users’ collections as a short probe, and if you see service endpoints listed, begin fetching; if not, abort. That allows for upgrading within the current world of domains stuff or not.</p>
</blockquote>
<blockquote>
<p>Or push out updates to start that process.</p>
</blockquote>
<p>This will only work when both ends have support for the “attached service actor” thing.</p>
<blockquote>
<p>As evidence for “only one side needs to know in this case”, consider that when requesting from the requestor of the check, it already knows what the response-end’s endpoint is. So the response-end can therefore say “oh, well this claims it’s checking against all these endpoints which are theoretically managed by this service… if that’s true, then I guess these objects must have services listed now”. Start checking, and if you see some, then great, start noting them down and get the rest. If not abort and return an error because their signature won’t be acceptable for this entire set anyway.</p>
</blockquote>
<p>Sorry, I do not understand this part at all.</p>
<p>Anyway, there are two things here:</p>
<ul>
<li>discovering that a followed account’s “followers” collection supports “attached service actor”/“follower synchronization mechanism”:
<ul>
<li>on the negative side, it’s difficult to come up with a heuristic to check that (currently, Mastodon doesn’t refetch profiles of followed accounts unless some explicit action is taken or receiving an <code>Update</code>)</li>
<li>on the plus side, only having partial info is fine for this, you don’t need to know about other accounts to initiate a check on a remote followed account</li>
</ul>
</li>
<li>discovering if your followers support “attached service actor”/“follower synchronization mechanism”:
<ul>
<li>when receiving a check request, to provide a sound result, you MUST know the “attached service actor” of all the requested account’s followers who are managed by the requesting service actor</li>
<li>since by definition you may not have this info yet for every follower, you don’t know the exact set of actors to re-fetch</li>
<li>since the whole goal of this thing is to not rely on domain-based reasoning, you can’t rely on “re-fetch only the accounts for which the <code>acct:</code> domain part is the same as the requesting account”</li>
<li>it might be reasonable, however, to only re-fetch actors whose <code>id</code> is hosted on the same domain name as the service’s <code>id</code>, as that would be consistent with the current security assumptions</li>
<li>one cannot, however, assume that one domain name is served by the same AP software, and in particular, one cannot assume that all the AP software serving one domain support the “attached service actor” thing; therefore, knowing accounts that do <em>not</em> have an attached service actor does not mean that you have only a partial view. This means there isn’t any easy criterion to know when you need to re-fetch actors… the only case in which you are sure you don’t have to re-fetch is the case where you know every followed account has an attached service actor</li>
</ul>
</li>
</ul>
<blockquote>
<p>This might seem like a large amount of overhead, and it might be for a short period. But in the long run, I’m going to argue that it’s less: consider how much is not being added to every message going forward in history <img src="../../images/emoji/twitter/slight_smile.png@v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
<p>I’d argue it’s an <strong>immense</strong> amount of overhead, and also pretty error-prone. And in the (admittedly very rare, but that’s the kind of the things your proposal addresses to begin with, otherwise my proposal would be far enough) case where a domain is served by multiple AP software, not all of which handle this mechanism, this may have to be done an unbounded number of times.</p>
<p>Thankfully, in most cases, the heaviest part (discovering support for all remote followers) would only have to be done once per instance pairs.</p>
<p>There’s also the question on <strong>when</strong> to check for corrections. Request too often, and you have significant overhead, request not often enough, and you risk leaking private messages to desynchronized followers. My proposal addressed that by inlining the required info on each followers-only message (at the cost of some overhead for each of those messages, yes), which are the messages that would be affected by a synchronization error.</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cwebber.html'><span itemprop='name'>cwebber</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-05T14:46:09Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Arguably this problem is another thing that stems from the mistake of rushing in a domain-oriented <code>sharedInbox</code> distribution in the first place (which also breaks ocap security, and is my biggest regret in ActivityPub…).  The chat system I’m working on is a proof of concept of how to get around these problems in an ocap manner that doesn’t require so much state synchronization and instead relies on message flow while still reducing the number of messages (the core idea is the “ampitheater” that is only vaguely demonstrated on <a href="http://www.erights.org/elib/distrib/unum/index.html" rel="nofollow noopener">this page from Electric Communities’ documentation</a>), but I realize that I am getting it out a bit too late and now the network as a whole has adopted to the broken domain-oriented model.  I do fear that by the time I have my solutions out there that the ActivityPub network as a whole won’t be able to adapt to them even if it’s done in a spec-compatible way.  :\</p>
<p>I realize that the route I’m suggesting as an intermediate fix also seems complicated (though I’d argue that the original is too, in different ways; I think the solution I’ve suggested is a simpler pattern, but with a more complicated upgrade path in the meanwhile); I’m attempting to encourage this because I think in the long run it’ll have less structural issues and still preserves a path forward to a better design.  I really do fear that if we keep trying to patch up the “origin” style system we’re going to end up digging our heels in enough that it won’t be possible to get out of it again.  But maybe that’s already the case.</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/nightpool.html'><span itemprop='name'>nightpool</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-05T14:50:08Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="cwebber" data-post="10" data-topic="1172">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/cwebber/40/51_2.png" class="avatar"> cwebber:</div>
<blockquote>
<p>I actually think that the pairwise <code>Service</code> endpoint is the right solution though. I also think there’s a question of “is this something that should be checked every request, or time to time for error correction?”</p>
</blockquote>
</aside>
<p>I haven’t dug into the technical details of your proposal Chris, but I think it’s really very important that, when processing addressing that’s given by a collection, two servers can agree about the state of the world that’s implied by that collection. So in general I would prefer to keep thinking about this as something that needs to be checked for every request, not a long term best-effort consistency sort of situation.</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cjs.html'><span itemprop='name'>cjs</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-05T15:09:18Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote group-mastodon" data-username="nightpool" data-post="16" data-topic="1172">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>I haven’t dug into the technical details of your proposal Chris, but I think it’s really very important that, when processing addressing that’s given by a collection, two servers can agree about the state of the world that’s implied by that collection. So in general I would prefer to keep thinking about this as something that needs to be checked for every request, not a long term best-effort consistency sort of situation.</p>
</blockquote>
</aside>
<p>What I interpret is that you’re asking for is distributed atomicity and versioning, which is way bigger a problem than I think you’re intending, especially in an intermittently-connected, possibly delay-delivered, federated network context.</p>
<p>For example: If my AP software receives a message from a peer who composed it a year ago (but never delivered it until now, a year later) with followers at v1, and it’s now far obsolete because my instance’s users have all unfollowed, is the onus on my server to treat the peer server as authoritative and go back and treat the exchange as atomic and distribute it to the once-were followers on my AP server?</p>
<p>I think it is an unnecessary constraint to attempt to rigidly adhere to an every-request-design, especially when it is for solving a problem due to the <code>sharedInbox</code> hack (and thus the solutions explored tend to solve only that particular problem, and not examine the general solution space). For example, a path forward could be to abandon <code>sharedInbox</code> entirely and maintain preauthenticated channels like kaniini’s suggestion, to solve the <code>sharedInbox</code> performance problem, and then use that single multiplexed channel to better manage atomicity/distributed versioning (ex: as part of startup, or as far as in between every bundled message), which would also be a general solution as well.</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cwebber.html'><span itemprop='name'>cwebber</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-05T15:13:46Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>I haven’t dug into the technical details of your proposal Chris, but I think it’s really very important that, when processing addressing that’s given by a collection, two servers can agree about the state of the world that’s implied by that collection. So in general I would prefer to keep thinking about this as something that needs to be checked for every request, not a long term best-effort consistency sort of situation.</p>
</blockquote>
<p>I understand that and it makes sense within the context of the way ActivityPub has been rolled out (which I still think is unfortunate but I am partly to blame by not realizing the implications of a sharedInbox “mirror the followers collection” approach or knowing of an alternative at the time).  I do think the ampitheater pattern would fix this but it requires more ocap stuff than I think implementors are yet ready for.  I am trying to figure out how to make it more understandable, but I’m trying to do that through prototyping.</p>
<p>In the meanwhile, we should acknowledge something important: whenever messages are “reposted”, the collectionSynchronization will need to be stripped out, because otherwise else you’re leaking some dangerous information: who, on this server, has subscribed to who.  That might be private, and if someone has a guess they can uncover it (hmmmmm… let me just see if these three users are in there… aha, they are!) and they can also check for when it has changed to observe when the collections’s contents have changed.  I’m not sure that message signatures are still being really used, but if they are you’d have to strip them out for signing/verifying too.</p>
<p>But wait!  I’ve just thought of an alternative that I think is a hack, but actually is no more of a hack than anything presented, and manages to not clutter up the activitystreams messages <em>AND</em> incorporates the kind of workflow that <a class="mention" href="../../u/claire.html">@claire</a> wanted.  What if we just took the same information that was in <a class="mention" href="../../u/claire.html">@claire</a>’s collectionSynchronization message and put it in an HTTP header?  Like <code>X-Collection-Synchronization: &lt;base64-encoded synchronization data&gt;</code></p>
<p>That is fully backwards compatible, provides the information desired, and also is forwards compatible towards other designs that are more actor/ocap’y.  Maybe everyone can be happy with that.  (Plus since it’s not put in the json-ld, that can be one less thing to define as any kind of special term… it could be as simple as: <code>[[&lt;collection-id&gt;, &lt;domain&gt;, &lt;hash&gt;], ...]</code></p>
<p><a class="mention" href="../../u/nightpool.html">@nightpool</a>, <a class="mention" href="../../u/claire.html">@claire</a>, <a class="mention" href="../../u/cjs.html">@cjs</a> … what do you think?  Maybe everyone can be happy with this!</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Claire.html'><span itemprop='name'>Claire</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-05T15:17:09Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think this last solution has exactly the same shortcomings as my proposal? The only thing that would be different is that you’d consider this as “not quite an ActivityPub thing, more of an interim solution” but I don’t really know if that’s really a good thing.</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cwebber.html'><span itemprop='name'>cwebber</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1172.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-05T15:21:06Z'>
              <time itemprop='dateModified' datetime='2020-12-01T17:28:32Z' class='post-time'>
                December 1, 2020,  5:28pm
              </time>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Well it is intentionally using the same mechanism as yours, just moving it up to the http headers.  And yes, the advantage there is two things:</p>
<ul>
<li>yes, one is <em>exactly</em> that it’s “not quite an activitypub thing, more of an interim solution”, because I think there’s better options out there</li>
<li>It doesn’t have the complexities of accidentally leaking information with sharing posts that I warned about, which will be a <em>real</em> problem with nodes that aren’t aware of this addition… any reposts from there won’t know to strip that off and thus will perpetuate as security issue</li>
</ul>
<p>I’m trying to accomodate your “our current design needs this for every request” bit while trying to not introducing the security vulnerability for now and allow a path towards a different solution as well.  I think those are both important.</p>
        </div>

        <meta itemprop='headline' content='FEP-8fcf: Followers collection synchronization across servers'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><b><a rel="next" itemprop="url" href="1172@page=2.html">next page →</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
