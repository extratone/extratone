<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>S2S Create Activity</title>
    <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647</link>
    <description>Question to [S2S Create Activity](https://www.w3.org/TR/activitypub/#create-activity-inbox)

A client sends an activity to [http://server_a.com/max](http://server_a.com/max)  . 
It gets the id: [http://server_a.com/max/activity_0815](http://server_a.com/max/activity_0815). 
The property **as:to** of [http://server_a.com/max/activity_0815](http://server_a.com/max/activity_0815) is [http://server_b.com/jane](http://server_b.com/jane).
	
So [http://server_a.com/max/outbox](http://server_a.com/max/outbox) is something like that:
```
    {
    	  &quot;@context&quot;: &quot;[https://www.w3.org/ns/activitystreams](https://www.w3.org/ns/activitystreams)&quot;,
    	  &quot;type&quot;: &quot;OrderedCollection&quot;,
    	  &quot;totalItems&quot;: 1,
    	  &quot;orderedItems&quot;: [
    	    {
    	      &quot;type&quot;: &quot;Create&quot;,
    	      &quot;id&quot;: &quot;http://server_a.com/max/activity_0815&quot;
    	      &quot;name&quot;: &quot;A Simple Activity&quot;
    	      &quot;to&quot;: &quot;http://server_b.com/jane&quot;
    	    }
    	  ]
    }	
```
Now [http://server_a.com](http://server_a.com) has to deliver the activity to [http://server_b.com/jane/inbox](http://server_b.com/jane/inbox): 
```
{
	  &quot;@context&quot;: &quot;https://www.w3.org/ns/activitystreams&quot;,
	  &quot;type&quot;: &quot;OrderedCollection&quot;,
	  &quot;totalItems&quot;: 1,
	  &quot;orderedItems&quot;: [
	    {
	      &quot;type&quot;: &quot;Create&quot;,
	      &quot;id&quot;: &quot;???????????????????&quot;
	      &quot;name&quot;: &quot;A Simple Activity&quot;
	      &quot;to&quot;: &quot;http://server_b.com/jane&quot;
	    }
	  ]
}	
```
What is the **id** of the activity in [http://server_b.com/jane/inbox](http://server_b.com/jane/inbox) ? Is it also [http://server_a.com/max/activity_0815](http://server_a.com/max/activity_0815) because it&#39;s a 100% copy (like a cache)
Or does it gets a new Id [http://server_b.com/max/activity_15](http://server_b.com/max/activity_15) ?</description>
    
    <lastBuildDate>Wed, 05 May 2021 09:22:23 +0000</lastBuildDate>
    <category>Server to Server</category>
    <atom:link href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[naturzukunft]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://gitlab.com/naturzukunft.de/public/activitypub/spec-discussions/-/blob/master/doc/fed.md" rel="noopener nofollow ugc">I have visualised this a little</a></p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/21">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/21</link>
        <pubDate>Wed, 05 May 2021 09:22:23 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-21</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[cjs]]></dc:creator>
        <description><![CDATA[
            <p>HTTP Signatures is a community-adopted solution to handle the problem “How to associate a particular HTTP request with a particular Actor in an authenticated manner”. But im sure there are other solutions – could be OAuth2 – but would require more thought and would not be compatible with the Mastodon flavor of ActivityPub.</p>
<p>Note that I entertained the idea of using OAuth2 in the federated context to do “Hi server Z, I am X from peer server Y and want you to delete your cache data about me” in <a href="https://socialhub.activitypub.rocks/t/discussion-a-next-step-in-federated-data-protections/300">this</a> but it turns out that particular problem doesn’t really have a good solution – so that post is ignorable. I mention it to avoid confusion over any OAuth2 + AP searches you may do – you’re focused on a totally different problem.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/20">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/20</link>
        <pubDate>Wed, 05 May 2021 08:58:57 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-20</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[naturzukunft]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="cjs" data-post="18" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/cjs/40/584_2.png" class="avatar"> cjs:</div>
<blockquote>
<p>attempt to dereference over the network each time – expensive and not guaranteed server availability.</p>
</blockquote>
</aside>
<p>How can that work? The remote resources are secured, so without authentication you cannot get the ressources. and in the inbox there are a ressources from a lot different servers/accounts.<br>
Is there S2S Server based wayß an alternative for OAuth2 ?</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/19">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/19</link>
        <pubDate>Wed, 05 May 2021 06:09:04 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-19</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[cjs]]></dc:creator>
        <description><![CDATA[
            <p>Yes either a local cache (probably based on the HTTP caching headers) or attempt to dereference over the network each time – expensive and not guaranteed server availability.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/18">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/18</link>
        <pubDate>Tue, 04 May 2021 21:34:21 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-18</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[naturzukunft]]></dc:creator>
        <description><![CDATA[
            <p>ok, now i stuck with the next question ,-)<br>
if i save only the id’s of the activities in the inbox of ActorA, i have to read the ‘graph’ of the activity, if the ActorA wants to see/process it. But therefore the ActorA needs to have an Oauth2 token ?!</p>
<p>Or how should i show the inbox to ActorA ?</p>
<p>I have to had a cache ;-(</p>
<p>Fredy</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/17">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/17</link>
        <pubDate>Tue, 04 May 2021 08:26:19 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-17</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[naturzukunft]]></dc:creator>
        <description><![CDATA[
            <p>i have to sleep over the whole stuff a few nights <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"></p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/16">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/16</link>
        <pubDate>Fri, 30 Apr 2021 07:53:25 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-16</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[cjs]]></dc:creator>
        <description><![CDATA[
            <p>On the whole <a class="mention" href="/u/naturzukunft">@naturzukunft</a> you may be interested in <a class="mention" href="/u/cwebber">@cwebber</a> 's work on <a href="https://spritelyproject.org/" rel="noopener nofollow ugc">Spritely</a> which perhaps fits better with some of the expectations you’ve laid out that I’ve disappointed.</p>
<aside class="quote no-group" data-username="naturzukunft" data-post="12" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/naturzukunft/40/983_2.png" class="avatar"> naturzukunft:</div>
<blockquote>
<p>^ Thats somehow wrong, because the object in the activity <code>https://anotherone.net/thomas/activity_8888888</code> should not have the same id! It’s a new version of <code>https://example.com/max/task_72 </code> version handling maybe a problem <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"><br>
Because if i save the object above in my system there is a timerange where two objects in two instances life with the same id in different state.</p>
</blockquote>
</aside>
<p>Yeah this is why some softwares do not support sending the <code>Update</code> activity for certain kinds of content. But you’re right, there is a slow cache-consistency problem. Imagine if we federated via ActivityPub over sneakernet… I go sailing and type up a bunch of notes, including <code>Update</code>s to things you already have cached, and I generate activities, but I don’t have internet access. A ship passes by, and I can federate with them. They have the <code>Update</code>, no one else does. That ship can carry it further to share with the rest of the world, as could mine. ActivityPub accommodates this slow eventual consistency, and can survive divisions of the network (and heal when they’re re-connected).</p>
<p>Apps may demand real-time “global state”, and this is the key tragedy of Blockchain-like decentralized thinking. Trying to have decentralization <em>but also</em> demand global consistency. That is not needed in federation: decentralization, with a window into “the world” <em>and yet</em> acknowledgement there’s more out there that we don’t know. Perhaps a little too philosophical.</p>
<aside class="quote no-group" data-username="naturzukunft" data-post="11" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/naturzukunft/40/983_2.png" class="avatar"> naturzukunft:</div>
<blockquote>
<p>Unfortunately, what i will have to do is rely on our implementation and care little about others. how our interpretations are then compatible remains to be seen.<br>
I can do no more than try to clarify questions here in the socialhub.<br>
It is and remains exciting</p>
</blockquote>
</aside>
<p><img src="https://socialhub.activitypub.rocks/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"> A lot of people wish to remain “compatible with the Mastodon-flavor of ActivityPub”, but it is certainly not required.</p>
<aside class="quote no-group" data-username="naturzukunft" data-post="10" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/naturzukunft/40/983_2.png" class="avatar"> naturzukunft:</div>
<blockquote>
<p>That will be a problem <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"> We currently implementing a taskprocessing mechanism, that is a main part of our architecture. ok, for now all actors will be in one instance, but i don’t want to make any exceptions as far as possible. an actor is an actor, no matter on which instance. otherwise it will be chaotic.</p>
</blockquote>
</aside>
<p>FYI ForgeFed had a similar problem and solved it using <a href="https://forgefed.peers.community/behavior.html#offer-flow" rel="noopener nofollow ugc">Offer flow</a>:</p>
<blockquote>
<p>The <em>offer</em> flow begins with an <a href="https://www.w3.org/TR/activitystreams-vocabulary/#dfn-offer" rel="noopener nofollow ugc">Offer</a> activity, in which <a href="https://www.w3.org/TR/activitystreams-vocabulary/#dfn-object" rel="noopener nofollow ugc">object</a> is the object being offered for publishing, and <a href="https://www.w3.org/TR/activitystreams-vocabulary/#dfn-target" rel="noopener nofollow ugc">target</a> indicates under which list or collection the sender would like the object to be published, if the <em>target actor</em> accepts the offer and publishes it.</p>
</blockquote>
<p>Thus, across federating instances, <code>https://example.com/max</code> can <code>Offer</code> something to <code>https://anotherone.net/thomas</code>, then Thomas can <code>Accept</code> it and then do the usual ActivityPub behavior.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/15">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/15</link>
        <pubDate>Thu, 29 Apr 2021 16:04:08 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-15</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[naturzukunft]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="/u/sebastian">@Sebastian</a> you are Hijacking the thread <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"></p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/14">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/14</link>
        <pubDate>Thu, 29 Apr 2021 11:42:36 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-14</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[Sebastian]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="cjs" data-post="6" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/cjs/40/584_2.png" class="avatar"> cjs:</div>
<blockquote>
<p>Depends on who you ask.</p>
</blockquote>
</aside>
<p>Exactly.<br>
If I would only read the specification, I understand that the <code>id</code> must be<br>
either <code>null</code> or it must be a “unique global identifier” which is a “Publicly dereferencable URI".</p>
<p>Maybe instead of ‘users’ one of the ‘authors’ could make clear whether<br>
<code>https://alyssa.cat#elephant</code> and<br>
<code>https://alyssa.cat#parrot</code></p>
<p>are the same <code>id</code> or a different <code>id</code> …</p>
<p>An authoritative statement would be wonderful<br>
<a class="mention" href="/u/rhiaro">@rhiaro</a></p>
<p><img src="https://socialhub.activitypub.rocks/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji only-emoji" alt=":slight_smile:"></p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/13">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/13</link>
        <pubDate>Thu, 29 Apr 2021 10:37:57 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-13</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[naturzukunft]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="naturzukunft" data-post="8" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/naturzukunft/40/983_2.png" class="avatar"> naturzukunft:</div>
<blockquote>
<p>And now Thomas is fulfilling the task and change the status to “DONE” then this activity will be in Thomas’s outbox:</p>
<pre><code class="lang-auto">{
	"@context": "https://www.w3.org/ns/activitystreams",
	"type": "Update",
	"id": "https://anotherone.net/thomas/activity_8888888",
	"actor": "https://anotherone.net/thomas",
	"object": {
		"id": "https://example.com/max/task_72",
		"type": "Task",
		"assignee": "https://anotherone.net/thomas",
		"status": "DONE",
		"to": [
			"https://example.com/max"
		]
	},
	"to": [
		"https://example.com/max"
	]
}
</code></pre>
</blockquote>
</aside>
<p>^ Thats somehow wrong, because the object in the activity <code>https://anotherone.net/thomas/activity_8888888</code> should not have the same id! It’s a new version of  <code>https://example.com/max/task_72 </code>  version handling maybe a problem <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"><br>
Because if i save the object above in my system there is a timerange where two objects in two instances life with the same id in different state.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/12">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/12</link>
        <pubDate>Thu, 29 Apr 2021 08:45:59 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-12</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[naturzukunft]]></dc:creator>
        <description><![CDATA[
            <p>But i see a lot of compatibilty problems (a huge amount) in near future. i feel already in there. the federation seems to work for some simple usecases and some simple Notes. but we are far away from building federated applications.</p>
<p>We will see, either i/we fail or we are among the first <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"></p>
<p>Unfortunately, what i will have to do is rely on our implementation and care little about others. how our interpretations are then compatible remains to be seen.<br>
I can do no more than try to clarify questions here in the socialhub.<br>
It is and remains exciting</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/11">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/11</link>
        <pubDate>Thu, 29 Apr 2021 08:00:06 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-11</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[naturzukunft]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="cjs" data-post="9" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/cjs/40/584_2.png" class="avatar"> cjs:</div>
<blockquote>
<p>One point of detail: the <code>Activity</code> <em>may</em> have the actual data you’re interested in ( <code>Task</code> , in this case) embedded in its body. I think most implementations rely on IRI indirection here.</p>
</blockquote>
</aside>
<p>Yes, i also have the feeling that rather few think in triples. but i don’t want to start parsing and interpreting json. in my ideal case, the incoming json becomes a list of triples as quickly as possible. <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"></p>
<aside class="quote no-group" data-username="cjs" data-post="9" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/cjs/40/584_2.png" class="avatar"> cjs:</div>
<blockquote>
<p>but I’d propose excluding it for now, and revisiting it later.</p>
</blockquote>
</aside>
<p>That will be a problem <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"> We currently implementing a taskprocessing mechanism, that is a main part of our architecture. ok, for now all actors will be in one instance, but i don’t want to make any exceptions as far as possible. an actor is an actor, no matter on which instance. otherwise it will be chaotic.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/10">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/10</link>
        <pubDate>Thu, 29 Apr 2021 07:53:34 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-10</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[cjs]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="naturzukunft" data-post="7" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/naturzukunft/40/983_2.png" class="avatar"> naturzukunft:</div>
<blockquote>
<p>But this sentence is confusing me:<br>
<em>“and it is likely that the server will want to locally store a representation of this activity and its accompanying object”</em><br>
(see: 7.2 Create Activity)</p>
</blockquote>
</aside>
<p>You have a right to cache the payload, unmodified. So you’re correct, <code>server_b</code> will locally store federated payloads from <code>server_a</code>, meaning it is up to your specific application whether you want your app’s logic to:</p>
<ol>
<li>Store everything ever sent to you and rely heavily on your cache; or</li>
<li>Just store the IRIs and then re-fetch from a peer server whenever you need the body of the object (no caching); or</li>
<li>something in between</li>
</ol>
<aside class="quote no-group" data-username="naturzukunft" data-post="8" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/naturzukunft/40/983_2.png" class="avatar"> naturzukunft:</div>
<blockquote>
<p>Who is able to update objects?</p>
</blockquote>
</aside>
<p>That is application-specific. In today’s software, typically only the original actor sends an <code>Update</code> Activity – if the software even allows Updates at all.</p>
<aside class="quote no-group" data-username="naturzukunft" data-post="8" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/naturzukunft/40/983_2.png" class="avatar"> naturzukunft:</div>
<blockquote>
<p><code>did i miss something in the specification? i don't remember it saying anything about who can update or delete objects.</code></p>
</blockquote>
</aside>
<p>The question of “who can do what” is again, unfortunately, application specific. The <code>Update</code> and <code>Delete</code> Activities are sent out to allow coordinated “cache control” of these copies living in other federated peers. Some applications skip the <code>Update</code> logic and only federate <code>Create</code> and <code>Delete</code>.</p>
<p>I think a key point of confusion may be: In your example, you have a cross-instance federated <code>Update</code>. That is, <code>https://anotherone.net/thomas</code> is attempting to <code>Update</code> something originating from <code>https://example.com/</code>. This is not the simple case, but a very gnarly case due to how IRIs today are coupled with their originating server. I think there are discussions on this SocialHub going into great debate trying to solve this kind of general problem (“sending an activity about data living on another instance”) but I’d propose excluding it for now, and revisiting it later.</p>
<p>With that in mind, that means an app’s primary focus is going to figure out if it should let only the original actor also send an <code>Update</code> about the data it “owns” – letting only <code>https://example.com/max</code> send an <code>Update</code> for <code>https://example.com/max/task_72</code> – or allow <em>anyone</em> on <code>https://example.com</code> send that <code>Update</code>. I can’t remember off the top of my head if some peer software already bakes that assumption into their processing of <em>incoming</em> federated activities, in which case it is also a compatibility problem now.</p>
<p>One point of detail: the <code>Activity</code> <em>may</em> have the actual data you’re interested in (<code>Task</code>, in this case) embedded in its body. I think most implementations rely on IRI indirection here. For example, a complete discovery round of fetching could look like this:</p>
<ol>
<li>Fetching <code>https://example.com/max/outbox</code> may yield:</li>
</ol>
<pre><code class="lang-auto">{
  "@context": "https://www.w3.org/ns/activitystreams",
  "type": "OrderedCollection",
  "totalItems": 4,
  "orderedItems": [
    "https://foo.bar/baz/1",
    "https://server_a.com/max/activity_0815",
    "https://example.com/something/else/123",
    "https://server_b.com/max/activity_0004"
  ]
}
</code></pre>
<p>2a) You then iterate – I’ll just go through one iteration here – and fetch the first <code>orderedItem</code>:</p>
<pre><code class="lang-auto">{
  "@context": "https://www.w3.org/ns/activitystreams",
  "type": "Update",
  "id": "https://foo.bar/baz/1",
  "actor": "https://foo.bar/thomas",
  "object": "https://example.com/max/task_72",
  "to": "https://example.com/max"
}
</code></pre>
<p>2b) You then fetch <code>https://example.com/max/task_72</code> and obtain the latest version of it (note: this will also be the same payload when fetching the <code>Create.object</code> for this task):</p>
<pre><code class="lang-auto">{
  "id": "https://example.com/max/task_72",
  "type": "Task",
  "status": "DONE",
  "assignee": "https://anotherone.net/thomas"
}
</code></pre>
<ol start="3">
<li>If still iterating, go to 2a.</li>
</ol>
<hr>
<p>Ignoring the cross-federated update, the simple path is: each instance of federated software is able to “own” and operate on (update and delete) their own data, but share it. Peers receiving that data can then generally generate <em>new</em> data in response to such data, and also share it. They can also locally delete it (ex: moderation) but it does not result in mass censorship for other federated software instances.</p>
<p>I’m not sure what interactions you’re interested in, but if that previous paragraph is insufficient for your use-cases, you’re not alone. Great questions!</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/9">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/9</link>
        <pubDate>Thu, 29 Apr 2021 06:20:00 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-9</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[naturzukunft]]></dc:creator>
        <description><![CDATA[
            <p>Who is able to update objects?<br>
Actor Max creates an activity in he’s outbox:</p>
<pre><code class="lang-auto">{
  "@context": "https://www.w3.org/ns/activitystreams",
  "type": "Create",
  "id": "https://example.com/max/activity_7287374",
  "actor": "https://example.com/max",
  "object": {
    "id": "https://example.com/max/task_72",
    "type": "Task",
    "status": "OPEN",
    "assignee": "https://anotherone.net/thomas",
    "to": ["https://anotherone.net/thomas"]
   },
  "to": ["https://anotherone.net/thomas"]  
}
</code></pre>
<p>And now Thomas is fulfilling the task and change the status to “DONE” then this activity will be in Thomas’s outbox:</p>
<pre><code class="lang-auto">{
	"@context": "https://www.w3.org/ns/activitystreams",
	"type": "Update",
	"id": "https://anotherone.net/thomas/activity_8888888",
	"actor": "https://anotherone.net/thomas",
	"object": {
		"id": "https://example.com/max/task_72",
		"type": "Task",
		"assignee": "https://anotherone.net/thomas",
		"status": "DONE",
		"to": [
			"https://example.com/max"
		]
	},
	"to": [
		"https://example.com/max"
	]
}

did i miss something in the specification? i don't remember it saying anything about who can update or delete objects.
</code></pre>
<p>Because i store the whole activitypub things in an RDF store, i also has to save the object “<a href="https://example.com/max/task_72" rel="noopener nofollow ugc">https://example.com/max/task_72</a>” in the repository/store of “<a href="https://anotherone.net/thomas" rel="noopener nofollow ugc">https://anotherone.net/thomas</a>”. It’s part of the activity, that i have to save. and it’s a new version of “<a href="https://example.com/max/task_72" rel="noopener nofollow ugc">https://example.com/max/task_72</a>”.</p>
<p>It’s a bit confusing to do this with the same id?! mabye only in my head. To me it sounds more familiar to save a copy with a reference to the original.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/8">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/8</link>
        <pubDate>Thu, 29 Apr 2021 05:34:11 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-8</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[naturzukunft]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="naturzukunft" data-post="2" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/naturzukunft/40/983_2.png" class="avatar"> naturzukunft:</div>
<blockquote>
<p>and it is likely that the server will want to locally store a representation of this activity and its accompanying object</p>
</blockquote>
</aside>
<p>But this sentence is confusing me:<br>
<em>“and it is likely that the server will want to locally store a representation of this activity and its accompanying object”</em><br>
(see: 7.2 Create Activity)</p>
<p>You are right and this is absolutely meaningfull in context of linked-data. (expect caching)</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/7">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/7</link>
        <pubDate>Thu, 29 Apr 2021 05:18:49 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-7</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[cjs]]></dc:creator>
        <description><![CDATA[
            <aside class="quote group-redaktor.me" data-username="Sebastian" data-post="5" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/sebastian/40/38_2.png" class="avatar"> Sebastian:</div>
<blockquote>
<p>what confuses me is the hash fragment.</p>
</blockquote>
</aside>
<p>You’re not alone. <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Me too.</p>
<aside class="quote group-redaktor.me" data-username="Sebastian" data-post="5" data-topic="1647">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/sebastian/40/38_2.png" class="avatar"> Sebastian:</div>
<blockquote>
<p>exept of fragment identifiers, is that correct?</p>
</blockquote>
</aside>
<p>Depends on who you ask.</p>
<p>This is an area of elbows and razor blades so I personally avoid sending fragments for IDs entirely. Since it’s unclear what to do about <em>incoming</em> fragments, I believe I have it so that go-fed just passes them through*. My rationale is that I’ve seen fragments used to specify fields within an ActivityStream via some sort of JSON-LD referencing, but go-fed doesn’t do JSON-LD processing, so no need to touch the fragment.</p>
<p>*For the S2S case. For incoming-dereferencing purposes, I think for mastodon compatibility, I erase any fragments (ex: <code>#main-key</code>) before database retrieval because of the same “I don’t do JSON-LD processing” rationale above, and I don’t want to fail Mastodon requests because they have that extra fragment.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/6">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/6</link>
        <pubDate>Wed, 28 Apr 2021 16:51:34 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-6</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[Sebastian]]></dc:creator>
        <description><![CDATA[
            <p>Hey CJ, agreed, what confuses me is the hash fragment.</p>
<blockquote>
<p>Two <code>id</code> s of different values really do mean they are different.</p>
</blockquote>
<p>exept of fragment identifiers, is that correct?</p>
<p>See also</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/tootsuite/mastodon/issues/13879" target="_blank" rel="noopener">github.com/tootsuite/mastodon</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/tootsuite/mastodon/issues/13879" target="_blank" rel="noopener">ActivityPub ids with # symbol are not resolvable </a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2020-05-27" data-time="16:06:22" data-timezone="UTC">04:06PM - 27 May 20 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/koehn" target="_blank" rel="noopener">
          <img alt="koehn" src="https://socialhub.activitypub.rocks/uploads/default/original/2X/1/17f9e927c9dd2213880b5e01bfa06d91131062c3.jpeg" class="onebox-avatar-inline" width="20" height="20">
          koehn
        </a>
      </div>
    </div>

    <div class="labels">
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">### Expected behaviour

Per the [ActivityPub specification](https://www.w3.org<span class="show-more-container"><a href="" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">/TR/activitypub/#obj-id), IDs must either be `null` or:

&gt; Publicly dereferencable URIs, such as HTTPS URIs, with their authority belonging to that of their originating server. (Publicly facing content SHOULD use HTTPS URIs).

### Actual behaviour
Mastodon ids include information in the fragment (`#`) section, which renders the portion of the ID beyond the fragment symbol as unresolvable by HTTP-conforming libraries such as [libcurl](https://ec.haxx.se/cmdline/cmdline-urls#fragment).

### Steps to reproduce the problem
`curl -vH 'Accept: application/activity+json' 'https://mastodon.technology/@norztech#likes/836349#Like'`

`curl` (correctly) sends:
```
&gt; GET /@norztech HTTP/2
&gt; Host: mastodon.technology
&gt; User-Agent: curl/7.64.1
&gt; Accept: application/activity+json
```</span></p>
  </div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/5">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/5</link>
        <pubDate>Wed, 28 Apr 2021 16:41:42 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-5</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[cjs]]></dc:creator>
        <description><![CDATA[
            <p>The ID, when present, is always immutable.</p>
<p>If a peer gives you something with ID <code>http://server_a.com/max/activity_0815</code>, you <em>always</em> continue to reference the content as having ID <code>http://server_a.com/max/activity_0815</code>. That means you can have an <code>inbox</code> collection for <code>server_b</code> like:</p>
<pre><code class="lang-auto">{
  "@context": "https://www.w3.org/ns/activitystreams",
  "type": "OrderedCollection",
  "totalItems": 4,
  "orderedItems": [
    "https://foo.bar/baz/1",
    "https://server_a.com/max/activity_0815",
    "https://example.com/something/else/123",
    "https://server_b.com/max/activity_0004"
  ]
}
</code></pre>
<p>Two <code>id</code>s of different values really do mean they are different.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/4">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/4</link>
        <pubDate>Wed, 28 Apr 2021 16:24:57 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-4</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[naturzukunft]]></dc:creator>
        <description><![CDATA[
            <p>Could be a way:<br>
<a href="https://schema.org/sameAs" class="onebox" target="_blank" rel="noopener nofollow ugc">https://schema.org/sameAs</a><br>
<a href="https://www.w3.org/TR/owl-ref/#sameAs-def" class="onebox" target="_blank" rel="noopener nofollow ugc">https://www.w3.org/TR/owl-ref/#sameAs-def</a></p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/3">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/3</link>
        <pubDate>Tue, 27 Apr 2021 06:19:11 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-3</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[naturzukunft]]></dc:creator>
        <description><![CDATA[
            <p>The same question is valid for objectIds.<br>
I have just read the specifcaton again, but I can’t find any reference to it.</p>
<p>*the server will want to locally store a representation of this activity and its accompanying object. *</p>
<p>So that makes only sence, if the activity and the object is accessible on that server.  And if i understood linked data right, the id is the url ob the activity/object. And the it is different on servera and serverb.</p>
<p>But if it is different, how can i find the object to update when receiving an update activity?</p>
<p>Do i have to save the original id in a filed like “origin” ? But the <a href="https://www.w3.org/TR/activitystreams-vocabulary/#dfn-origin" rel="noopener nofollow ugc">description</a> of “origin” says, that is not ok to use it for that case.</p>
<p>I miss a property in ASObject therefore.</p>
<h3>
<a name="72-create-activity-1" class="anchor" href="#72-create-activity-1"></a>7.2 Create Activity</h3>
<p>Receiving a <code>Create</code> activity in an <code>inbox</code> has surprisingly few side effects; the activity should appear in the actor’s <code>inbox</code> and it is likely that the server will want to locally store a representation of this activity and its accompanying object. However, this mostly happens in general with processing activities delivered to an <code>inbox</code> anyway.</p>
<h3>
<a name="73-update-activity-2" class="anchor" href="#73-update-activity-2"></a>7.3 Update Activity</h3>
<p>For server to server interactions, an <code>Update</code> activity means that the receiving server (Title: SHOULD) <em>SHOULD</em> update its copy of the <code>object</code> of the same <code>id</code> to the copy supplied in the <code>Update</code> activity. Unlike the <a href="https://www.w3.org/TR/activitypub/#update-activity-outbox" rel="noopener nofollow ugc"> client to server handling of the Update activity</a>, this is not a partial update but a complete replacement of the object.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/2">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/2</link>
        <pubDate>Tue, 27 Apr 2021 05:46:29 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-2</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
      <item>
        <title>S2S Create Activity</title>
        <dc:creator><![CDATA[naturzukunft]]></dc:creator>
        <description><![CDATA[
            <p>Question to <a href="https://www.w3.org/TR/activitypub/#create-activity-inbox" rel="noopener nofollow ugc">S2S Create Activity</a></p>
<p>A client sends an activity to <a href="http://server_a.com/max" rel="noopener nofollow ugc">http://server_a.com/max</a>  .<br>
It gets the id: <a href="http://server_a.com/max/activity_0815" rel="noopener nofollow ugc">http://server_a.com/max/activity_0815</a>.<br>
The property <strong>as:to</strong> of <a href="http://server_a.com/max/activity_0815" rel="noopener nofollow ugc">http://server_a.com/max/activity_0815</a> is <a href="http://server_b.com/jane" rel="noopener nofollow ugc">http://server_b.com/jane</a>.</p>
<p>So <a href="http://server_a.com/max/outbox" rel="noopener nofollow ugc">http://server_a.com/max/outbox</a> is something like that:</p>
<pre><code class="lang-auto">    {
    	  "@context": "[https://www.w3.org/ns/activitystreams](https://www.w3.org/ns/activitystreams)",
    	  "type": "OrderedCollection",
    	  "totalItems": 1,
    	  "orderedItems": [
    	    {
    	      "type": "Create",
    	      "id": "http://server_a.com/max/activity_0815"
    	      "name": "A Simple Activity"
    	      "to": "http://server_b.com/jane"
    	    }
    	  ]
    }	
</code></pre>
<p>Now <a href="http://server_a.com" rel="noopener nofollow ugc">http://server_a.com</a> has to deliver the activity to <a href="http://server_b.com/jane/inbox" rel="noopener nofollow ugc">http://server_b.com/jane/inbox</a>:</p>
<pre><code class="lang-auto">{
	  "@context": "https://www.w3.org/ns/activitystreams",
	  "type": "OrderedCollection",
	  "totalItems": 1,
	  "orderedItems": [
	    {
	      "type": "Create",
	      "id": "???????????????????"
	      "name": "A Simple Activity"
	      "to": "http://server_b.com/jane"
	    }
	  ]
}	
</code></pre>
<p>What is the <strong>id</strong> of the activity in <a href="http://server_b.com/jane/inbox" rel="noopener nofollow ugc">http://server_b.com/jane/inbox</a> ? Is it also <a href="http://server_a.com/max/activity_0815" rel="noopener nofollow ugc">http://server_a.com/max/activity_0815</a> because it’s a 100% copy (like a cache)<br>
Or does it gets a new Id <a href="http://server_b.com/max/activity_15" rel="noopener nofollow ugc">http://server_b.com/max/activity_15</a> ?</p>
          <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/1">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647/1</link>
        <pubDate>Fri, 23 Apr 2021 16:54:46 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-1647-1</guid>
        <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
      </item>
  </channel>
</rss>
