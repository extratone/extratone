<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>What is an outbox, really? What should be there? What should not? - Server to Server - SocialHub</title>
    <meta name="description" content="I’ve been thinking about walls and groups and whatnot and I realized I have more questions than I do answers. The spec says this: 

The outbox stream contains activities the user has published, subject to the ability of &amp;hellip;">
    <meta name="generator" content="Discourse 2.8.0.beta2 - https://github.com/discourse/discourse version c39ab6c0ae3803b6a62501954ae40adb6b73d580">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/b7023860b3d7df97ea10ba3c7ab11cb046a77c7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="814.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://socialhub.activitypub.rocks","potentialAction":{"@type":"SearchAction","target":"https://socialhub.activitypub.rocks/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="SocialHub Search">

      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop" />
      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_5_969dd27459c19a0b7620746a3d179b86ef033d7a.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_3_f50bf2f225326f482d56e65e93f1f047d48417a9.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_8_e3f93470fef56ec97b63f77e16779e328baab8ea.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="8"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_4_8d506fd22b761a15044193a6d4ebda5f6bde2498.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;What is an outbox, really? What should be there? What should not?&#39;" href="814.rss" />
    <meta property="og:site_name" content="SocialHub" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:url" content="https://socialhub.activitypub.rocks/t/what-is-an-outbox-really-what-should-be-there-what-should-not/814" />
<meta name="twitter:url" content="https://socialhub.activitypub.rocks/t/what-is-an-outbox-really-what-should-be-there-what-should-not/814" />
<meta property="og:title" content="What is an outbox, really? What should be there? What should not?" />
<meta name="twitter:title" content="What is an outbox, really? What should be there? What should not?" />
<meta property="og:description" content="I’ve been thinking about walls and groups and whatnot and I realized I have more questions than I do answers. The spec says this:   The outbox stream contains activities the user has published, subject to the ability of the requestor to retrieve the activity (that is, the contents of the outbox are filtered by the permissions of the person reading it). If a user submits a request without Authorization the server should respond with all of the Public posts.   My understanding:   Outbox absolutely..." />
<meta name="twitter:description" content="I’ve been thinking about walls and groups and whatnot and I realized I have more questions than I do answers. The spec says this:   The outbox stream contains activities the user has published, subject to the ability of the requestor to retrieve the activity (that is, the contents of the outbox are filtered by the permissions of the person reading it). If a user submits a request without Authorization the server should respond with all of the Public posts.   My understanding:   Outbox absolutely..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />
<meta property="article:published_time" content="2020-07-22T21:55:54+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
<script src="https://socialhub.activitypub.rocks/theme-javascripts/3a68d4ddcab78e923b7c4169708a8f1deb79df66.js?__ws=socialhub.activitypub.rocks"></script>
    <header>
      <a href="https://socialhub.activitypub.rocks/">
          <img src="../../uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png" alt="SocialHub" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="814.html">What is an outbox, really? What should be there? What should not?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/activitypub.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #0088CC'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>ActivityPub</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/activitypub/s2s/7.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #808281'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Server to Server</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="814.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-07-22T21:55:54Z'>
              <time itemprop='dateModified' datetime='2020-07-22T21:56:29Z' class='post-time'>
                July 22, 2020,  9:56pm
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I’ve been thinking about walls and groups and whatnot and I realized I have more questions than I do answers. The spec says this:</p>
<blockquote>
<p>The outbox stream contains activities the user has published, subject to the ability of the requestor to retrieve the activity (that is, the contents of the outbox are filtered by the permissions of the person reading it). If a user submits a request without <a href="https://www.w3.org/TR/activitypub/#authorization" rel="nofollow noopener">Authorization</a> the server should respond with all of the <a href="https://www.w3.org/TR/activitypub/#public-addressing" rel="nofollow noopener">Public</a> posts.</p>
</blockquote>
<p>My understanding:</p>
<ul>
<li>Outbox absolutely should contain actor’s own posts as <code>Create{Note}</code>, if they’re capable of posting.</li>
<li>Outbox should contain <code>Announce</code> activities for those implementations that use them for reposting.</li>
<li>Outbox <em>may</em> contain actor’s comments, especially for implementations that don’t draw much of a line between top-level posts and replies.</li>
</ul>
<p>My questions up for discussion:</p>
<ul>
<li>Should an outbox contain likes? Likes on public posts are public in the sense that anyone who sees the post is in principle supposed to see the list of the actors who liked it.<br>
(consistency isn’t that great on the existing fediverse but I’ve improved it on my side a bit by LD-signing the likes and forwarding them to any instance that might have the post)</li>
<li>I implement Facebook-style walls and currently outboxes contain wall posts as well — these are activities made by actors other than the owner of the outbox. Is this okay? Is this not okay? Should I create a separate collection instead under <code>collections</code>? Is there an even better way?</li>
<li>Suppose an implementation has photo albums in addition to posts, as separate entities visible in the profiles of its actors in the UI. When an actor uploads a photo to their album, this produces an <code>Add{Photo}</code> or <code>Create{Photo}</code> activity. Should these activities be part of their outbox? Should these activities be part of <em>any</em> collection, or it’s enough to expose a collection of photo albums each of which then contains a collection of photos, each of which then contains collections of tags and comments and so on?</li>
<li>When a member of a public group does something, anything, that needs to be known by all members of the group in order to keep their local states in sync, does that activity go into the group’s outbox? Or maybe it doesn’t the way it is, maybe it makes sense to wrap it into another activity of a purpose-made type that’s on behalf of the group actor? See also <a href="../groups-implementation/591/56.html" class="inline-onebox">Groups implementation</a> for a lengthy discussion on the subject.</li>
</ul>
        </div>

        <meta itemprop='headline' content='What is an outbox, really? What should be there? What should not?'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/koehn.html'><span itemprop='name'>koehn</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="814.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-07-24T13:23:20Z' class='post-time'>
                July 24, 2020,  1:23pm
              </time>
              <meta itemprop='dateModified' content='2020-07-24T13:23:20Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The outbox my server produces contains literally all activities from the user addressed publicly, without regard to their type.</p>
<p>WRT a wall, I suppose you could include activities from other users there if you chose to; it’s a novel case. I think I would create a <code>wall</code> collection instead.</p>
<p>WRT photos, see above. If the add activity is addressed publicly, then I’d put it into the outbox. If you choose not to address it publicly, then I wouldn’t.</p>
<p>WRT groups, I plan to put items into the group outbox that will help new members synchronize to the group’s current state.</p>
        </div>

        <meta itemprop='headline' content='What is an outbox, really? What should be there? What should not?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/trwnh.html'><span itemprop='name'>trwnh</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="814.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-08-09T17:51:21Z' class='post-time'>
                August 9, 2020,  5:51pm
              </time>
              <meta itemprop='dateModified' content='2020-08-09T17:51:21Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The outbox contains whatever the implementation decides it should include, and upon request, the implementation should serve only the activities that the requester is authorized to view. This usually means anything addressed to <code>as:Public</code>, but you still have the freedom to decide what is relevant to publish here – posts, comments, likes, etc. are all up to each implementation to interpret.</p>
<p>For example, Mastodon does not publish Like activities, because Likes are private to the person who made them and the person who received them. Pleroma sends Like activities to as:Public, but does not publish them via outbox. These two implementations have decided that outbox should represent “posts made by the user” – note that activities can still be sent without a persistent presence in the outbox. In email, a direct message is removed from the outbox as soon as it is sent; in ActivityPub, keeping an activity in the outbox implies some sort of persistence or continued relevance.</p>
<p>More generally, though, I’d say that the outbox should represent the “activity stream”, i.e., whatever you think should be visible in a feed. If you publish Like activities, this can be interpreted by implementations as either showing your profile next to “who liked this”, or it could even mean “x liked this” entries, a la Facebook.</p>
<p>With this kind of thinking, I think your other questions become a bit clearer. Add/Create Photo should be in the outbox if you think that information is relevant for an activity stream, e.g. “x added 12 photos to an album”. It’s a little interesting because there’s a difference in what an activity represents for C2S vs. S2S – perhaps a changelog of sorts is more relevant to clients, which can store these activities in a collection by their own logic. But perhaps you want to expose this information on the “profile” as well.</p>
<hr>
<p>Walls and groups are a bit of a branch in the discussion because that is a question of whether the outbox should contain an actor’s own activities or other actors’ activities. I think you should be using inbox forwarding for this. It is then up to other implementations to “validate” this potentially cross-domain activity. I think some current implementations validate that the activity is <code>attributedTo</code> the same actor, but don’t quote me on this.</p>
        </div>

        <meta itemprop='headline' content='What is an outbox, really? What should be there? What should not?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
