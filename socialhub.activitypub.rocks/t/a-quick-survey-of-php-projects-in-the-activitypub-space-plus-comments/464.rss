<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>A quick survey of PHP projects in the ActivityPub space, plus comments</title>
    <link>https://socialhub.activitypub.rocks/t/a-quick-survey-of-php-projects-in-the-activitypub-space-plus-comments/464</link>
    <description>As part of working towards ActivityPub integration for a couple of PHP projects I&#39;ve been looking into PHP ActivityPub-related projects and recently posted a summary in this issue:

https://github.com/philippejadin/agorakit/issues/271

As a new user on this SocialHub instance I can&#39;t (yet) repost the info here (too many links) but in that issue see the section &quot;Potential models and building blocks&quot; where I&#39;ve listed the various efforts I found.

The other PHP project I&#39;m contributing to is a module for Drupal:

https://github.com/swentel/activitypub/issues

Some of my early impressions:

* There are various projects that are drafts towards general-use PHP packages for ActivityPub integration, including pterotype-project/activitypub-php, landrok/activitypub, dansup/php-activitypub, patbator/activitystreams, and assemblee-virtuelle/ActivityPubBundle (this last one for Synfony 4).
* Of these, landrok/activitypub is probably the farthest along in terms of general applicability and comes with some great documentation. That said, it still has a ways to go and - inevitably - includes some architectural decisions that may conflict with those of specific ActivityPub applications.
* Pixelfed is far and away the furthest developed specific implementation that I found and provides a solid example to work from in terms of grokking what&#39;s involved and how the different pieces interact, including ones that are needed but not in the ActivityPub spec--webfinger, nodeinfo.

As usual, in theory we&#39;d all stand to benefit from standardising on a set of packages we could collaborate on rather than maintaining a different implementation for each application. But there are challenges in getting there. What level of abstraction is enough to achieve broad applicability but not so much that it conflicts with specific architectures?

As a fairly arbitrary example, Drupal uses Symfony&#39;s serializer component and accompanying normalizers/denormalizers. So in Drupal this is the API we would probably use for transforming ActivityPub objects to and from Drupal entities. But other implementations naturally will have their own distinct approaches.

Personally, some of my first steps will be:

* Study Pixelfed--well worth the time.
* See if I can directly use at least parts of, and/or contribute to, landrok/activitypub and delirehberi/webfinger.

Other tips and ideas very welcome!</description>
    
    <lastBuildDate>Sun, 12 Jan 2020 18:03:23 +0000</lastBuildDate>
    <category>PHP</category>
    <atom:link href="https://socialhub.activitypub.rocks/t/a-quick-survey-of-php-projects-in-the-activitypub-space-plus-comments/464.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>A quick survey of PHP projects in the ActivityPub space, plus comments</title>
        <dc:creator><![CDATA[nedjo]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="/u/ekes">@ekes</a> Wow, great to know you’re actively working in this space and to hear your insights and experience. And thanks for your extensive comments in the <a href="https://github.com/swentel/activitypub/issues" rel="nofollow noopener">ActivityPub for Drupal</a> issue queue. See you there!</p>
          <p><a href="https://socialhub.activitypub.rocks/t/a-quick-survey-of-php-projects-in-the-activitypub-space-plus-comments/464/3">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/a-quick-survey-of-php-projects-in-the-activitypub-space-plus-comments/464/3</link>
        <pubDate>Sun, 12 Jan 2020 18:03:23 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-464-3</guid>
        <source url="https://socialhub.activitypub.rocks/t/a-quick-survey-of-php-projects-in-the-activitypub-space-plus-comments/464.rss">A quick survey of PHP projects in the ActivityPub space, plus comments</source>
      </item>
      <item>
        <title>A quick survey of PHP projects in the ActivityPub space, plus comments</title>
        <dc:creator><![CDATA[ekes]]></dc:creator>
        <description><![CDATA[
            <p>Woot! More Drupal. I hadn’t got an watch on for the github project so hadn’t noticed you posting there. I’ll look through the issues added. But here I’ll just write my experiences implementing ActivityPub in Drupal 7 and what my thoughts were for doing it in Drupal 8.<br>
I also want to be implementing it for D8, certainly in the first instance to push and pull from the D7 site. These are existing sites presently sharing data via a custom API, but can be better in the fediverse and hence communicate with the likes of Mobilizon and Friendica as well.</p>
<p>Drupal itself should handle serialization, routing incoming and making outgoing http requests. So most of the libraries have redundant code. In addition Drupal has baked in rdf and flexible field mapping so you can, and want to, make most of the objects (that will in ActivityPub be represented in the json-ld) with Drupal’s own entity/field system rather than duplicating (and worse constraining) them in library PHP code. The challenge this flexible approach leaves is the best way to map fields/properties.</p>
<p>Libraries are certainly helpful for signing, and signature verification. For Drupal 7 I just opted for dgwynne/php-http-signature. But for Drupal 8 99designs/http-signatures-php looks much more promising.</p>
<p>Before continuing further into the gritty detail of Drupal 7 implementation, the other set of code I’ve found helpful, in addition, or possibly more so, than pixelfed, for understanding all this is that for friendica.</p>
<p>Now my details from doing the Drupal 7. I’ve so far opted to create additional entities for ActivityPub Actor, Activity and Relation. They act mainly as glue to Drupal entities (with Entity References). So when represented in Activity Vocabulary they provide a wrapper and required additional data, an then the fields of the native Drupal entity, along with the namespace/s and properties. Let me explain:</p>
<p>Starting with the actor. It felt like it would be even nicer to directly use ‘user’ or ‘group’ entities as the ActivityPub actor. However as there needs to be a unique constrained ‘webfinger’ name, and a public and private key for the signature, I opted to make an actor entity with these fields and an entity reference to the Drupal entity.</p>
<p>The activitypub actor module then also provides the route, and the representation of the actor, in Activity Vocabulary, and the inbox and outbox of the actors, and intends to implement followers and would do following, but it’s not needed for my use case at the moment.</p>
<p>There is a separate webfinger module that does little other than provide the route and a hook which the activitypub actor module implements. It does the lookup on the machine name of the actor, which is also used as the webfinger name, and returns the appropriate data - key, inbox outbox…</p>
<p>To separate out the actors and allow for different mappings I make a different entity type for Actor Type <a href="https://www.w3.org/TR/activitystreams-vocabulary/#actor-types" rel="nofollow noopener">https://www.w3.org/TR/activitystreams-vocabulary/#actor-types</a> In this implementation just ‘Person’ &lt;-&gt; ‘user’ and ‘Group’ &lt;-&gt; (organic group) ‘node’.</p>
<p>The Activity Entity represents the <a href="https://www.w3.org/TR/activitystreams-vocabulary/#activity-types" rel="nofollow noopener">https://www.w3.org/TR/activitystreams-vocabulary/#activity-types</a> , bundles or types for each actually implemented. So when you ‘Create’ a node that is to be announced in the fediverse it makes a Activity Entity of bundle ‘Create’ with references at a minimum with fields ‘actor’ and ‘object’, but could have more (fieldable).</p>
<p>Depending on the entity referenced there is a mapping to Activity Vocabulary (actually plus other name spaces as discussed here <a href="https://socialhub.activitypub.rocks/t/how-to-represent-places-in-an-event/413/8">How to represent places in an event</a>. So basically everything in the <code>object:</code> section there is provided by the Event Node itself and everything wrapping it is provided by the Activity entity.</p>
<p>The Outbox is then populated by a query of Activity entities - queried by reference to Actor.<br>
I’m yet to get there (or need to implement this), but then, access control needs then also to be delegated to a (plugin?) that controls that ‘type’ of actor, and referenced entities. This works for the different 'Audience’s. Bonus of entity references here, the Action can remain with an reference to the removed entity. The delete action can use the entity reference still - only returning the entity reference uri; old actions referencing deleted entities return a Tombstone.</p>
<p>Finally the relationship entity is there for the actors ‘Follow’ and ‘Followers’. Again I initially thought this could be a multiple field on the actor, but it wants to have an acceptation workflow and can store, cache, additional fields - image, nick etc, about the remote following/follower. I’m coding away here still.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/a-quick-survey-of-php-projects-in-the-activitypub-space-plus-comments/464/2">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/a-quick-survey-of-php-projects-in-the-activitypub-space-plus-comments/464/2</link>
        <pubDate>Sat, 11 Jan 2020 10:35:04 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-464-2</guid>
        <source url="https://socialhub.activitypub.rocks/t/a-quick-survey-of-php-projects-in-the-activitypub-space-plus-comments/464.rss">A quick survey of PHP projects in the ActivityPub space, plus comments</source>
      </item>
      <item>
        <title>A quick survey of PHP projects in the ActivityPub space, plus comments</title>
        <dc:creator><![CDATA[nedjo]]></dc:creator>
        <description><![CDATA[
            <p>As part of working towards ActivityPub integration for a couple of PHP projects I’ve been looking into PHP ActivityPub-related projects and recently posted a summary in this issue:</p>
<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/philippejadin/agorakit/issues/271" target="_blank" rel="nofollow noopener">github.com/philippejadin/agorakit</a>
  </header>
  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/philippejadin/agorakit/issues/271" target="_blank" rel="nofollow noopener">Activitypub/Fediverse integration</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2019-12-11" data-time="17:38:45" data-timezone="UTC">05:38PM - 11 Dec 19 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/nedjo" target="_blank" rel="nofollow noopener">
          <img alt="nedjo" src="https://socialhub.activitypub.rocks/uploads/default/original/1X/b584186eadd0ac60c2ab0dd0d9899fa0d35633ac.png" class="onebox-avatar-inline" width="20" height="20">
          nedjo
        </a>
      </div>
    </div>
  </div>
</div>

<div class="github-row">
  <p class="github-content">Agorakit seems like a great candidate for integration with the Fediverse through ActivityPub support. This issue outlines what such integration might...</p>
</div>

<div class="labels">
    <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">enhancement</span>
    <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">feature</span>
    <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">help wanted</span>
    <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">need more info</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>As a new user on this SocialHub instance I can’t (yet) repost the info here (too many links) but in that issue see the section “Potential models and building blocks” where I’ve listed the various efforts I found.</p>
<p>The other PHP project I’m contributing to is a module for Drupal:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://github.githubassets.com/favicon.ico" class="site-icon" width="32" height="32">
      <a href="https://github.com/swentel/activitypub/issues" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="https://socialhub.activitypub.rocks/uploads/default/original/1X/d9cb67e4ad8a7c3ea911f69e73f6c1807bcee536.jpeg" class="thumbnail onebox-avatar" width="400" height="400">

<h3><a href="https://github.com/swentel/activitypub/issues" target="_blank" rel="nofollow noopener">swentel/activitypub</a></h3>

<p>ActivityPub for Drupal. Contribute to swentel/activitypub development by creating an account on GitHub.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Some of my early impressions:</p>
<ul>
<li>There are various projects that are drafts towards general-use PHP packages for ActivityPub integration, including pterotype-project/activitypub-php, landrok/activitypub, dansup/php-activitypub, patbator/activitystreams, and assemblee-virtuelle/ActivityPubBundle (this last one for Synfony 4).</li>
<li>Of these, landrok/activitypub is probably the farthest along in terms of general applicability and comes with some great documentation. That said, it still has a ways to go and - inevitably - includes some architectural decisions that may conflict with those of specific ActivityPub applications.</li>
<li>Pixelfed is far and away the furthest developed specific implementation that I found and provides a solid example to work from in terms of grokking what’s involved and how the different pieces interact, including ones that are needed but not in the ActivityPub spec–webfinger, nodeinfo.</li>
</ul>
<p>As usual, in theory we’d all stand to benefit from standardising on a set of packages we could collaborate on rather than maintaining a different implementation for each application. But there are challenges in getting there. What level of abstraction is enough to achieve broad applicability but not so much that it conflicts with specific architectures?</p>
<p>As a fairly arbitrary example, Drupal uses Symfony’s serializer component and accompanying normalizers/denormalizers. So in Drupal this is the API we would probably use for transforming ActivityPub objects to and from Drupal entities. But other implementations naturally will have their own distinct approaches.</p>
<p>Personally, some of my first steps will be:</p>
<ul>
<li>Study Pixelfed–well worth the time.</li>
<li>See if I can directly use at least parts of, and/or contribute to, landrok/activitypub and delirehberi/webfinger.</li>
</ul>
<p>Other tips and ideas very welcome!</p>
          <p><a href="https://socialhub.activitypub.rocks/t/a-quick-survey-of-php-projects-in-the-activitypub-space-plus-comments/464/1">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/a-quick-survey-of-php-projects-in-the-activitypub-space-plus-comments/464/1</link>
        <pubDate>Fri, 10 Jan 2020 01:24:48 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-464-1</guid>
        <source url="https://socialhub.activitypub.rocks/t/a-quick-survey-of-php-projects-in-the-activitypub-space-plus-comments/464.rss">A quick survey of PHP projects in the ActivityPub space, plus comments</source>
      </item>
  </channel>
</rss>
