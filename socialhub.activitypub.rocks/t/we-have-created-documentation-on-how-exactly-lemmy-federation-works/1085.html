<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>We have created documentation on how exactly Lemmy federation works - Lemmy - SocialHub</title>
    <meta name="description" content="This first document gives a high-level overview, without being too technical. It is roughly based on the federation.md proposal. 


We also have a separate document that describes the exact JSON format used by Lemmy, and&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.0.beta2 - https://github.com/discourse/discourse version c39ab6c0ae3803b6a62501954ae40adb6b73d580">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/b7023860b3d7df97ea10ba3c7ab11cb046a77c7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1085.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://socialhub.activitypub.rocks","potentialAction":{"@type":"SearchAction","target":"https://socialhub.activitypub.rocks/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="SocialHub Search">

      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop" />
      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_5_969dd27459c19a0b7620746a3d179b86ef033d7a.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_3_f50bf2f225326f482d56e65e93f1f047d48417a9.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_8_e3f93470fef56ec97b63f77e16779e328baab8ea.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="8"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_4_8d506fd22b761a15044193a6d4ebda5f6bde2498.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;We have created documentation on how exactly Lemmy federation works&#39;" href="1085.rss" />
    <meta property="og:site_name" content="SocialHub" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:url" content="https://socialhub.activitypub.rocks/t/we-have-created-documentation-on-how-exactly-lemmy-federation-works/1085" />
<meta name="twitter:url" content="https://socialhub.activitypub.rocks/t/we-have-created-documentation-on-how-exactly-lemmy-federation-works/1085" />
<meta property="og:title" content="We have created documentation on how exactly Lemmy federation works" />
<meta name="twitter:title" content="We have created documentation on how exactly Lemmy federation works" />
<meta property="og:description" content="This first document gives a high-level overview, without being too technical. It is roughly based on the federation.md proposal.    We also have a separate document that describes the exact JSON format used by Lemmy, and how the various fields are interpreted.    The links go to our test instance (which is already federating). It will also be available from dev.lemmy.ml once we deploy the next version.  If anything is unclear or missing from those docs, please comment here and we will add it." />
<meta name="twitter:description" content="This first document gives a high-level overview, without being too technical. It is roughly based on the federation.md proposal.    We also have a separate document that describes the exact JSON format used by Lemmy, and how the various fields are interpreted.    The links go to our test instance (which is already federating). It will also be available from dev.lemmy.ml once we deploy the next version.  If anything is unclear or missing from those docs, please comment here and we will add it." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="9 ❤" />
<meta property="article:published_time" content="2020-10-14T11:43:52+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
<script src="https://socialhub.activitypub.rocks/theme-javascripts/3a68d4ddcab78e923b7c4169708a8f1deb79df66.js?__ws=socialhub.activitypub.rocks"></script>
    <header>
      <a href="https://socialhub.activitypub.rocks/">
          <img src="../../uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png" alt="SocialHub" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1085.html">We have created documentation on how exactly Lemmy federation works</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/software/index.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Software</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/software/lemmy/46.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #0088CC'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Lemmy</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/nutomic.html'><span itemprop='name'>nutomic</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1085.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-10-14T11:43:52Z'>
              <time itemprop='dateModified' datetime='2020-10-14T11:44:18Z' class='post-time'>
                October 14, 2020, 11:44am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This first document gives a high-level overview, without being too technical. It is roughly based on the <a href="../documenting-federation-behavior-in-a-semi-standard-way/453.html">federation.md proposal</a>.</p>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      
      <a href="https://enterprise.lemmy.ml/docs/contributing_federation_overview.html" target="_blank" rel="noopener nofollow ugc">enterprise.lemmy.ml</a>
  </header>
  <article class="onebox-body">
    <img src="1085.html" class="thumbnail" width="" height="">

<h3><a href="https://enterprise.lemmy.ml/docs/contributing_federation_overview.html" target="_blank" rel="noopener nofollow ugc">Federation Overview - Lemmy Documentation</a></h3>



  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>We also have a separate document that describes the exact JSON format used by Lemmy, and how the various fields are interpreted.</p>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      
      <a href="https://enterprise.lemmy.ml/docs/contributing_apub_api_outline.html" target="_blank" rel="noopener nofollow ugc">enterprise.lemmy.ml</a>
  </header>
  <article class="onebox-body">
    <img src="1085.html" class="thumbnail" width="" height="">

<h3><a href="https://enterprise.lemmy.ml/docs/contributing_apub_api_outline.html" target="_blank" rel="noopener nofollow ugc">ActivityPub API Outline - Lemmy Documentation</a></h3>



  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>The links go to our test instance (which is already federating). It will also be available from dev.lemmy.ml once we deploy the next version.</p>
<p>If anything is unclear or missing from those docs, please comment here and we will add it.</p>
        </div>

        <meta itemprop='headline' content='We have created documentation on how exactly Lemmy federation works'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="6" />
           <span class='post-likes'>6 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/misaka4e21.html'><span itemprop='name'>misaka4e21</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1085.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-16T14:35:45Z' class='post-time'>
                October 16, 2020,  2:35pm
              </time>
              <meta itemprop='dateModified' content='2020-10-16T14:35:45Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>In the second documentation given, it is said that:</p>
<div class="md-table">
<table>
<thead>
<tr>
<th>Field Name</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>yes</td>
<td>Name of the actor</td>
</tr>
<tr>
<td>preferredUsername</td>
<td>no</td>
<td>Displayname</td>
</tr>
</tbody>
</table>
</div><pre><code class="lang-json">// …
    "name": "riker",
    "preferredUsername": "Jean-Luc Picard",
// …
</code></pre>
<p>It seems that Lemmy uses <code>preferredUsername</code> field for display names and <code>name</code> for usernames, which is in contrast to the <a href="https://www.w3.org/TR/activitypub/#actor-objects" rel="noopener nofollow ugc">ActivityPub spec</a> and fediverse implementations such as Mastodon:</p>
<pre><code class="lang-json">// …
 "name": "Alyssa P. Hacker",
 "preferredUsername": "alyssa",
// …
</code></pre>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      <a href="https://www.w3.org/TR/activitypub/#Overview" target="_blank" rel="noopener nofollow ugc">w3.org</a>
  </header>
  <article class="onebox-body">
    <img src="1085.html" class="thumbnail" width="" height="">

<h3><a href="https://www.w3.org/TR/activitypub/#Overview" target="_blank" rel="noopener nofollow ugc">ActivityPub</a></h3>



  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/tootsuite/mastodon/blob/fb5f3be18f50eb5657479196e29d13a905c43ac8/app/serializers/activitypub/actor_serializer.rb#L93" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/tootsuite/mastodon/blob/fb5f3be18f50eb5657479196e29d13a905c43ac8/app/serializers/activitypub/actor_serializer.rb#L93" target="_blank" rel="noopener nofollow ugc">tootsuite/mastodon/blob/fb5f3be18f50eb5657479196e29d13a905c43ac8/app/serializers/activitypub/actor_serializer.rb#L93</a></h4>
<pre class="onebox"><code class="lang-rb"><ol class="start lines" start="83" style="counter-reset: li-counter 82 ;">
<li>
</li><li>def featured_tags</li>
<li>  account_collection_url(object, :tags)</li>
<li>end</li>
<li>
</li><li>def endpoints</li>
<li>  object</li>
<li>end</li>
<li>
</li><li>def preferred_username</li>
<li class="selected">  object.username</li>
<li>end</li>
<li>
</li><li>def name</li>
<li>  object.display_name</li>
<li>end</li>
<li>
</li><li>def summary</li>
<li>  Formatter.instance.simplified_format(object)</li>
<li>end</li>
<li>
</li></ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Would it improve compatibility to follow the practice, or is it an intended design?</p>
        </div>

        <meta itemprop='headline' content='We have created documentation on how exactly Lemmy federation works'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/nutomic.html'><span itemprop='name'>nutomic</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1085.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-16T20:15:50Z' class='post-time'>
                October 16, 2020,  8:15pm
              </time>
              <meta itemprop='dateModified' content='2020-10-16T20:15:50Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks a lot for noticing this and pointing it out! It would have been a real problem if we found out about this after releasing federation.</p>
<p>That said, who thought this was a good idea? Its completely counterintuitive.</p>
        </div>

        <meta itemprop='headline' content='We have created documentation on how exactly Lemmy federation works'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cjs.html'><span itemprop='name'>cjs</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1085.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-10-16T20:59:32Z'>
              <time itemprop='dateModified' datetime='2020-10-16T21:00:43Z' class='post-time'>
                October 16, 2020,  9:00pm
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>It seems <a href="https://www.w3.org/TR/activitystreams-vocabulary/#dfn-name" rel="noopener nofollow ugc">ActivityStreams</a> came first with <code>name</code>, and ActivityPub could only add a new property on top of that. (Especially since <code>name</code> is one of the few special properties that can also be a natural language map, and it seems <code>preferredUsername</code> is not)</p>
<p>Also, in our brief talks on Fedi, I know you do not have a goal to become ActivityPub compliant at this time. I was wondering if it is something being built towards on the long-term roadmap, even if not a priority anytime soon?</p>
        </div>

        <meta itemprop='headline' content='We have created documentation on how exactly Lemmy federation works'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="3" />
           <span class='post-likes'>3 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/nutomic.html'><span itemprop='name'>nutomic</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1085.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-10-16T22:28:22Z'>
              <time itemprop='dateModified' datetime='2020-10-16T22:29:11Z' class='post-time'>
                October 16, 2020, 10:29pm
              </time>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="cjs" data-post="4" data-topic="1085">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/cjs/40/35_2.png" class="avatar"> cjs:</div>
<blockquote>
<p>Also, in our brief talks on Fedi, I know you do not have a goal to become ActivityPub compliant at this time. I was wondering if it is something being built towards on the long-term roadmap, even if not a priority anytime soon?</p>
</blockquote>
</aside>
<p>So far our goal has been to enable federation between Lemmy instances, and we almost finished with that (its a matter of weeks before we enable allowlist based federation on our main instance). Regarding ActivityPub compliance, we didnt expect that it would be so much additional work, so we didnt think to turn it into a milestone for our NLnet funding. But we definitely want that and I think we can get it done in parallel within the next few months.</p>
        </div>

        <meta itemprop='headline' content='We have created documentation on how exactly Lemmy federation works'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
