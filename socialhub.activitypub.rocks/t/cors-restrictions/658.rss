<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>CORS restrictions</title>
    <link>https://socialhub.activitypub.rocks/t/cors-restrictions/658</link>
    <description>I&#39;m noticing that many servers (Mastodon, Friendica, et al) restrict access via CORS that effectively prevents C2S web applications from resolving ActivityPub objects. For example, if a client being served from any domain that is not `example.com` receives the following from the user&#39;s `inbox` Collection:

```
{
  &quot;id&quot;: &quot;https://example.com/123&quot;,
  &quot;type&quot;: &quot;Note&quot;,
  &quot;content&quot;: &quot;Hello, world!&quot;,
  &quot;attributedTo&quot;: &quot;https://example.com/actor/456&quot;
}
```
A web-based client cannot display any information about the actor to who the note is attributed beyond their ID, unless the CORS headers for `https://example.com/actor/456` allows cross-origin `GET` requests. Without those permissions, C2S applications cannot be written using browsers, because browsers will prevent significant functionality. 

As a workaround I&#39;m using an API on my server application that takes an ActivityPub ID and performs a GET instruction on the ID, bypassing CORS requirements. This degrades performance unneccisarily, and provides a gaping hole through the CORS requirement in the first place. 

ActivityPub servers should serve `GET` requests to their object endpoints by all comers.</description>
    
    <lastBuildDate>Thu, 28 May 2020 21:32:53 +0000</lastBuildDate>
    <category>Client to Server</category>
    <atom:link href="https://socialhub.activitypub.rocks/t/cors-restrictions/658.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>CORS restrictions</title>
        <dc:creator><![CDATA[koehn]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>A browser-based C2S client is fundamentally flawed</p>
</blockquote>
<p>Though you state it as a fact, that’s actually an opinion; any non-browser client would have the same “fundamental flaws” but are not similarly prevented from exposing just as much of the user’s information. Why hamstring only browser-based clients?</p>
          <p><a href="https://socialhub.activitypub.rocks/t/cors-restrictions/658/9">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/cors-restrictions/658/9</link>
        <pubDate>Thu, 28 May 2020 21:32:53 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-658-9</guid>
        <source url="https://socialhub.activitypub.rocks/t/cors-restrictions/658.rss">CORS restrictions</source>
      </item>
      <item>
        <title>CORS restrictions</title>
        <dc:creator><![CDATA[melody]]></dc:creator>
        <description><![CDATA[
            <p>A browser-based C2S client is fundamentally flawed - the spec should not demand that implementations relax their security standards to enable you to expose your users to unnecessary risk.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/cors-restrictions/658/8">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/cors-restrictions/658/8</link>
        <pubDate>Thu, 28 May 2020 21:15:21 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-658-8</guid>
        <source url="https://socialhub.activitypub.rocks/t/cors-restrictions/658.rss">CORS restrictions</source>
      </item>
      <item>
        <title>CORS restrictions</title>
        <dc:creator><![CDATA[koehn]]></dc:creator>
        <description><![CDATA[
            <p>Roughly translated: “we know better than you, so conform to the lowest standard of interoperability.” Not a very effective practice.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/cors-restrictions/658/7">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/cors-restrictions/658/7</link>
        <pubDate>Thu, 28 May 2020 16:24:24 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-658-7</guid>
        <source url="https://socialhub.activitypub.rocks/t/cors-restrictions/658.rss">CORS restrictions</source>
      </item>
      <item>
        <title>CORS restrictions</title>
        <dc:creator><![CDATA[melody]]></dc:creator>
        <description><![CDATA[
            <p>Server implementations should not be forced into being complicit in your poor privacy practices, use the proxy.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/cors-restrictions/658/6">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/cors-restrictions/658/6</link>
        <pubDate>Thu, 28 May 2020 15:48:24 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-658-6</guid>
        <source url="https://socialhub.activitypub.rocks/t/cors-restrictions/658.rss">CORS restrictions</source>
      </item>
      <item>
        <title>CORS restrictions</title>
        <dc:creator><![CDATA[koehn]]></dc:creator>
        <description><![CDATA[
            <aside class="quote group-mastodon" data-username="nightpool" data-post="2" data-topic="658">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>IMO, a trusted proxy should be a <em>requirement</em> for implementing a privacy-preserving C2S client.</p>
</blockquote>
</aside>
<p>A last aside: I think it’s perfectly acceptable for people to want a trusted proxy if they feel it’s valuable. What I’m arguing is the possibility that others might not, and that server implementations support both choices.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/cors-restrictions/658/5">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/cors-restrictions/658/5</link>
        <pubDate>Thu, 07 May 2020 13:03:53 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-658-5</guid>
        <source url="https://socialhub.activitypub.rocks/t/cors-restrictions/658.rss">CORS restrictions</source>
      </item>
      <item>
        <title>CORS restrictions</title>
        <dc:creator><![CDATA[jauntywunderkind]]></dc:creator>
        <description><![CDATA[
            <p>I want to share what I think is the canonical guidance on CORS in general:</p>
<aside class="quote no-group">
<blockquote>
<p>PSA: It’s safe to put “Access-Control-Allow-Origin: *” on any response, <em>unless</em> that response’s data is ‘secured’ by something other than cookies, basic auth, or TLS client certificates.</p>
</blockquote>
</aside>
<aside class="onebox twitterstatus">
  <header class="source">
      <a href="https://mobile.twitter.com/jaffathecake/status/1222802740243566593" target="_blank" rel="nofollow noopener">mobile.twitter.com</a>
  </header>
  <article class="onebox-body">
    

<h4><a href="https://mobile.twitter.com/jaffathecake/status/1222802740243566593" target="_blank" rel="nofollow noopener">Jake Archibald (jaffathecake)</a></h4>

<div class="tweet"> </div>

<div class="date">
  <a href="https://mobile.twitter.com/jaffathecake/status/1222802740243566593" target="_blank" rel="nofollow noopener">00:17 - 28. Jan. 2020</a>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>In my opinion, allowing cross origin access to your host is a massively socially conscious improvement to your origin. I for one would greatly appreciate it if more activitypub systems would allow CORS.</p>
<p>It’s important to me to think of activitypub not just as it’s own protocol, but as a part of the wider web. Allowing that web to be weaved among many hosts will be a healthy, cross-connecting thing for the web and for activitypub.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/cors-restrictions/658/4">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/cors-restrictions/658/4</link>
        <pubDate>Wed, 06 May 2020 17:40:45 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-658-4</guid>
        <source url="https://socialhub.activitypub.rocks/t/cors-restrictions/658.rss">CORS restrictions</source>
      </item>
      <item>
        <title>CORS restrictions</title>
        <dc:creator><![CDATA[koehn]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>Degrades performance how? Implementing a trusted proxy allows you to implement caching, prefetching, and other types of performance improvements that are impossible with each client making it’s own independent request.</p>
</blockquote>
<p>Cache invalidation is one of the two hard things in computer science, the others being naming things and off-by-one errors. Introducing another layer of caching on top of the ones browsers already have is counter-productive: many objects require authentication for access, in which case you cannot share them between users. You’re also introducing additional latency on top of every request. It’s another service for every server to implement, and to secure so that people cannot turn create an account and get an anonymous proxy with which to access the web (how would you secure such a service so that it cannot access anything other than ActivityPub endpoints?). And every C2S client needs to know how to discover it.</p>
<blockquote>
<p>As a user, i would find it very surprising if viewing a post from a user or even just viewing my home feed exposed my IP address to untrusted remote servers.</p>
</blockquote>
<p>You’re in for a major surprise then: browsers already pull resources of all kinds from all over the web; from CDNs and from static services like S3. There are solutions to these problems already; VPNs, request headers, preventing third-party cookies. None of those problems will get any better for proxying requests, and not proxying requests won’t make the current situation any worse than it already is.</p>
<p>Last, many ActivityPub objects require authentication to pull the request, so the receiving server will likely know the identity of the user making the request. Their IP address is of minimal value at that point, but if you want to hide your IP address, you should be using a VPN or the <code>&lt;img&gt;</code> tag is going to give you away anyhow. There is nothing preventing a server from adding a unique identifier onto the end of each bit of media on any object they serve up, e.g., <code>https://example.com/my-image.jpeg?id=123456</code>.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/cors-restrictions/658/3">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/cors-restrictions/658/3</link>
        <pubDate>Tue, 05 May 2020 19:04:29 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-658-3</guid>
        <source url="https://socialhub.activitypub.rocks/t/cors-restrictions/658.rss">CORS restrictions</source>
      </item>
      <item>
        <title>CORS restrictions</title>
        <dc:creator><![CDATA[nightpool]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="koehn" data-post="1" data-topic="658">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/koehn/40/311_2.png" class="avatar"> koehn:</div>
<blockquote>
<p>This degrades performance unneccisarily, and provides a gaping hole through the CORS requirement in the first place</p>
</blockquote>
</aside>
<p>Degrades performance how? Implementing a trusted proxy allows you to implement caching, prefetching, and other types of performance improvements that are impossible with each client making it’s own independent request. This isn’t a “gaping hole” in CORS requirements, it’s CORS working as designed. CORS is a browser-based extension of the same-origin requirement, and it’s designed to restrict the ways in which a site can use the browser’s credentials and the client’s network to request cross-origin websites. Since the proxied requests aren’t using the cross-origin credentials, and they go through the proxy’s network, there’s no CORS concern.</p>
<p>IMO, a trusted proxy should be a <em>requirement</em> for implementing a privacy-preserving C2S client. As a user, i would find it very surprising if viewing a post from a user or even just viewing my home feed exposed my IP address to untrusted remote servers. Personally, I would prefer we add language in the opposite direction: Clients <em>should</em> proxy requests to remote origins through a trusted proxy server, to avoid disclosing the user’s IP address</p>
          <p><a href="https://socialhub.activitypub.rocks/t/cors-restrictions/658/2">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/cors-restrictions/658/2</link>
        <pubDate>Tue, 05 May 2020 18:25:33 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-658-2</guid>
        <source url="https://socialhub.activitypub.rocks/t/cors-restrictions/658.rss">CORS restrictions</source>
      </item>
      <item>
        <title>CORS restrictions</title>
        <dc:creator><![CDATA[koehn]]></dc:creator>
        <description><![CDATA[
            <p>I’m noticing that many servers (Mastodon, Friendica, et al) restrict access via CORS that effectively prevents C2S web applications from resolving ActivityPub objects. For example, if a client being served from any domain that is not <code>example.com</code> receives the following from the user’s <code>inbox</code> Collection:</p>
<pre><code class="lang-auto">{
  "id": "https://example.com/123",
  "type": "Note",
  "content": "Hello, world!",
  "attributedTo": "https://example.com/actor/456"
}
</code></pre>
<p>A web-based client cannot display any information about the actor to who the note is attributed beyond their ID, unless the CORS headers for <code>https://example.com/actor/456</code> allows cross-origin <code>GET</code> requests. Without those permissions, C2S applications cannot be written using browsers, because browsers will prevent significant functionality.</p>
<p>As a workaround I’m using an API on my server application that takes an ActivityPub ID and performs a GET instruction on the ID, bypassing CORS requirements. This degrades performance unneccisarily, and provides a gaping hole through the CORS requirement in the first place.</p>
<p>ActivityPub servers should serve <code>GET</code> requests to their object endpoints by all comers.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/cors-restrictions/658/1">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/cors-restrictions/658/1</link>
        <pubDate>Mon, 04 May 2020 15:16:55 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-658-1</guid>
        <source url="https://socialhub.activitypub.rocks/t/cors-restrictions/658.rss">CORS restrictions</source>
      </item>
  </channel>
</rss>
