<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>The Update Activity: More Than Caching - ActivityPub - SocialHub</title>
    <meta name="description" content="Being inspired by The Delete Activity And It’s Misconceptions, I’d like to write a bit on the topic of the Update Activity, and my experience with it on both the C2S and S2S sides. 
Following the cache model that kaniini&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.0.beta2 - https://github.com/discourse/discourse version c39ab6c0ae3803b6a62501954ae40adb6b73d580">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/b7023860b3d7df97ea10ba3c7ab11cb046a77c7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="260.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://socialhub.activitypub.rocks","potentialAction":{"@type":"SearchAction","target":"https://socialhub.activitypub.rocks/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="SocialHub Search">

      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop" />
      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_5_969dd27459c19a0b7620746a3d179b86ef033d7a.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_3_f50bf2f225326f482d56e65e93f1f047d48417a9.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_8_e3f93470fef56ec97b63f77e16779e328baab8ea.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="8"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_4_8d506fd22b761a15044193a6d4ebda5f6bde2498.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;The Update Activity: More Than Caching&#39;" href="https://socialhub.activitypub.rocks/t/the-update-activity-more-than-caching/260.rss" />
    <meta property="og:site_name" content="SocialHub" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:url" content="https://socialhub.activitypub.rocks/t/the-update-activity-more-than-caching/260" />
<meta name="twitter:url" content="https://socialhub.activitypub.rocks/t/the-update-activity-more-than-caching/260" />
<meta property="og:title" content="The Update Activity: More Than Caching" />
<meta name="twitter:title" content="The Update Activity: More Than Caching" />
<meta property="og:description" content="Being inspired by The Delete Activity And It’s Misconceptions, I’d like to write a bit on the topic of the Update Activity, and my experience with it on both the C2S and S2S sides.  Following the cache model that kaniini lays out in the article, the Update ActivityStreams type can be thought of as a cache-refetch signal to federated peers. As I will show later, this is not the only thing Update does: it also allows federated peers to have as detailed a historical system of record they want witho..." />
<meta name="twitter:description" content="Being inspired by The Delete Activity And It’s Misconceptions, I’d like to write a bit on the topic of the Update Activity, and my experience with it on both the C2S and S2S sides.  Following the cache model that kaniini lays out in the article, the Update ActivityStreams type can be thought of as a cache-refetch signal to federated peers. As I will show later, this is not the only thing Update does: it also allows federated peers to have as detailed a historical system of record they want witho..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="4 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="5 ❤" />
<meta property="article:published_time" content="2019-11-02T10:56:23+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
<script src="https://socialhub.activitypub.rocks/theme-javascripts/3a68d4ddcab78e923b7c4169708a8f1deb79df66.js?__ws=socialhub.activitypub.rocks"></script>
    <header>
      <a href="https://socialhub.activitypub.rocks/">
          <img src="../../uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png" alt="SocialHub" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="260.html">The Update Activity: More Than Caching</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/activitypub.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #0088CC'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>ActivityPub</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cjs.html'><span itemprop='name'>cjs</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-02T10:56:23Z' class='post-time'>
                November 2, 2019, 10:56am
              </time>
              <meta itemprop='dateModified' content='2019-11-02T10:56:23Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Being inspired by <a href="https://socialhub.activitypub.rocks/t/the-delete-activity-and-its-misconceptions/137">The Delete Activity And It’s Misconceptions</a>, I’d like to write a bit on the topic of the Update Activity, and my experience with it on both the C2S and S2S sides.</p>
<p>Following the cache model that kaniini lays out in the article, the Update ActivityStreams type can be thought of as a cache-refetch signal to federated peers. As I will show later, this is not the only thing Update does: it also allows federated peers to have as detailed a <em>historical system of record</em> they want without relying on the granularity of the originating peer.</p>
<h1>The Update Activity</h1>
<p>The specification, like all other Activity types, lays out an open-ended recommendation for how to handle Update activities. No one has to follow the guidance’s "should"s, but at that point a person is relying on a convention outside the specification and not the guidance of the specification. It means they won’t be complying with the only suggested guidance in the spec. What is that guidance? Why should we care what the specification lays out?</p>
<h2>Spec Guidance</h2>
<p>In the <strong>Client-To-Server</strong> part of the specification, it actually lays out both the C2S and S2S suggestions. This is an instance where only reading the ActivityPub spec piecemeal leads to pain points.</p>
<h3>C2S</h3>
<p>The C2S says that <em>only</em> the top-level fields inside of an <code>object</code> in an Update are wholly replaced in the Server’s model of the Activity. As an example, this Note</p>
<pre><code class="lang-auto">{
  "type": "Note",
  "content": "Hello",
  "image": {
    "url": "https://example.com/img1",
    "name": "picture of the word hello"
  }
}
</code></pre>
<p>Plus this C2S Update</p>
<pre><code class="lang-auto">{
  "type": "Update",
  "object": {
    "type": "Note",
    "image": "image": {
      "url": "https://example.com/img2"
    }
  }
}
</code></pre>
<p>Would yield a final Note as:</p>
<pre><code class="lang-auto">{
  "type": "Note",
  "content": "Hello",
  "image": {
    "url": "https://example.com/img2"
  }
}
</code></pre>
<p>A big bummer of this recommendation is its reliance on JSON’s <code>null</code> to delete top-level properties, as certain programming languages don’t handle JSON’s <code>null</code> well (<em>cough</em> Go).</p>
<h3>S2S</h3>
<p>On the other side, the ActivityPub specification recommends sending a federated peer the whole <code>object</code> so that they can replace their internal representation with it. Thus, after the C2S Update example above, if that server then federated it over S2S, it would federate:</p>
<pre><code class="lang-auto">{
  "type": "Update",
  "object": {
    "type": "Note",
    "content": "Hello",
    "image": {
      "url": "https://example.com/img2"
    }
  }
}
</code></pre>
<p>This is the cache-updating part of the Update activity.</p>
<p>However! This guidance also contains another property: edits are broken out into their smallest units and federated. The federating server doesn’t wait, accumulate N Updates activities, and send out 1 representing all N updates. This <em>may</em> be an important property for the Fediverse to preserve at large, so that federated peers may have an accurate record for edit history.</p>
<p>In this way, the guidance by the ActivityPub spec makes Update activities more than just the cache-validation/invalidation that Delete activities are. It also ensures that federated peers have the capability of building historical records as edits and changes occur over time, without needing to rely on the originating server to do that for them.</p>
<h2>Future</h2>
<p>I forked this off of the conversation <a href="https://socialhub.activitypub.rocks/t/notifying-remote-servers-that-they-should-refetch-an-object/259/8">Notifying remote servers that they should refetch an object</a> because the idea of cache-validation is well known, but I feel the property of <em>historical record</em> is not.</p>
<p>Complying with the ActivityPub spec’s suggestion has let the entire ecosystem let any other application (existing or not) be able to compute their own view of the edit history for an object, empowering users as much or as little as possible. It’s a property wholly implicit in the specification. So it comes down to us as a community whether it is a property we value and want to preserve when we build software that does not comply with this guidance.</p>
        </div>

        <meta itemprop='headline' content='The Update Activity: More Than Caching'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="https://socialhub.activitypub.rocks/t/notifying-remote-servers-that-they-should-refetch-an-object/259/7" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://socialhub.activitypub.rocks/t/notifying-remote-servers-that-they-should-refetch-an-object/259/7'>
                      <span itemprop='name'>Notifying remote servers that they should refetch an object</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/nightpool.html'><span itemprop='name'>nightpool</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-02T14:12:01Z' class='post-time'>
                November 2, 2019,  2:12pm
              </time>
              <meta itemprop='dateModified' content='2019-11-02T14:12:01Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="1" data-topic="260">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/cjs/40/35_2.png" class="avatar"> cjs:</div>
<blockquote>
<p>edits are broken out into their smallest units and federated</p>
</blockquote>
</aside>
<p>What part of the spec mentions this? I mean, I think it’s probably good practice to make your Updates quickly and meaningfully, but I would <em>not</em>, for example, suggest that a server break up one logical change that touches many properties into a series of many Update messages—that just sounds like a huge out-of-order/synchronization problem waiting to happen.</p>
        </div>

        <meta itemprop='headline' content='The Update Activity: More Than Caching'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/kaniini.html'><span itemprop='name'>kaniini</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-02T14:42:42Z' class='post-time'>
                November 2, 2019,  2:42pm
              </time>
              <meta itemprop='dateModified' content='2019-11-02T14:42:42Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I don’t see how maintaining object versioning would require an inlined object.  The way that JSON-LD interpreters and Litepub implementations work is that any <code>@id</code> typed property that is an IRI is optionally fetched and included into the graph before interpretation occurs.  In Litepub implementations, if the implementation does not wish to dereference the IRI, then it must not proceed with processing the full document, discarding it instead.  You can see that in Pleroma for example by sending it various kinds of Update activities.</p>
        </div>

        <meta itemprop='headline' content='The Update Activity: More Than Caching'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cjs.html'><span itemprop='name'>cjs</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-02T17:16:32Z' class='post-time'>
                November 2, 2019,  5:16pm
              </time>
              <meta itemprop='dateModified' content='2019-11-02T17:16:32Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote group-mastodon" data-post="2" data-topic="260">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>What part of the spec mentions this? I mean, I think it’s probably good practice to make your Updates quickly and meaningfully, but I would <em>not</em> , for example, suggest that a server break up one logical change that touches many properties into a series of many Update messages—that just sounds like a huge out-of-order/synchronization problem waiting to happen.</p>
</blockquote>
</aside>
<p>Nothing, it’s a property of the guidance.</p>
<p>I agree with your suggestion, I’m not suggesting it either. Nowhere am I suggesting “breaking things down”</p>
<p>The implication throughout the guidance and the way C2S and S2S seem to interoperate is:</p>
<ul>
<li>1 user edit generates 1 C2S Update</li>
<li>That C2S Update is sent to the Server, which generates 1 S2S Update with v2 of object</li>
<li>Server federates that 1 S2S Update with the v2 of object (which represents 1 logical user edit)</li>
</ul>
<p>That allows the originating Server and federating servers, when displaying their UI, to collapse “meaningless” edit histories (however each of them defines that, doesn’t matter that they disagree), and show “meaningful” ones.</p>
<p>What I am saying instead, is to not bundle up edits together C2S:</p>
<ul>
<li>1 user edit generates 1 C2S Update</li>
<li>That C2S Update is sent to the Server, which sticks it in a processing queue</li>
<li>1 user edit generates another C2S Update</li>
<li>That C2S Update is sent to the Server, which sticks it in a processing queue</li>
<li>Server processes its queue in batch, generating v2 of object with both edits</li>
<li>Server federates that 1 S2S Update with the v2 of object (which represents 2 logical user edits)</li>
</ul>
<aside class="quote group-pleroma" data-post="3" data-topic="260">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/kaniini/40/89_2.png" class="avatar"> kaniini:</div>
<blockquote>
<p>I don’t see how maintaining object versioning would require an inlined object.</p>
</blockquote>
</aside>
<p>If you fetch an IRI after an Update, another second/third/… Update may have already been issued by the user, so a federating peer has no guarantee they’re obtaining a whole edit history.</p>
<ul>
<li>1 user edit generates 1 C2S Update A</li>
<li>C2S Update A is sent to the Server, which updates object to v2, and generates 1 S2S Update A with IRI</li>
<li>Server federates that 1 S2S Update A with IRI</li>
<li>Peer received S2S Update A, decides to fetch a bit later</li>
<li>1 user edit generates 1 C2S Update B</li>
<li>C2S Update B is sent to the Server, which updates object to v3</li>
<li>Peer fetches the object due to S2S Update A, but obtains v3 with no way to know whether its the accumulation of &gt;1 user edits.</li>
</ul>
<p>If Peer and originating Server then try to show the edit history, they’ll not be sync’d.</p>
<p>I don’t want to support “object versioning” natively in ActivityPub, as it opens all sorts of cans of worms for edits that later restrict intended visibility of an object. But in the meantime, following the spec’s guidance does have this property of guaranteed sharing of the complete edit history.</p>
<p>Is it worth preserving? For an application I’ve had in mind (and may soon have the paperwork to actually begin implementing), it’s a property I’d like to have (peers and originating servers able to display the same versioned history). But I’m open to the idea that versioning history may just be a separate problem.</p>
        </div>

        <meta itemprop='headline' content='The Update Activity: More Than Caching'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="https://socialhub.activitypub.rocks/t/standardising-objects-with-revisions/405" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://socialhub.activitypub.rocks/t/standardising-objects-with-revisions/405'>
                      <span itemprop='name'>Standardising objects with revisions</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="https://socialhub.activitypub.rocks/t/standardising-objects-with-revisions/405/2" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://socialhub.activitypub.rocks/t/standardising-objects-with-revisions/405/2'>
                      <span itemprop='name'>Standardising objects with revisions</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/kaniini.html'><span itemprop='name'>kaniini</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-02T18:08:43Z' class='post-time'>
                November 2, 2019,  6:08pm
              </time>
              <meta itemprop='dateModified' content='2019-11-02T18:08:43Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Edit history should be considered best effort in a federated network anyway?</p>
        </div>

        <meta itemprop='headline' content='The Update Activity: More Than Caching'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/nightpool.html'><span itemprop='name'>nightpool</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-02T18:40:17Z' class='post-time'>
                November 2, 2019,  6:40pm
              </time>
              <meta itemprop='dateModified' content='2019-11-02T18:40:17Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="4" data-topic="260">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/cjs/40/35_2.png" class="avatar"> cjs:</div>
<blockquote>
<p>What I am saying instead, is to not bundle up edits together C2S:</p>
</blockquote>
</aside>
<p>I guess i’m a little confused because even the idea of bundling updates like that makes zero sense to me. Activities in ActivityStreams represent actions taken by an actor, and making an “synthetic” Update activity that doesn’t 1:1 represent an action taken by an actor kind of seems like defeating the purpose? And in the full c2s2s spec, mutating client’s activities like that seems like it falls way outside the spec’s requirements that you deliver activities to the addressees. At the least it would be <strong>very</strong> surprising to clients.</p>
<p>I think thinking of Update activities as Activities made by a client and only distributed by a server, just like any other federated activity, might make the disconnect between what you’re saying and what <a class="mention" href="../../u/kaniini.html">@kaniini</a> is saying more clear. Clients can choose to federate whatever Update activities they wish, or not send Update activities at all. But if they do choose to send one out, the server should respect that and deliver it to everybody who’s been addressed just like any other activity.</p>
        </div>

        <meta itemprop='headline' content='The Update Activity: More Than Caching'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cjs.html'><span itemprop='name'>cjs</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-11-02T19:21:14Z'>
              <time itemprop='dateModified' datetime='2019-11-02T19:25:06Z' class='post-time'>
                November 2, 2019,  7:25pm
              </time>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote group-pleroma" data-post="5" data-topic="260" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/kaniini/40/89_2.png" class="avatar"> kaniini:</div>
<blockquote>
<p>Edit history should be considered best effort in a federated network anyway?</p>
</blockquote>
</aside>
<p>That’s just because everything being delivered is best effort in a federated network? I don’t see how edit history is anything special.</p>
<p>I think I’ve made clear how, if the ecosystem sends Updates using ActivityPub guidance, pushing a literal value in <code>object</code> (which, receiving servers like Litepub always have the luxury to ignore) has a fundamentally different emergent property (the ecosystem <em>has the option</em> to build more accurate edit histories, whether Litepub or not) than asking a peer to (maybe) pull/request the updated <code>object</code> value at a later point in time (which, to retain the emergent original property, there’d need to be a whole new mechanism to think through).</p>
<p>If I haven’t, please let me know!</p>
<aside class="quote group-mastodon" data-post="6" data-topic="260">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>I guess i’m a little confused because even the idea of bundling updates like that makes zero sense to me. Activities in ActivityStreams represent actions taken by an actor, and making an “synthetic” Update activity that doesn’t 1:1 represent an action taken by an actor kind of seems like defeating the purpose?</p>
</blockquote>
</aside>
<p>Yet again, I fully agree with you, hence why I explicitly advocated <strong>not</strong> doing it.</p>
<p>I mention the bundling use case because implementations are primed for queue-based processing, and new applications (whether or not they use go-fed) are exploring using non-human actors (such as <code>Server</code>) and may get the (bad) itch to “optimize”.</p>
<aside class="quote group-mastodon" data-post="6" data-topic="260">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>I think thinking of Update activities as Activities made by a client and only distributed by a server, just like any other federated activity, might make the disconnect between what you’re saying and what <a class="mention" href="../../u/kaniini.html">@kaniini</a> is saying more clear.</p>
</blockquote>
</aside>
<p>I don’t see a disconnect between kaniini and I? My comment was about an emergent property of the ActivityPub guidance on the <em>general ecosystem</em> and theirs was about how even <em>specific Litepub clients in the ecosystem</em> can ignore these Updates. Plus, I pretty much agree with everything you’ve been saying. Perhaps start giving me better credit?</p>
        </div>

        <meta itemprop='headline' content='The Update Activity: More Than Caching'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/trwnh.html'><span itemprop='name'>trwnh</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-03T18:36:10Z' class='post-time'>
                November 3, 2019,  6:36pm
              </time>
              <meta itemprop='dateModified' content='2019-11-03T18:36:10Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>and we’ve already sacrificed network-wide consistency, anyway, in favor of availability and partition-tolerance. <a href="https://en.wikipedia.org/wiki/CAP_theorem" rel="nofollow noopener">https://en.wikipedia.org/wiki/CAP_theorem</a></p>
        </div>

        <meta itemprop='headline' content='The Update Activity: More Than Caching'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cjs.html'><span itemprop='name'>cjs</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-03T20:08:25Z' class='post-time'>
                November 3, 2019,  8:08pm
              </time>
              <meta itemprop='dateModified' content='2019-11-03T20:08:25Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This is a tangent, but I don’t think CAP is applicable. The Fediverse as currently implemented isn’t a distributed datastore. Each server is treated as the sole authoritative data storage location for its data (but it may be cached). When a server goes down, so too does its data (eventually, once caches purge). This could change with something like Datashards in the future.</p>
        </div>

        <meta itemprop='headline' content='The Update Activity: More Than Caching'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/AceNovo.html'><span itemprop='name'>AceNovo</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-06T12:08:36Z' class='post-time'>
                November 6, 2019, 12:08pm
              </time>
              <meta itemprop='dateModified' content='2019-11-06T12:08:36Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I can’t remember what got me started reading about CRDT, but I pretty sure it was someone complaining about them being too complicated</p>
<p>Regardless, if one follows the ActivityPub recommendations, S2S is a state based CRDT and C2S is an operation based CRDT. There is a guarantee of eventual consistency, which isn’t the same degree of consistency as C in CAP, but it’s sufficient for many purposes</p>
<p>So there’s prior work here for understanding the characteristics of these systems, which might be useful. Also the Wikipedia article is accessible and chock full of search terms:</p>
<aside class="onebox wikipedia">
  <header class="source">
      <a href="https://en.m.wikipedia.org/wiki/Conflict-free_replicated_data_type" target="_blank" rel="nofollow noopener">en.m.wikipedia.org</a>
  </header>
  <article class="onebox-body">
    

<h3><a href="https://en.m.wikipedia.org/wiki/Conflict-free_replicated_data_type" target="_blank" rel="nofollow noopener">Conflict-free replicated data type</a></h3>

<p>In distributed computing, a conflict-free replicated data type (CRDT) is a data structure which can be replicated across multiple computers in a network, where the replicas can be updated independently and concurrently without coordination between the replicas, and where it is always mathematically possible to resolve inconsistencies which might result.
 The CRDT concept was formally defined in 2011 by Marc Shapiro, Nuno Preguiça, Carlos Baquero and Marek Zawirski.  Development was initially moti...</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='The Update Activity: More Than Caching'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/cjs.html'><span itemprop='name'>cjs</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-06T16:07:35Z' class='post-time'>
                November 6, 2019,  4:07pm
              </time>
              <meta itemprop='dateModified' content='2019-11-06T16:07:35Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think you mentioned this to me before, thanks for bringing it back up! In those terms:</p>
<ul>
<li>When <code>Update</code> exclusively with an <code>object</code> literal, if a server is available to receive it, if a receiving server chooses to do so, can <strong>with certainty</strong> diff to obtain the operation that led to the current CRDT state.</li>
<li>When <code>Update</code> with an IRI, if a server is able to receive it, if a receiving server chooses to do so, can <strong>only presume</strong> the diff that led to the current CRDT state.</li>
</ul>
        </div>

        <meta itemprop='headline' content='The Update Activity: More Than Caching'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/AceNovo.html'><span itemprop='name'>AceNovo</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="260.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-08-24T08:13:08Z' class='post-time'>
                August 24, 2020,  8:13am
              </time>
              <meta itemprop='dateModified' content='2020-08-24T08:13:08Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I was incorrectly assuming that update applied to collections and collections only. When you modify a document in situ without changing its identifier, you need a mechanism other than time stamps and serial numbers</p>
<p>In some situations, you can take a diff and the version with the the longest change list would be most recent. AFAICT, though, there’s no way interior to the protocol to know which state is more recent</p>
        </div>

        <meta itemprop='headline' content='The Update Activity: More Than Caching'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
