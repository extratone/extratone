<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>What to do if media without “width”/“height” (Image) or “duration” (Audio/Video) arrives in inbox? - redaktor.me - SocialHub</title>
    <meta name="description" content="The width, height and duration properties are basically required for the redaktor client. 
Reasons: 
width, height 
We do not want to disrupt/tatter/break the aspect ratios of esteemed users images by putting them in a s&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.0.beta2 - https://github.com/discourse/discourse version c39ab6c0ae3803b6a62501954ae40adb6b73d580">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/b7023860b3d7df97ea10ba3c7ab11cb046a77c7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1642.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://socialhub.activitypub.rocks","potentialAction":{"@type":"SearchAction","target":"https://socialhub.activitypub.rocks/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="SocialHub Search">

      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop" />
      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_5_969dd27459c19a0b7620746a3d179b86ef033d7a.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_3_f50bf2f225326f482d56e65e93f1f047d48417a9.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_8_e3f93470fef56ec97b63f77e16779e328baab8ea.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="8"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_4_8d506fd22b761a15044193a6d4ebda5f6bde2498.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;What to do if media without “width”/“height” (Image) or “duration” (Audio/Video) arrives in inbox?&#39;" href="1642.rss" />
    <meta property="og:site_name" content="SocialHub" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:url" content="https://socialhub.activitypub.rocks/t/what-to-do-if-media-without-width-height-image-or-duration-audio-video-arrives-in-inbox/1642" />
<meta name="twitter:url" content="https://socialhub.activitypub.rocks/t/what-to-do-if-media-without-width-height-image-or-duration-audio-video-arrives-in-inbox/1642" />
<meta property="og:title" content="What to do if media without “width”/“height” (Image) or “duration” (Audio/Video) arrives in inbox?" />
<meta name="twitter:title" content="What to do if media without “width”/“height” (Image) or “duration” (Audio/Video) arrives in inbox?" />
<meta property="og:description" content="The width, height and duration properties are basically required for the redaktor client.  Reasons:  width, height  We do not want to disrupt/tatter/break the aspect ratios of esteemed users images by putting them in a square and for a masonry layout, we need at least to know, if it is “landscpe”, “square”, “portrait” – and:  For performance benefits (e.g. in card stream or row overview), the media is loaded via Intersection Observer.  So, for a pleasant visual experience it is required that the..." />
<meta name="twitter:description" content="The width, height and duration properties are basically required for the redaktor client.  Reasons:  width, height  We do not want to disrupt/tatter/break the aspect ratios of esteemed users images by putting them in a square and for a masonry layout, we need at least to know, if it is “landscpe”, “square”, “portrait” – and:  For performance benefits (e.g. in card stream or row overview), the media is loaded via Intersection Observer.  So, for a pleasant visual experience it is required that the..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ❤" />
<meta property="article:published_time" content="2021-04-23T07:07:43+00:00" />
<meta property="og:ignore_canonical" content="true" />


    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"What to do if media without “width”/“height” (Image) or “duration” (Audio/Video) arrives in inbox?","mainEntity":{"@type":"Question","name":"What to do if media without “width”/“height” (Image) or “duration” (Audio/Video) arrives in inbox?","text":"The width, height and duration properties are basically required for the redaktor client.\n\nReasons:\n\nwidth, height\n\nWe do not want to disrupt/tatter/break the aspect ratios of esteemed users images by putting them in a square and for a masonry layout, we need at least to know, if it is “landscpe”, “&hellip;","upvoteCount":0,"answerCount":0,"dateCreated":"2021-04-23T07:07:42.973Z","author":{"@type":"Person","name":"Sebastian Lasse | @sl007@mastodon.social"}}}</script>
  </head>
  <body class="crawler">
    
<script src="https://socialhub.activitypub.rocks/theme-javascripts/3a68d4ddcab78e923b7c4169708a8f1deb79df66.js?__ws=socialhub.activitypub.rocks"></script>
    <header>
      <a href="https://socialhub.activitypub.rocks/">
          <img src="../../uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png" alt="SocialHub" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1642.html">What to do if media without “width”/“height” (Image) or “duration” (Audio/Video) arrives in inbox?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/software/index.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Software</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/software/redaktor-me.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #ff7a00'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>redaktor.me</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Sebastian.html'><span itemprop='name'>Sebastian</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1642.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-04-23T07:07:43Z'>
              <time itemprop='dateModified' datetime='2021-04-23T07:23:41Z' class='post-time'>
                April 23, 2021,  7:23am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The <code>width</code>, <code>height</code> and <code>duration</code> properties are basically required for the redaktor client.<br>
Reasons:<br>
<code>width</code>, <code>height</code><br>
We do not want to disrupt/tatter/break the aspect ratios of esteemed users images by putting them in a square and for a masonry layout, we need at least to know, if it is “landscpe”, “square”, “portrait” – and:<br>
For performance benefits (e.g. in card stream or row overview), the media is loaded via Intersection Observer.<br>
So, for a pleasant visual experience it is required that the concrete aspect ratio is known in order to paint the box.<br>
<code>duration</code><br>
If we have media without metadata like in WebVTT, we can also load <code>Audio</code>/<code>Video</code> by Intersection Observer and setting <code>preload="none"</code> – but we would still like to show the duration above the post …</p>
<p>So:<br>
If any of those arrives at redaktor server, it can measure and enhance the object.<br>
It might be supernice, if we know it in advance (I agree with 99.9% of the protocol but this would have been a <em>must</em> for me …)</p>
<p>How about other servers?<br>
<a class="mention" href="../../u/grishka.html">@grishka</a> <a class="mention" href="../../u/bashrc.html">@bashrc</a><br>
How do other client devs handling this?</p>
        </div>

        <meta itemprop='headline' content='What to do if media without “width”/“height” (Image) or “duration” (Audio/Video) arrives in inbox?'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1642.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-04-23T07:41:02Z'>
              <time itemprop='dateModified' datetime='2021-04-23T07:44:16Z' class='post-time'>
                April 23, 2021,  7:44am
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I get the dimensions for such images when I first download them, which happens when the user first sees that post. The unfortunate side effect of that is that if an image is not downloaded yet and didn’t have <code>width</code>/<code>height</code>, it can’t be laid out properly and so is assumed to be square. So you see a post with cropped images, then you refresh the page and then you see them properly laid out. I of course do always send width/height for my own images.</p>
<p>I don’t properly support any form of video yet. I simply put whatever URL there is in the object into a <code>&lt;video&gt;</code> tag so video posts aren’t empty.</p>
        </div>

        <meta itemprop='headline' content='What to do if media without “width”/“height” (Image) or “duration” (Audio/Video) arrives in inbox?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Sebastian.html'><span itemprop='name'>Sebastian</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1642.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-04-25T09:55:21Z' class='post-time'>
                April 25, 2021,  9:55am
              </time>
              <meta itemprop='dateModified' content='2021-04-25T09:55:21Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I see.<br>
The redaktor nodeJS server did measure for each incoming image and then “enhanced” the objects.<br>
Just for this 3 properties.<br>
And I am thinking about if it should really enhance the objects (technically it’s just adding info which is basically already in the post, just not in text but it also “changes” the original JSON).</p>
        </div>

        <meta itemprop='headline' content='What to do if media without “width”/“height” (Image) or “duration” (Audio/Video) arrives in inbox?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1642.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-04-25T10:06:16Z' class='post-time'>
                April 25, 2021, 10:06am
              </time>
              <meta itemprop='dateModified' content='2021-04-25T10:06:16Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>It’s easy for me — I don’t store the original JSON anywhere. I parse it immediately and from then on only work with my own internal representation, ignoring whatever parts I don’t understand. For when I need an ActivityPub object, I generate the JSON on the fly. This does show in places like <code>Accept{Follow}</code> — I won’t return any custom fields you put into the <code>Follow</code> for example.</p>
        </div>

        <meta itemprop='headline' content='What to do if media without “width”/“height” (Image) or “duration” (Audio/Video) arrives in inbox?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/bashrc.html'><span itemprop='name'>bashrc</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1642.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-07-01T09:33:16Z' class='post-time'>
                July 1, 2021,  9:33am
              </time>
              <meta itemprop='dateModified' content='2021-07-01T09:33:16Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Currently, Epicyon does not try to do anything with attachments on inbox posts. These are links, and are displayed as links. So it doesn’t attempt to download or cache images (except for avatar images), it just displays them directly from their original source.</p>
<p>Metadata about dimensions could be added to the post at the time of upload.</p>
        </div>

        <meta itemprop='headline' content='What to do if media without “width”/“height” (Image) or “duration” (Audio/Video) arrives in inbox?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
