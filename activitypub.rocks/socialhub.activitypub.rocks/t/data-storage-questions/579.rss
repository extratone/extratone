<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Data storage questions</title>
    <link>https://socialhub.activitypub.rocks/t/data-storage-questions/579</link>
    <description>@nutomic and I are working on federating lemmy, and I have some questions about data storage, and replication. 

## Questions on activitypub storage

- User tables (at least in pleroma) seem to hold both local, and federated users. Does this mean when two activitypub instances connect, it has to pull **all** the other instance&#39;s users, including their entire outboxes, into its own data storage model?
  - What about a users toots? Do all user toots also get pulled?
  - Is there some standard for this? Pulling all data from an instance?
- What if one of those users changes their profile? How to deal with mutable data? How often should this data be &quot;cached&quot;?
- Are all objects and activities posted to all instances, and replicated everywhere?
- Many users of instance 1 are following user B on instance 2. User B toots, and that create note gets posted to the inboxes of all the users instance 1. How is this de-duped in data storage? Just by an id on the create activity? Is there maybe just a single post endpoint for all data?
- When should OrderedCollection be used, and when UnorderedCollection?</description>
    
    <lastBuildDate>Wed, 25 Mar 2020 19:30:06 +0000</lastBuildDate>
    <category>Server to Server</category>
    <atom:link href="https://socialhub.activitypub.rocks/t/data-storage-questions/579.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Data storage questions</title>
        <dc:creator><![CDATA[nedjo]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>is there any more documentation for how sharedInboxes work?</p>
</blockquote>
<p>See the section “What’s special about the <code>sharedInbox</code>?” in <a href="https://socialhub.activitypub.rocks/t/draft-guide-for-new-activitypub-implementers/479" class="inline-onebox">Draft: Guide for new ActivityPub implementers</a>. Does that help?</p>
          <p><a href="https://socialhub.activitypub.rocks/t/data-storage-questions/579/8">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/data-storage-questions/579/8</link>
        <pubDate>Wed, 25 Mar 2020 19:30:06 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-579-8</guid>
        <source url="https://socialhub.activitypub.rocks/t/data-storage-questions/579.rss">Data storage questions</source>
      </item>
      <item>
        <title>Data storage questions</title>
        <dc:creator><![CDATA[Sebastian]]></dc:creator>
        <description><![CDATA[
            <p>About sharedInbox, maybe this thread has some clarification.<br>
If not please add it to the guide :<br>
<a href="https://socialhub.activitypub.rocks/t/introduction-to-activitypub/508">Introduction to ActivityPub</a></p>
<p>About</p>
<blockquote>
<p>I’m having trouble with this part. Don’t I need to bring this data into my local data model, so that it can be queried and presented to my users?</p>
</blockquote>
<p>Yes but this is only specific to your app. We talked about it in the journalism session at 36c3 and everybody handles this different apart from the “id”. For example some only store hashtags, others store a special search index and a link index plus from/to relations.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/data-storage-questions/579/7">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/data-storage-questions/579/7</link>
        <pubDate>Wed, 25 Mar 2020 09:04:16 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-579-7</guid>
        <source url="https://socialhub.activitypub.rocks/t/data-storage-questions/579.rss">Data storage questions</source>
      </item>
      <item>
        <title>Data storage questions</title>
        <dc:creator><![CDATA[grishka]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="dessalines" data-post="5" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/dessalines/40/301_2.png" class="avatar"> dessalines:</div>
<blockquote>
<p>One question, what about the data that is <strong>only stored remotely</strong> , such as a remote user’s public feed. Do you fetch that data on demand, and, since its not in your local data model, do different transformations to show that data on your front end? Or do you simply not show it, and force your users to view that instance directly?</p>
</blockquote>
</aside>
<p>This is still an open question for me. Jumping back and forth between instances isn’t a great UX — imagine opening someone’s profile on their instance and wanting to like their post that your instance doesn’t have. Fetching all of the user’s posts in advance isn’t good because, well, you’ll potentially download and store a lot of data.</p>
<p>Someone somewhere suggested fetching remote collections “as needed”, almost proxying. That was for followers/following which won’t work for me, but it has a good chance of working for posts. Like when someone requests the next page of someone’s post feed and you don’t have it, you’d fetch it from the remote server, store it locally and then render the page.</p>
<p>Mastodon doesn’t seem to be fetching any collections for remote users at all. Not even followers/following.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://socialhub.activitypub.rocks/uploads/default/original/1X/294deda45dd79f347b001d9a8bbc4e34a56eea30.png" data-download-href="https://socialhub.activitypub.rocks/uploads/default/294deda45dd79f347b001d9a8bbc4e34a56eea30" title="Снимок экрана 2020-03-24 в 16.58.19"><img src="https://socialhub.activitypub.rocks/uploads/default/optimized/1X/294deda45dd79f347b001d9a8bbc4e34a56eea30_2_309x499.png" alt="Снимок экрана 2020-03-24 в 16.58.19" data-base62-sha1="5ToxhL6wBRxxjrjPSLcoFlUP06Q" width="309" height="499" srcset="https://socialhub.activitypub.rocks/uploads/default/optimized/1X/294deda45dd79f347b001d9a8bbc4e34a56eea30_2_309x499.png, https://socialhub.activitypub.rocks/uploads/default/optimized/1X/294deda45dd79f347b001d9a8bbc4e34a56eea30_2_463x748.png 1.5x, https://socialhub.activitypub.rocks/uploads/default/original/1X/294deda45dd79f347b001d9a8bbc4e34a56eea30.png 2x" data-small-upload="https://socialhub.activitypub.rocks/uploads/default/optimized/1X/294deda45dd79f347b001d9a8bbc4e34a56eea30_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Снимок экрана 2020-03-24 в 16.58.19</span><span class="informations">598×965 141 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div><br>
This says “40 following”, but only shows 4 users that are from mastodon.social, the instance I took this screenshot from.</p>
<aside class="quote no-group" data-username="dessalines" data-post="5" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/dessalines/40/301_2.png" class="avatar"> dessalines:</div>
<blockquote>
<p>Also for both <a class="mention" href="/u/nightpool">@nightpool</a> and <a class="mention" href="/u/grishka">@grishka</a>, is there any more documentation for how sharedInboxes work? <a href="https://www.w3.org/TR/activitypub/#shared-inbox-delivery" rel="nofollow noopener">This doc</a> isn’t really showing how it works in practice.</p>
</blockquote>
</aside>
<p>I don’t think there’s any. On my server I don’t even make a distinction between the two, they’re both handled by the same code even though they’re different URLs. That said, I think <a href="https://flak.tedunangst.com/post/ActivityPub-as-it-has-been-understood" rel="nofollow noopener">this post series</a> might answer some of the questions you currently have and might have in the future.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/data-storage-questions/579/6">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/data-storage-questions/579/6</link>
        <pubDate>Tue, 24 Mar 2020 14:06:40 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-579-6</guid>
        <source url="https://socialhub.activitypub.rocks/t/data-storage-questions/579.rss">Data storage questions</source>
      </item>
      <item>
        <title>Data storage questions</title>
        <dc:creator><![CDATA[dessalines]]></dc:creator>
        <description><![CDATA[
            <p>Thanks!</p>
<aside class="quote no-group" data-username="grishka" data-post="4" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/grishka/40/196_2.png" class="avatar"> grishka:</div>
<blockquote>
<p>I re-fetch the remote users whenever I receive an activity made by a user that was last fetched more than 24 hours ago.</p>
</blockquote>
</aside>
<p>Things like this are extremely helpful.</p>
<p>One question, what about the data that is <strong>only stored remotely</strong>, such as a remote user’s public feed. Do you fetch that data on demand, and, since its not in your local data model, do different transformations to show that data on your front end? Or do you simply not show it, and force your users to view that instance directly?</p>
<p>In my app currently, I’m only showing data on the front end that comes from my local data model, but this seems to imply that I need to be able to have a completely different path, that fetches activitypub user feeds on demand, and transform them into objects my front end can read, completely bypassing my local data model / stored data.</p>
<p>Also for both <a class="mention" href="/u/nightpool">@nightpool</a> and <a class="mention" href="/u/grishka">@grishka</a>, is there any more documentation for how sharedInboxes work? <a href="https://www.w3.org/TR/activitypub/#shared-inbox-delivery" rel="nofollow noopener">This doc</a> isn’t really showing how it works in practice.</p>
<p>Thanks!</p>
          <p><a href="https://socialhub.activitypub.rocks/t/data-storage-questions/579/5">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/data-storage-questions/579/5</link>
        <pubDate>Tue, 24 Mar 2020 13:18:14 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-579-5</guid>
        <source url="https://socialhub.activitypub.rocks/t/data-storage-questions/579.rss">Data storage questions</source>
      </item>
      <item>
        <title>Data storage questions</title>
        <dc:creator><![CDATA[grishka]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="dessalines" data-post="1" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/dessalines/40/301_2.png" class="avatar"> dessalines:</div>
<blockquote>
<p>User tables (at least in pleroma) seem to hold both local, and federated users. Does this mean when two activitypub instances connect, it has to pull <strong>all</strong> the other instance’s users, including their entire outboxes, into its own data storage model?</p>
</blockquote>
</aside>
<p>You only pull the users as needed. For example, when you receive an activity made by an unknown user, you fetch that user and store it in your table.</p>
<p>Side note about my implementation: I decided to separate users from accounts. Every local user has an account, so there are rows in both tables for those. Every remote user only has a row in the users table because they aren’t supposed to log in to this instance.</p>
<aside class="quote no-group" data-username="dessalines" data-post="1" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/dessalines/40/301_2.png" class="avatar"> dessalines:</div>
<blockquote>
<p>What if one of those users changes their profile? How to deal with mutable data? How often should this data be “cached”?</p>
</blockquote>
</aside>
<p>I re-fetch the remote users whenever I receive an activity made by a user that was last fetched more than 24 hours ago.</p>
<aside class="quote no-group" data-username="dessalines" data-post="1" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/dessalines/40/301_2.png" class="avatar"> dessalines:</div>
<blockquote>
<p>Are all objects and activities posted to all instances, and replicated everywhere?</p>
</blockquote>
</aside>
<p>No, they’re posted according to addressing (to/cc/bto/bcc fields). If there’s a followers collection, you would get the list of inboxes of the followers from your database (sharedInbox if available, otherwise simply inbox) and deduplicate it. <a href="https://github.com/grishka/Smithereen/blob/9b7e62c3b66061a6aa44421a6701d7efc8e29d9a/src/main/java/smithereen/storage/UserStorage.java#L522" rel="nofollow noopener">The way I do it that seems to be working so far.</a> For individual actors, you’d simply post the activity to that actor’s inbox or to their instance’s sharedInbox.</p>
<aside class="quote no-group" data-username="dessalines" data-post="1" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/dessalines/40/301_2.png" class="avatar"> dessalines:</div>
<blockquote>
<p>Many users of instance 1 are following user B on instance 2. User B toots, and that create note gets posted to the inboxes of all the users instance 1. How is this de-duped in data storage? Just by an id on the create activity? Is there maybe just a single post endpoint for all data?</p>
</blockquote>
</aside>
<p>Yes. That <code>@id</code> is supposed to be unique internet-wide. Also, for the very reason to avoid posting several copies of the same activity to different inboxes on the same instance, there exists sharedInbox. If you use that, you’ll only have to post one copy of your activity per instance.</p>
<aside class="quote no-group" data-username="dessalines" data-post="1" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/dessalines/40/301_2.png" class="avatar"> dessalines:</div>
<blockquote>
<p>When should OrderedCollection be used, and when UnorderedCollection?</p>
</blockquote>
</aside>
<p>Depends on the semantics of your collection. Where the order is important (for example, outboxes where activities are sorted reverse chronologically) you’d use OrderedCollection. Otherwise, I think it’s fine to use any.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/data-storage-questions/579/4">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/data-storage-questions/579/4</link>
        <pubDate>Sat, 21 Mar 2020 23:19:08 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-579-4</guid>
        <source url="https://socialhub.activitypub.rocks/t/data-storage-questions/579.rss">Data storage questions</source>
      </item>
      <item>
        <title>Data storage questions</title>
        <dc:creator><![CDATA[dessalines]]></dc:creator>
        <description><![CDATA[
            <p>Thanks! This is really helpful.</p>
<aside class="quote group-mastodon" data-username="nightpool" data-post="2" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>Why would this be required? What purpose does this serve? I can say that Pleroma does not do this, and i’m not sure it’s even possible without spidering or crawling the other instance in some way. (and even then you’d never be able to get everything)</p>
</blockquote>
</aside>
<p>Does masto have a users table that stores federated users (from other instances). If so, how does it populate these? When it receives, lets say a <code>Create Note</code> from an actor, does it then check its local DB to see if that actor exists in its own user table, and then populate it?</p>
<aside class="quote group-mastodon" data-username="nightpool" data-post="2" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>for <strong>data storage</strong> , there is no reason to keep multiple copies of the same note.</p>
</blockquote>
</aside>
<p>I’m having trouble with this part. Don’t I need to bring this data into my local data model, so that it can be queried and presented to my users?</p>
<p>Otherwise, I’d have to fetch the data on demand. This could mean my server having to do dozens of on-demand http fetches to get content.</p>
<p>And lets say its not even content that’s been posted to my users inboxes, its just their public feed. Does this mean it has to be fetched on demand?</p>
<aside class="quote group-mastodon" data-username="nightpool" data-post="2" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>for <strong>delivery</strong> , you can utilize the shared inbox system, if the remote actor supports it, to reduce the amount of deliveries you need to make:</p>
</blockquote>
</aside>
<p>I wish this documented a little better. Seems like every single follow activity would have to check for other users on that same inbox… and I have no idea where the sharedInbox fits in with followers collection.</p>
<p>Outside of the sharedInbox though, is the flow:</p>
<ol>
<li>A user on instance 1 creates a note, it gets posted to the inbox of all their followers.</li>
<li>A following user on instance 2 receives an inbox post, and brings that data into their local data model for querying.</li>
</ol>
          <p><a href="https://socialhub.activitypub.rocks/t/data-storage-questions/579/3">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/data-storage-questions/579/3</link>
        <pubDate>Sat, 21 Mar 2020 15:05:42 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-579-3</guid>
        <source url="https://socialhub.activitypub.rocks/t/data-storage-questions/579.rss">Data storage questions</source>
      </item>
      <item>
        <title>Data storage questions</title>
        <dc:creator><![CDATA[nightpool]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="dessalines" data-post="1" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/dessalines/40/301_2.png" class="avatar"> dessalines:</div>
<blockquote>
<p>Does this mean when two activitypub instances connect, it has to pull <strong>all</strong> the other instance’s users, including their entire outboxes, into its own data storage model?</p>
</blockquote>
</aside>
<p>Why would this be required? What purpose does this serve? I can say that Pleroma does not do this, and i’m not sure it’s even possible without spidering or crawling the other instance in some way. (and even then you’d never be able to get everything)</p>
<aside class="quote no-group" data-username="dessalines" data-post="1" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/dessalines/40/301_2.png" class="avatar"> dessalines:</div>
<blockquote>
<p>What if one of those users changes their profile? How to deal with mutable data? How often should this data be “cached”?</p>
</blockquote>
</aside>
<p>I can’t speak for Pleroma, but when users change their profile on mastodon, we send out an <code>Update</code> activity to the user’s followers. I believe we also refetch the profile if we’re processing an activity from the user and we haven’t refetched the profile recently, but i’m not sure what the actual cadence is. Either way, refetching profile metadata is definitely “best effort” in the absence of an explicit Update activity</p>
<aside class="quote no-group" data-username="dessalines" data-post="1" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/dessalines/40/301_2.png" class="avatar"> dessalines:</div>
<blockquote>
<p>Are all objects and activities posted to all instances, and replicated everywhere?</p>
</blockquote>
</aside>
<p>No, this is a very basic part of how ActivityPub works. Activities are posted to the <code>inbox</code> only of the actors you wish to deliver them to (In a c2s model, the actors are specified using the <code>to</code> and <code>cc</code> properties. When not implementing c2s, you can choose the <code>to</code> and <code>cc</code> properties freely based on what set of users you wish to deliver the activity to). For example, Mastodon delivers its activities to the inboxes of a user’s followers, as you can see in the targeting information below:</p>
<pre><code>
{
  "@context": "https://www.w3.org/ns/activitystreams",
  "id": "https://cybre.space/users/nightpool/statuses/102148702213596342/activity",
  "type": "Create",
  "actor": "https://cybre.space/users/nightpool",
  "published": "2019-05-24T02:38:20Z",
  <strong>"to": ["https://www.w3.org/ns/activitystreams#Public"]</strong>,
  <strong>"cc": ["https://cybre.space/users/nightpool/followers"]</strong>,
  "object": {
    ...
  }
}
</code></pre>
<aside class="quote no-group" data-username="dessalines" data-post="1" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/dessalines/40/301_2.png" class="avatar"> dessalines:</div>
<blockquote>
<p>Many users of instance 1 are following user B on instance 2. User B toots, and that create note gets posted to the inboxes of all the users instance 1. How is this de-duped in data storage? Just by an id on the create activity? Is there maybe just a single post endpoint for all data?</p>
</blockquote>
</aside>
<ul>
<li>
<p>for <strong>data storage</strong>, there is no reason to keep multiple copies of the same note. Since all <code>ids</code> are publicly dereferencable URIs (<a href="https://www.w3.org/TR/activitypub/#obj-id">https://www.w3.org/TR/activitypub/#obj-id</a>), you can use that as your primary key in whatever data system you choose to implement</p>
</li>
<li>
<p>for <strong>delivery</strong>, you can utilize the shared inbox system, if the remote actor supports it, to reduce the amount of deliveries you need to make: <a href="https://www.w3.org/TR/activitypub/#shared-inbox-delivery">https://www.w3.org/TR/activitypub/#shared-inbox-delivery</a></p>
</li>
</ul>
<aside class="quote no-group" data-username="dessalines" data-post="1" data-topic="579">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/dessalines/40/301_2.png" class="avatar"> dessalines:</div>
<blockquote>
<p>When should OrderedCollection be used, and when UnorderedCollection?</p>
</blockquote>
</aside>
<p><a href="https://www.w3.org/TR/activitystreams-core/#dfn-orderedcollection">OrderedCollection</a> and <a href="https://www.w3.org/TR/activitystreams-core/#collections">Collection</a> are both part of the ActivityStreams spec, and they’re defined there. I’ll quote the spec:</p>
<blockquote>
<p>The items within a <code>Collection</code> can be ordered or unordered. The <code>OrderedCollection</code> type <em>MAY</em> be used to identify a Collection whose items are always ordered. In the JSON serialization, the unordered items of a Collection are represented using the <code>items</code> property while ordered items are represented using the <code>orderedItems</code> property.</p>
</blockquote>
<p>If your Collection is ordered in any way, you should use OrderedCollection. The difference is that the <code>items</code> property on Collection gets parsed as an unordered set, while the <code>orderedItems</code> property gets parsed as an array, so unless you use <code>orderedItems</code>, other implementations might not ever retain any order information (for example, in a relational database i would represent a Collection using a simple join table, and for OrderedCollection I would add an <code>order</code> property to the table rows)</p>
<p>ActivityPub defines several properties on actors that should be <code>OrderedCollection</code>s, and several properties where it allows implementations to decide whether the items should be ordered or not. For example, an actor’s <code>inbox</code> collection should always be an <code>OrderedCollection</code>, presented in reverse chronological order: <a href="https://www.w3.org/TR/activitypub/#collections">https://www.w3.org/TR/activitypub/#collections</a>, while the <code>likes</code> collection may be ordered or unordered, as the implementation prefers: <a href="https://www.w3.org/TR/activitypub/#liked">https://www.w3.org/TR/activitypub/#liked</a>.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/data-storage-questions/579/2">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/data-storage-questions/579/2</link>
        <pubDate>Fri, 20 Mar 2020 17:25:05 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-579-2</guid>
        <source url="https://socialhub.activitypub.rocks/t/data-storage-questions/579.rss">Data storage questions</source>
      </item>
      <item>
        <title>Data storage questions</title>
        <dc:creator><![CDATA[dessalines]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="/u/nutomic">@nutomic</a> and I are working on federating lemmy, and I have some questions about data storage, and replication.</p>
<h2>Questions on activitypub storage</h2>
<ul>
<li>User tables (at least in pleroma) seem to hold both local, and federated users. Does this mean when two activitypub instances connect, it has to pull <strong>all</strong> the other instance’s users, including their entire outboxes, into its own data storage model?
<ul>
<li>What about a users toots? Do all user toots also get pulled?</li>
<li>Is there some standard for this? Pulling all data from an instance?</li>
</ul>
</li>
<li>What if one of those users changes their profile? How to deal with mutable data? How often should this data be “cached”?</li>
<li>Are all objects and activities posted to all instances, and replicated everywhere?</li>
<li>Many users of instance 1 are following user B on instance 2. User B toots, and that create note gets posted to the inboxes of all the users instance 1. How is this de-duped in data storage? Just by an id on the create activity? Is there maybe just a single post endpoint for all data?</li>
<li>When should OrderedCollection be used, and when UnorderedCollection?</li>
</ul>
          <p><a href="https://socialhub.activitypub.rocks/t/data-storage-questions/579/1">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/data-storage-questions/579/1</link>
        <pubDate>Fri, 20 Mar 2020 16:35:55 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-579-1</guid>
        <source url="https://socialhub.activitypub.rocks/t/data-storage-questions/579.rss">Data storage questions</source>
      </item>
  </channel>
</rss>
