<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Representing things in a VKontakte/Facebook-style social network? - Server to Server - SocialHub</title>
    <meta name="description" content="So far, all of the ActivityPub implementations I’ve seen are about microblogging – which means unilateral following, only own posts in own profile, and no concept of friends. I’m making one that’s different from that and&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.0.beta2 - https://github.com/discourse/discourse version c39ab6c0ae3803b6a62501954ae40adb6b73d580">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/b7023860b3d7df97ea10ba3c7ab11cb046a77c7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="243@page=2.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://socialhub.activitypub.rocks","potentialAction":{"@type":"SearchAction","target":"https://socialhub.activitypub.rocks/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="SocialHub Search">

      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop" />
      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_5_969dd27459c19a0b7620746a3d179b86ef033d7a.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_3_f50bf2f225326f482d56e65e93f1f047d48417a9.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_8_e3f93470fef56ec97b63f77e16779e328baab8ea.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="8"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_4_8d506fd22b761a15044193a6d4ebda5f6bde2498.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Representing things in a VKontakte/Facebook-style social network?&#39;" href="243.rss" />
    <meta property="og:site_name" content="SocialHub" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:url" content="https://socialhub.activitypub.rocks/t/representing-things-in-a-vkontakte-facebook-style-social-network/243?page=2" />
<meta name="twitter:url" content="https://socialhub.activitypub.rocks/t/representing-things-in-a-vkontakte-facebook-style-social-network/243?page=2" />
<meta property="og:title" content="Representing things in a VKontakte/Facebook-style social network?" />
<meta name="twitter:title" content="Representing things in a VKontakte/Facebook-style social network?" />
<meta property="og:description" content="Oh, my mistake, I thought you were talking about events. I don’t know if there’s any appropriate property for group membership.   I don’t think it’s actually an optimization though? It introduces an entirely unnecessary level of complexity—you have to fetch some ‘global’ information about the server separately, keep track of it, keep it up to date, etc etc. As opposed to just fetching a simple property on the actor object and keeping it right in the accounts row where you’re going to be using i..." />
<meta name="twitter:description" content="Oh, my mistake, I thought you were talking about events. I don’t know if there’s any appropriate property for group membership.   I don’t think it’s actually an optimization though? It introduces an entirely unnecessary level of complexity—you have to fetch some ‘global’ information about the server separately, keep track of it, keep it up to date, etc etc. As opposed to just fetching a simple property on the actor object and keeping it right in the accounts row where you’re going to be using i..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="13 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="4 ❤" />
<meta property="article:published_time" content="2019-12-30T22:44:54+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="243.html">

    
  </head>
  <body class="crawler">
    
<script src="https://socialhub.activitypub.rocks/theme-javascripts/3a68d4ddcab78e923b7c4169708a8f1deb79df66.js?__ws=socialhub.activitypub.rocks"></script>
    <header>
      <a href="https://socialhub.activitypub.rocks/">
          <img src="../../uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png" alt="SocialHub" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="243.html">Representing things in a VKontakte/Facebook-style social network?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/activitypub.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #0088CC'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>ActivityPub</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/activitypub/s2s/7.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #808281'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Server to Server</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/nightpool.html'><span itemprop='name'>nightpool</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="243.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-30T22:44:54Z' class='post-time'>
                December 30, 2019, 10:44pm
              </time>
              <meta itemprop='dateModified' content='2019-12-30T22:44:54Z'>
          <span itemprop='position'>#21</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="20" data-topic="243">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/grishka/40/196_2.png" class="avatar"> grishka:</div>
<blockquote>
<p>But what if a user joined a group themselves without an invitation, by sending a <code>Join</code> activity?</p>
</blockquote>
</aside>
<p>Oh, my mistake, I thought you were talking about events. I don’t know if there’s any appropriate property for group membership.</p>
<aside class="quote no-group" data-post="20" data-topic="243">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/grishka/40/196_2.png" class="avatar"> grishka:</div>
<blockquote>
<p>Again, it’s an optimization. It’d make sense to put it into the actor object if it was different across actors. But it’s not a property of an actor, rather it’s a property of a particular server software. It doesn’t vary across actors on the same server.</p>
</blockquote>
</aside>
<p>I don’t think it’s actually an optimization though? It introduces an entirely unnecessary level of complexity—you have to fetch some ‘global’ information about the server separately, keep track of it, keep it up to date, etc etc. As opposed to just fetching a simple property on the actor object and keeping it right in the accounts row where you’re going to be using it. Like I said, it also goes against the fundamental design of ActivityPub—there’s nothing about the protocol that requires actors on the same server to all be using the same software, especially when it comes to things like c2s clients that may vary wildly across users on the same s2s server!</p>
        </div>

        <meta itemprop='headline' content='Representing things in a VKontakte/Facebook-style social network?'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="243.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-03T18:55:48Z' class='post-time'>
                January 3, 2020,  6:55pm
              </time>
              <meta itemprop='dateModified' content='2020-01-03T18:55:48Z'>
          <span itemprop='position'>#22</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>What I decided to do ultimately:</p>
<ul>
<li>
<code>supportsFriendRequests</code> is now a field in the actor object (with my own namespace), as <a class="mention" href="../../u/nightpool.html">@nightpool</a> suggested. I figured that I can add a flags field to my users table and now I have space for 63 more flags (yay future-proofing, migrating DB schemas is painful).</li>
<li>Sending a friend request sends <code>Follow</code> and <code>Offer{Follow}</code>. If there’s a message in the friend request, it’s put into <code>content</code> of <code>Offer</code>.</li>
<li>Accepting a friend request simply sends <code>Follow</code> that has a side effect of deleting the pending outgoing friend request on the receiving instance. <code>Accept{Offer{Follow}}</code> feels redundant so I decided against that.</li>
<li>Rejecting a friend request sends <code>Reject{Offer{Follow}}</code>.</li>
</ul>
        </div>

        <meta itemprop='headline' content='Representing things in a VKontakte/Facebook-style social network?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="243.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-01-04T00:02:11Z'>
              <time itemprop='dateModified' datetime='2020-01-04T00:02:47Z' class='post-time'>
                January 4, 2020, 12:02am
              </time>
          <span itemprop='position'>#23</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Wall post addressing.</p>
<ul>
<li>Own posts on own wall work exactly like Mastodon toots.</li>
<li>Posts on someone else’s wall use this in their fields:<br>
<code>"to": [], "cc": ["as:Public", "https://friends.grishka.me/users/1"]</code><br>
Notice that there are no followers collections. Public is in <code>cc</code> because otherwise Mastodon would show that post in public feeds.</li>
</ul>
<p>I only support public posts now, so if I receive a post that doesn’t contain <code>as:Public</code> in either <code>to</code> or <code>cc</code>, I return 400 Bad Request.</p>
        </div>

        <meta itemprop='headline' content='Representing things in a VKontakte/Facebook-style social network?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/trwnh.html'><span itemprop='name'>trwnh</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="243.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-04T10:37:30Z' class='post-time'>
                January 4, 2020, 10:37am
              </time>
              <meta itemprop='dateModified' content='2020-01-04T10:37:30Z'>
          <span itemprop='position'>#24</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="22" data-topic="243">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/grishka/40/196_2.png" class="avatar"> grishka:</div>
<blockquote>
<p><code>Accept{Offer{Follow}}</code> feels redundant so I decided against that.</p>
</blockquote>
</aside>
<p>It would still be a good idea to send this. You can’t assume that side effects will always be processed exactly as you assume</p>
        </div>

        <meta itemprop='headline' content='Representing things in a VKontakte/Facebook-style social network?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Sebastian.html'><span itemprop='name'>Sebastian</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="243.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-11T08:00:54Z' class='post-time'>
                September 11, 2020,  8:00am
              </time>
              <meta itemprop='dateModified' content='2020-09-11T08:00:54Z'>
          <span itemprop='position'>#25</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Regarding <strong>4)</strong> Commented/Quoted Post see also<br>
<aside class="quote" data-post="2" data-topic="659">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/yvolk/40/310_2.png" class="avatar">
    <a href="https://socialhub.activitypub.rocks/t/repost-share-with-quote-a-k-a-attach-someone-elses-post-to-your-own-post/659/2">Repost/share with quote a.k.a. attach someone else's post to your own post</a> <a class="badge-wrapper  box" href="../../c/activitypub/s2s/7.html"><span class="badge-category-parent-bg" style="background-color: #0088CC;"></span><span class="badge-category-bg" style="background-color: #808281;"></span><span style="color: #FFFFFF" data-drop-close="true" class="badge-category clear-badge" title="This protocol is used to distribute activities between actors on different servers, tying them into the same social graph.">Server to Server</span></a>
  </div>
  <blockquote>
    I would suggest to send two activities: Announce a post and then Create a reply to that post. That way we don’t need any custom fields or actions. This pair ensures that all references/quotes in the Reply will be correctly understood by recipients: they will see exactly the same post as the “reposting with a quote” Actor sees. 
Client app (including Web site) seeing this pair of posts can show it as it wish…
  </blockquote>
</aside>
</p>
        </div>

        <meta itemprop='headline' content='Representing things in a VKontakte/Facebook-style social network?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="243.html">← previous page</a></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
