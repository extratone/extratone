<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Implementing Paginated Inbox Collections - Programming - SocialHub</title>
    <meta name="description" content="Hi All! 
I‚Äôve been enjoying reading through the AS/AP specs, and have started writing my own little project - I might be confident enough to publicise it here once it‚Äôs further developed. 
Sorry to drop a question as soo&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.0.beta2 - https://github.com/discourse/discourse version c39ab6c0ae3803b6a62501954ae40adb6b73d580">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/b7023860b3d7df97ea10ba3c7ab11cb046a77c7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1919.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://socialhub.activitypub.rocks","potentialAction":{"@type":"SearchAction","target":"https://socialhub.activitypub.rocks/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="SocialHub Search">

      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop" />
      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_5_969dd27459c19a0b7620746a3d179b86ef033d7a.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_3_f50bf2f225326f482d56e65e93f1f047d48417a9.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_8_e3f93470fef56ec97b63f77e16779e328baab8ea.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="8"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_4_8d506fd22b761a15044193a6d4ebda5f6bde2498.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Implementing Paginated Inbox Collections&#39;" href="1919.rss" />
    <meta property="og:site_name" content="SocialHub" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:url" content="https://socialhub.activitypub.rocks/t/implementing-paginated-inbox-collections/1919" />
<meta name="twitter:url" content="https://socialhub.activitypub.rocks/t/implementing-paginated-inbox-collections/1919" />
<meta property="og:title" content="Implementing Paginated Inbox Collections" />
<meta name="twitter:title" content="Implementing Paginated Inbox Collections" />
<meta property="og:description" content="Hi All!  I‚Äôve been enjoying reading through the AS/AP specs, and have started writing my own little project - I might be confident enough to publicise it here once it‚Äôs further developed.  Sorry to drop a question as soon as I join the community; I do plan on interacting with you folks in more than just this topic üòõ  When reading the specs, specifically the portions on inboxes and collections, I‚Äôve been having trouble figuring out how to make paginated collections when the under..." />
<meta name="twitter:description" content="Hi All!  I‚Äôve been enjoying reading through the AS/AP specs, and have started writing my own little project - I might be confident enough to publicise it here once it‚Äôs further developed.  Sorry to drop a question as soon as I join the community; I do plan on interacting with you folks in more than just this topic üòõ  When reading the specs, specifically the portions on inboxes and collections, I‚Äôve been having trouble figuring out how to make paginated collections when the under..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ‚ù§" />
<meta property="article:published_time" content="2021-07-07T17:08:35+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
<script src="https://socialhub.activitypub.rocks/theme-javascripts/3a68d4ddcab78e923b7c4169708a8f1deb79df66.js?__ws=socialhub.activitypub.rocks"></script>
    <header>
      <a href="https://socialhub.activitypub.rocks/">
          <img src="../../uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png" alt="SocialHub" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1919.html">Implementing Paginated Inbox Collections</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://socialhub.activitypub.rocks/c/programming/33" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #B3B5B4'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Programming</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/mag.html'><span itemprop='name'>mag</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1919.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-07-07T17:08:35Z' class='post-time'>
                July 7, 2021,  5:08pm
              </time>
              <meta itemprop='dateModified' content='2021-07-07T17:08:35Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi All!</p>
<p>I‚Äôve been enjoying reading through the AS/AP specs, and have started writing my own little project - I might be confident enough to publicise it here once it‚Äôs further developed.</p>
<p>Sorry to drop a question as soon as I join the community; I do plan on interacting with you folks in more than just this topic <img src="../../images/emoji/twitter/stuck_out_tongue.png@v=9" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>When reading the specs, specifically the portions on inboxes and collections, I‚Äôve been having trouble figuring out how to make paginated collections when the underlying collection is prone to change frequently.</p>
<p>From the <a href="https://www.w3.org/TR/activitypub/#inbox" rel="noopener nofollow ugc">ActivityPub spec</a>:</p>
<blockquote>
<p>The inbox is discovered through the <code>inbox</code> property of an actor‚Äôs profile. The <code>inbox</code> <em>MUST</em> be an  <code>OrderedCollection</code>.</p>
</blockquote>
<p>I think I understand this: when an authorised client <code>GET</code>s someone‚Äôs inbox URL, they‚Äôre sent back an <code>OrderedCollection</code> describing that someone‚Äôs inbox. If the content of their inbox is small enough, this response could include references to all of the items in someone‚Äôs inbox (or maybe it could even include all of the items), but I‚Äôm interested in the case where a person‚Äôs inbox is too large to include al of the references in a single response: the case where pagination is required.</p>
<p>Collections with pages can include the properties <code>first</code>, <code>current</code>, and <code>last</code>; the distinction between the first two confuses me.</p>
<p>From the <a href="https://www.w3.org/TR/activitystreams-vocabulary/" rel="noopener nofollow ugc">ActivityStreams vocabulary</a>:</p>
<blockquote>
<p><code>current</code>: Notes: In a paged <code>Collection</code> , indicates the page that contains the most recently updated member items.</p>
</blockquote>
<blockquote>
<p><code>first</code>: Notes: In a paged <code>Collection</code> , indicates the furthest preceeding page of items in the collection.</p>
</blockquote>
<p>In an <code>OrderedCollection</code> in reverse chronological order, are these properties different from one another? In my head, ‚Äúfurthest-preceeding‚Äù and ‚Äúcontains the most recently updated member items‚Äù can both mean two different things in this situation, and so both properties could mean either of:</p>
<ol>
<li>The provided reference will always point to the same page of items, as it was the ‚Äúnewest‚Äù/‚Äúyoungest‚Äù/‚Äúmost-recently-updated‚Äù page <em>at the time of your <code>GET</code> request to the inbox</em>;</li>
<li>The provided reference is a reference to content that may change over time, because it is a reference to the ‚Äúnewest‚Äù/etc. content <em>at the time of your <code>GET</code> request to the page</em>.</li>
</ol>
<p>I can think of two possibilities that seem sensible to me:</p>
<ul>
<li>
<code>first</code> and <code>current</code> both refer to <span class="hashtag">#2:</span> you can include both with the same value, or omit one;</li>
<li>
<code>first</code> refers to <span class="hashtag">#1</span>; <code>current</code> refers to <span class="hashtag">#2</span>.</li>
</ul>
<p>There are solutions for <span class="hashtag">#1</span> and <span class="hashtag">#2</span>, so really my issue is just down to what these properties are <em>meant</em> to represent. Are there solid examples of these properties in use that I haven‚Äôt come across?</p>
<p>Hopefully there‚Äôs enough possible discussion here to warrant this being a ‚Äútopic‚Äù - I‚Äôm brand new to Discourse, so I‚Äôm not really sure what I‚Äôm doing <img src="../../images/emoji/twitter/stuck_out_tongue.png@v=9" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
        </div>

        <meta itemprop='headline' content='Implementing Paginated Inbox Collections'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/weex.html'><span itemprop='name'>weex</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1919.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-07-08T18:10:54Z' class='post-time'>
                July 8, 2021,  6:10pm
              </time>
              <meta itemprop='dateModified' content='2021-07-08T18:10:54Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hey <a class="mention" href="../../u/mag.html">@mag</a>, Welcome and thank you for raising this question about the protocols! I‚Äôm trying to get acquainted with them as well, though I‚Äôm not developing anything against the spec currently.</p>
<p>As I look at OrderedCollection, I don‚Äôt see that the ordering property to be strictly specified so I think this may turn out to be implementation dependent. The most actively developed projects that support AP include Mastodon, Pleroma, PeerTube, and Pixelfed so if you‚Äôre looking for examples those would be good to look at.</p>
        </div>

        <meta itemprop='headline' content='Implementing Paginated Inbox Collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/mag.html'><span itemprop='name'>mag</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1919.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-07-10T00:48:38Z' class='post-time'>
                July 10, 2021, 12:48am
              </time>
              <meta itemprop='dateModified' content='2021-07-10T00:48:38Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks for the insight <a class="mention" href="../../u/weex.html">@weex</a>! <img src="../../images/emoji/twitter/slight_smile.png@v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>With regards to the specific ordering of reverse-chronological <code>OrderedCollections</code>, the <a href="https://www.w3.org/TR/activitypub/#collections" rel="noopener nofollow ugc">AP spec</a> has a note that seems to align with what you‚Äôre saying:</p>
<blockquote>
<p>What property is used to determine the reverse chronological order is intentionally left as an implementation detail. For example, many SQL-style databases use an incrementing integer as an identifier, which can be reasonably used for handling insertion order in most cases. In other databases, an insertion time timestamp may be preferred. What is used isn‚Äôt important, but the ordering of elements must remain intact, with newer items first. A property which changes regularly, such a ‚Äúlast updated‚Äù timestamp, should not be used.</p>
</blockquote>
<p>Having re-read this note, I think I‚Äôll be using row ID to sort my results - I was previously planning on using insertion time and hoping that not too many items were inserted in the same second <img src="../../images/emoji/twitter/stuck_out_tongue.png@v=9" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>Thanks also for pointing to some project names; I‚Äôll have a look at them in the next couple days and report back here if I find anything useful.</p>
        </div>

        <meta itemprop='headline' content='Implementing Paginated Inbox Collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
