<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Repost/share with quote a.k.a. attach someone else&#39;s post to your own post - #7 by grishka - Server to Server - SocialHub</title>
    <meta name="description" content="I thought I was going to be the first one to make these but as it turns out, Misskey already has this functionality, but it’s implemented in a weird way. Here’s the test post I made: https://misskey.io/notes/86wfb5uayv 
A&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.0.beta2 - https://github.com/discourse/discourse version c39ab6c0ae3803b6a62501954ae40adb6b73d580">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/b7023860b3d7df97ea10ba3c7ab11cb046a77c7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../659.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://socialhub.activitypub.rocks","potentialAction":{"@type":"SearchAction","target":"https://socialhub.activitypub.rocks/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="SocialHub Search">

      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop" />
      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_5_969dd27459c19a0b7620746a3d179b86ef033d7a.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_3_f50bf2f225326f482d56e65e93f1f047d48417a9.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_8_e3f93470fef56ec97b63f77e16779e328baab8ea.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="8"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_4_8d506fd22b761a15044193a6d4ebda5f6bde2498.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Repost/share with quote a.k.a. attach someone else&#39;s post to your own post&#39;" href="../659.rss" />
    <meta property="og:site_name" content="SocialHub" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:url" content="https://socialhub.activitypub.rocks/t/repost-share-with-quote-a-k-a-attach-someone-elses-post-to-your-own-post/659/7" />
<meta name="twitter:url" content="https://socialhub.activitypub.rocks/t/repost-share-with-quote-a-k-a-attach-someone-elses-post-to-your-own-post/659/7" />
<meta property="og:title" content="Repost/share with quote a.k.a. attach someone else&#39;s post to your own post" />
<meta name="twitter:title" content="Repost/share with quote a.k.a. attach someone else&#39;s post to your own post" />
<meta property="og:description" content="Yeah well, technically it’s valid JSON-LD and it would, of course, work with my implementation of JSON-LD processing algorithms, but further down the line I map ActivityPub types to Java classes for convenience and deserialize the whole thing into an object of that class. This can’t possibly work with a statically-typed language." />
<meta name="twitter:description" content="Yeah well, technically it’s valid JSON-LD and it would, of course, work with my implementation of JSON-LD processing algorithms, but further down the line I map ActivityPub types to Java classes for convenience and deserialize the whole thing into an object of that class. This can’t possibly work with a statically-typed language." />
<meta property="article:published_time" content="2020-05-06T11:32:09+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
<script src="https://socialhub.activitypub.rocks/theme-javascripts/3a68d4ddcab78e923b7c4169708a8f1deb79df66.js?__ws=socialhub.activitypub.rocks"></script>
    <header>
      <a href="https://socialhub.activitypub.rocks/">
          <img src="../../../uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png" alt="SocialHub" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../659.html">Repost/share with quote a.k.a. attach someone else&#39;s post to your own post</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../../c/activitypub.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #0088CC'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>ActivityPub</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../../c/activitypub/s2s/7.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #808281'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Server to Server</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-05-04T20:39:37Z' class='post-time'>
                May 4, 2020,  8:39pm
              </time>
              <meta itemprop='dateModified' content='2020-05-04T20:39:37Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I thought I was going to be the first one to make these but as it turns out, Misskey already has this functionality, but it’s implemented in a weird way. Here’s the test post I made: <a href="https://misskey.io/notes/86wfb5uayv" rel="nofollow noopener">https://misskey.io/notes/86wfb5uayv</a></p>
<p>And here’s it as an AP object:</p>
<pre><code class="lang-json">{
  "@context": [
    "https://www.w3.org/ns/activitystreams",
    "https://w3id.org/security/v1",
    {
      "Hashtag": "as:Hashtag"
    }
  ],
  "id": "https://misskey.io/notes/86wfb5uayv",
  "type": "Note",
  "attributedTo": "https://misskey.io/users/81qo6ts4l7",
  "summary": null,
  "content": "&lt;p&gt;&lt;span&gt;TIL that some fediverse software already allows reposts with quotes.&lt;br&gt;&lt;br&gt;RE: &lt;/span&gt;&lt;a href=\"https://friends.grishka.me/posts/12082\"&gt;https://friends.grishka.me/posts/12082&lt;/a&gt;&lt;/p&gt;",
  "_misskey_content": "TIL that some fediverse software already allows reposts with quotes.",
  "_misskey_quote": "https://friends.grishka.me/posts/12082",
  "quoteUrl": "https://friends.grishka.me/posts/12082",
  "published": "2020-05-04T19:10:39.442Z",
  "to": [
    "https://www.w3.org/ns/activitystreams#Public"
  ],
  "cc": [
    "https://misskey.io/users/81qo6ts4l7/followers"
  ],
  "inReplyTo": null,
  "attachment": [],
  "sensitive": false,
  "tag": []
}
</code></pre>
<p>As you see, it does two things:</p>
<ul>
<li>There’s the URL for the quoted post, but for some reason it’s in two different fields. Of course the <code>_misskey</code> ones are completely custom, but I can’t seem to figure out where <code>quoteUrl</code> comes from and what it’s used by — it’s not in the ActivityStreams vocabulary.</li>
<li>There’s also this URL in the content, presumably for backwards compatibility with Mastodon, Pleroma etc.</li>
</ul>
<p>Anyway, let’s figure out the best way to standardize these reposts.</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/yvolk.html'><span itemprop='name'>yvolk</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-05-05T12:48:26Z' class='post-time'>
                May 5, 2020, 12:48pm
              </time>
              <meta itemprop='dateModified' content='2020-05-05T12:48:26Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I would suggest to send two activities: Announce a post and then Create a reply to that post. That way we don’t need any custom fields or actions. This pair ensures that all references/quotes in the Reply will be correctly understood by recipients: they will see exactly the same post as the “reposting with a quote” Actor sees.<br>
Client app (including Web site) seeing this pair of posts can show it as it wish…</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../../representing-things-in-a-vkontakte-facebook-style-social-network/243/25.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://socialhub.activitypub.rocks/t/representing-things-in-a-vkontakte-facebook-style-social-network/243/25'>
                      <span itemprop='name'>Representing things in a VKontakte/Facebook-style social network?</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/nightpool.html'><span itemprop='name'>nightpool</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">

            <link itemprop="image" href="../../../uploads/default/original/1X/03c7f171d48ac6cfa2ae8498ab07a07f6d45ad55.png">

          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-05-06T00:22:18Z'>
              <time itemprop='dateModified' datetime='2020-05-06T00:22:48Z' class='post-time'>
                May 6, 2020, 12:22am
              </time>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I sat down to translate tumblr posts into an ActivityPub format a little while ago, and i settled on doing “reblog with note” this way as well, although for ease of client consumption, i combined both types into one activity:</p>
<pre><code class="lang-json">{
  "@context": "https://www.w3.org/ns/activitystreams",
  "type": ["Create", "Announce"],
  "actor": "https://example.com/users/nightpool",
  "id": "https://example.com/activity/my-reblog",
  "object": {
    "type": "Note",
    "id": "https://example.com/note/my-reblog"
    "content": "this is my reply note!",
    "inReplyTo": {
      "id": "https://example.com/note/first-in-trail",
      "type": "Note",
      "content": "the first note!",
      "attributedTo": "https://example.com/user/original-user"
    },
   },
   "origin": "https://example.com/activity/reblogged-from"
  }
</code></pre>
<p>This would translate into this UI:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../../uploads/default/original/1X/03c7f171d48ac6cfa2ae8498ab07a07f6d45ad55.png" data-download-href="https://socialhub.activitypub.rocks/uploads/default/03c7f171d48ac6cfa2ae8498ab07a07f6d45ad55" title="image"><img src="../../../uploads/default/optimized/1X/03c7f171d48ac6cfa2ae8498ab07a07f6d45ad55_2_517x252.png" alt="image" data-base62-sha1="xrO8kLEmSW0U9Ve6Qe1bmyRjJH" width="517" height="252" srcset="../../../uploads/default/optimized/1X/03c7f171d48ac6cfa2ae8498ab07a07f6d45ad55_2_517x252.png, ../../../uploads/default/optimized/1X/03c7f171d48ac6cfa2ae8498ab07a07f6d45ad55_2_775x378.png 1.5x, ../../../uploads/default/optimized/1X/03c7f171d48ac6cfa2ae8498ab07a07f6d45ad55_2_1034x504.png 2x" data-small-upload="https://socialhub.activitypub.rocks/uploads/default/optimized/1X/03c7f171d48ac6cfa2ae8498ab07a07f6d45ad55_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1316×644 68.4 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-05-06T02:12:19Z'>
              <time itemprop='dateModified' datetime='2020-05-06T02:13:34Z' class='post-time'>
                May 6, 2020,  2:13am
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="yvolk" data-post="2" data-topic="659">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/socialhub.activitypub.rocks/yvolk/40/310_2.png" class="avatar"> yvolk:</div>
<blockquote>
<p>I would suggest to send two activities: Announce a post and then Create a reply to that post.</p>
</blockquote>
</aside>
<p>How would software tell the difference between repost with quote as one action and announce/boost + reply as two distinct actions? What if there’s a network error and only one of the activities makes it to the other side?</p>
<aside class="quote group-mastodon quote-modified" data-username="nightpool" data-post="3" data-topic="659">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>“type”: [“Create”, “Announce”]</p>
</blockquote>
</aside>
<p>This is going to break many implementations, including mine <img src="../../../images/emoji/twitter/thinking.png@v=9" title=":thinking:" class="emoji" alt=":thinking:"><br>
What does Mastodon do when it receives such an activity?</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/nightpool.html'><span itemprop='name'>nightpool</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-05-06T02:39:35Z' class='post-time'>
                May 6, 2020,  2:39am
              </time>
              <meta itemprop='dateModified' content='2020-05-06T02:39:35Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="grishka" data-post="4" data-topic="659">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/socialhub.activitypub.rocks/grishka/40/196_2.png" class="avatar"> grishka:</div>
<blockquote>
<p>This is going to break many implementations, including mine <img src="../../../images/emoji/twitter/thinking.png@v=9" title=":thinking:" class="emoji" alt=":thinking:"></p>
</blockquote>
</aside>
<p>it shouldn’t break any spec compliant implementations, any JSON-LD value can be an array, unless it’s marked as a functional property.</p>
<aside class="quote no-group" data-username="grishka" data-post="4" data-topic="659">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/socialhub.activitypub.rocks/grishka/40/196_2.png" class="avatar"> grishka:</div>
<blockquote>
<p>What does Mastodon do when it receives such an activity?</p>
</blockquote>
</aside>
<p>I believe Mastodon currently parses it as a Create, taking the first value, but I’m writing the C2S side first so I haven’t tested it extensively yet.</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/yvolk.html'><span itemprop='name'>yvolk</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-05-06T07:38:16Z'>
              <time itemprop='dateModified' datetime='2020-05-06T07:39:28Z' class='post-time'>
                May 6, 2020,  7:39am
              </time>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="grishka" data-post="4" data-topic="659">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/socialhub.activitypub.rocks/grishka/40/196_2.png" class="avatar"> grishka:</div>
<blockquote>
<p>How would software tell the difference between repost with quote as one action and announce/boost + reply as two distinct actions? What if there’s a network error and only one of the activities makes it to the other side?</p>
</blockquote>
</aside>
<p>I see, actually you are thinking about some kind of a transaction, a composition of two activities sent in one network message.<br>
Interesting. But we should find out a general way to do this, and not inventing a new format for any new combination. E.g. simply send a collection of two (or more…) activities as one message…</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-05-06T11:32:09Z' class='post-time'>
                May 6, 2020, 11:32am
              </time>
              <meta itemprop='dateModified' content='2020-05-06T11:32:09Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote group-mastodon" data-username="nightpool" data-post="5" data-topic="659">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>it shouldn’t break any spec compliant implementations, any JSON-LD value can be an array, unless it’s marked as a functional property.</p>
</blockquote>
</aside>
<p>Yeah well, <em>technically</em> it’s valid JSON-LD and it would, of course, work with my implementation of JSON-LD processing algorithms, but further down the line I map ActivityPub types to Java classes for convenience and deserialize the whole thing into an object of that class. This can’t possibly work with a statically-typed language.</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../../about-smithereen/674/6.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://socialhub.activitypub.rocks/t/about-smithereen/674/6'>
                      <span itemprop='name'>About Smithereen</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/cjs.html'><span itemprop='name'>cjs</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-05-06T13:05:38Z' class='post-time'>
                May 6, 2020,  1:05pm
              </time>
              <meta itemprop='dateModified' content='2020-05-06T13:05:38Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I disagree. Go-fed’s approach was explicitly designed to handle use cases like this, where things can be of multiple types.</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/nightpool.html'><span itemprop='name'>nightpool</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-05-06T13:38:51Z'>
              <time itemprop='dateModified' datetime='2020-05-06T13:39:31Z' class='post-time'>
                May 6, 2020,  1:39pm
              </time>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="grishka" data-post="7" data-topic="659">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/socialhub.activitypub.rocks/grishka/40/196_2.png" class="avatar"> grishka:</div>
<blockquote>
<p>This can’t possibly work with a statically-typed language.</p>
</blockquote>
</aside>
<p>Actually, most statically-typed languages let values have multiple types. In Java, you could do this by having an object that implements both the Create and Announce interfaces.</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-05-06T14:35:46Z' class='post-time'>
                May 6, 2020,  2:35pm
              </time>
              <meta itemprop='dateModified' content='2020-05-06T14:35:46Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote group-mastodon" data-username="nightpool" data-post="9" data-topic="659">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../../user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>In Java, you could do this by having an object that implements both the Create and Announce interfaces.</p>
</blockquote>
</aside>
<p>Of course you can. I can as well map <code>[Create, Announce]</code> to an internal activity type like <code>Repost</code> which extends <code>Create</code>. My point was that all possible type combinations have to be known at compile time.</p>
<p>But then what use it is if you’re able to parse an activity but still don’t know what to do with it? I’m not making much sense with this. Sorry. Quarantine is taking its toll.</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/nightpool.html'><span itemprop='name'>nightpool</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-05-06T20:00:37Z'>
              <time itemprop='dateModified' datetime='2020-05-06T20:00:54Z' class='post-time'>
                May 6, 2020,  8:00pm
              </time>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>In Java, I might do something like this to access the different values:</p>
<pre><code class="lang-java">class Activity implements Create, Announce {
    Optional&lt;Create&gt; asCreate {
        if (this.typeIncludes('Create')) {
            return Optional.some(this);
        } else {
            return Optional.none();
        }
    }

    Optional&lt;Announce&gt; asAnnounce {
        if (this.typeIncludes('Announce')) {
            return Optional.some(this);
        } else {
            return Optional.none();
        }
    }
};

class Inbox {
    void handleActivity(Activity activity) {
        activity.asCreate().ifPresent(create =&gt; {
            create.getNote().doSomething();
        });

        activity.asAnnounce().ifPresent(announce =&gt; {
            announce.getObject().doSomething();
        });
    }
}
</code></pre>
<p>But, honestly, I probably wouldn’t bother with the different interfaces, considering that the only types in ActivityStreams that affect the properties objects are allowed to have are <code>Link</code>, <code>Object</code>, and <code>Activity</code>.</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/lain.html'><span itemprop='name'>lain</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-05-15T10:34:00Z' class='post-time'>
                May 15, 2020, 10:34am
              </time>
              <meta itemprop='dateModified' content='2020-05-15T10:34:00Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Seems a bit weird, to be honest. The object of the Announce is supposed to be the announced object, but here it is the newly created object, so i don’t think it works out too well, semantically.</p>
<p>Why not just add a “content” field to the “Announce”? Seems rather straightforward.</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">

            <link itemprop="image" href="../../../uploads/default/original/1X/bd823bafc20aad0aaa47733f62ea68eff7c32a88.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-05-15T12:47:03Z' class='post-time'>
                May 15, 2020, 12:47pm
              </time>
              <meta itemprop='dateModified' content='2020-05-15T12:47:03Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="lain" data-post="12" data-topic="659">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/socialhub.activitypub.rocks/lain/40/349_2.png" class="avatar"> lain:</div>
<blockquote>
<p>Why not just add a “content” field to the “Announce”? Seems rather straightforward.</p>
</blockquote>
</aside>
<p>Then implementations like Mastodon would display these as simple <s>retoots</s> boosts, losing the additional content. The way Misskey does it is actually rather smart in that Mastodon displays everything that’s in there, and Misskey itself strips the link and replaces it with its own richer UI.</p>
<p><img src="../../../uploads/default/original/1X/bd823bafc20aad0aaa47733f62ea68eff7c32a88.png" alt="image" data-base62-sha1="r2tgrfqKAgmJPo7g8qLnDXmY98k" width="607" height="223"></p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/nightpool.html'><span itemprop='name'>nightpool</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-05-15T13:20:30Z'>
              <time itemprop='dateModified' datetime='2020-05-15T14:00:19Z' class='post-time'>
                May 15, 2020,  2:00pm
              </time>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>the first implementation I had did use a content field on Announce, basically duplicating all of the properties a Note can have, but it felt like it was muddying the distinction between Objects and Activities, it led to a ton of special case processing and a lot of code like (attributedTo || actor) where I had to handle the complexities of processing both types of object. ultimately, I think using inReplyTo and Announce makes a lot more sense when considering the actual difference between reblog-with-note and reply-to-thread—the expected audience and context of the reply</p>
<p>So ultimately I decided on the Announced object here actually being your own post, which I think works well. in more thread-based forms of microblogging this would translate to replying to a thread and then boosting your own reply into your timeline, which is basically exactly what you’re doing semantically.</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/lain.html'><span itemprop='name'>lain</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-05-15T13:43:53Z'>
              <time itemprop='dateModified' datetime='2020-05-15T13:46:54Z' class='post-time'>
                May 15, 2020,  1:46pm
              </time>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Well, that’s a hack. We can not keep adding compatibility hacks for every basic feature.</p>
<p>To elaborate a bit, Mastodon is not an abandoned project, they should be expected to code support for or accept contributions for new, sensible features.</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="3" />
           <span class='post-likes'>3 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/rinpatch.html'><span itemprop='name'>rinpatch</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-05-15T16:56:05Z' class='post-time'>
                May 15, 2020,  4:56pm
              </time>
              <meta itemprop='dateModified' content='2020-05-15T16:56:05Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>How would one determine if this is a “reblog with note” or a reply when having just the object? For example if someone I don’t follow posts a “reblog with note” and then someone I do follow replies to it (putting the object uri into <code>inReplyTo</code> as every implementation does now), my server will fetch the object and assume it’s a reply, since it doesn’t have the activity type context</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/yvolk.html'><span itemprop='name'>yvolk</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../659.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-05-17T04:06:18Z'>
              <time itemprop='dateModified' datetime='2020-05-19T16:15:13Z' class='post-time'>
                May 19, 2020,  4:15pm
              </time>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote group-mastodon" data-username="nightpool" data-post="14" data-topic="659">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>the first implementation I had did use a content field on Announce, basically duplicating all of the properties a Note can have, but it felt like it was muddying the distinction between Objects and Activities, it led to a ton of special case processing and a lot of code like (attributedTo || actor) where I had to handle the complexities of processing both types of object.</p>
</blockquote>
</aside>
<p>I thought about this approach another time, and it looks like adding your “quote / notes” (“content” in terms of ActivityPub) directly to the “Announce” (Activity) object is the best way to implement “Repost with a quote”:</p>
<ol>
<li>
<p>“content” (like “name” and “summary”) in the Announce (activity) object is not a hack, but normal property. E.g. Activity Vocabulary spec shows summary (which also could serve as a comment to announced note!) in the “Announce” activity example <a href="https://www.w3.org/TR/activitystreams-vocabulary/#dfn-announce" rel="nofollow noopener">https://www.w3.org/TR/activitystreams-vocabulary/#dfn-announce</a></p>
</li>
<li>
<p>Semantically “announcing” that “quoted” object (and not OUR own notes on that) IS the activity that is supposed to be used here. From spec: “Indicates that the  <code>actor</code>  is calling the  <code>target</code> 's attention the  <code>object</code>.” - And we really mean that! We call attention and make our comment / quote…</p>
</li>
</ol>
<p>We are NOT “replying” to that “someone else’s post”. Instead, we create new discussion context, for the new audience.</p>
<ol start="3">
<li>Both our comments/quotes (in the Announce activity’s name, summary and content properties) AND the “someone else’s post” are contained in ONE activity / message sent over the network / between systems. This is really important in order not to lose context of our “quotes” AND simply for a target audience to be able to see that “someone else’s post”.</li>
</ol>
<p>?!</p>
        </div>

        <meta itemprop='headline' content='Repost/share with quote a.k.a. attach someone else&#39;s post to your own post'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
