<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Verify_credentials -- I&#39;m doing something wrong here - Mastodon - SocialHub</title>
    <meta name="description" content="(Is there a better place to ask questions about compliance?) 
I’m testing how Tusky responds to kepi, and something seems to be wrong with the way kepi implements verify_credentials. kepi’s response in the presenting cas&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.0.beta2 - https://github.com/discourse/discourse version c39ab6c0ae3803b6a62501954ae40adb6b73d580">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/b7023860b3d7df97ea10ba3c7ab11cb046a77c7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="440.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://socialhub.activitypub.rocks","potentialAction":{"@type":"SearchAction","target":"https://socialhub.activitypub.rocks/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="SocialHub Search">

      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop" />
      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_5_969dd27459c19a0b7620746a3d179b86ef033d7a.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_3_f50bf2f225326f482d56e65e93f1f047d48417a9.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_8_e3f93470fef56ec97b63f77e16779e328baab8ea.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="8"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_4_8d506fd22b761a15044193a6d4ebda5f6bde2498.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Verify_credentials -- I&#39;m doing something wrong here&#39;" href="440.rss" />
    <meta property="og:site_name" content="SocialHub" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:url" content="https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440" />
<meta name="twitter:url" content="https://socialhub.activitypub.rocks/t/verify-credentials-im-doing-something-wrong-here/440" />
<meta property="og:title" content="Verify_credentials -- I&#39;m doing something wrong here" />
<meta name="twitter:title" content="Verify_credentials -- I&#39;m doing something wrong here" />
<meta property="og:description" content="(Is there a better place to ask questions about compliance?)  I’m testing how Tusky responds to kepi, and something seems to be wrong with the way kepi implements verify_credentials. kepi’s response in the presenting case is  {   &quot;id&quot;: &quot;@marnanel&quot;,   &quot;username&quot;: &quot;marnanel&quot;,   &quot;acct&quot;: &quot;@marnanel@sandy-heath.thurman.org.uk&quot;,   &quot;display_name&quot;: &quot;marnanel&quot;,   &quot;locked&quot;: false,   &quot;avatar&quot;: &quot;https://sandy-heath.thurman.org.uk/static/defaults/avatar_9.jpg&quot;,   &quot;header&quot;: &quot;https://sandy-heath.thurman.org.uk..." />
<meta name="twitter:description" content="(Is there a better place to ask questions about compliance?)  I’m testing how Tusky responds to kepi, and something seems to be wrong with the way kepi implements verify_credentials. kepi’s response in the presenting case is  {   &quot;id&quot;: &quot;@marnanel&quot;,   &quot;username&quot;: &quot;marnanel&quot;,   &quot;acct&quot;: &quot;@marnanel@sandy-heath.thurman.org.uk&quot;,   &quot;display_name&quot;: &quot;marnanel&quot;,   &quot;locked&quot;: false,   &quot;avatar&quot;: &quot;https://sandy-heath.thurman.org.uk/static/defaults/avatar_9.jpg&quot;,   &quot;header&quot;: &quot;https://sandy-heath.thurman.org.uk..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="4 ❤" />
<meta property="article:published_time" content="2019-12-28T16:42:50+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
<script src="https://socialhub.activitypub.rocks/theme-javascripts/3a68d4ddcab78e923b7c4169708a8f1deb79df66.js?__ws=socialhub.activitypub.rocks"></script>
    <header>
      <a href="https://socialhub.activitypub.rocks/">
          <img src="../../uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png" alt="SocialHub" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="440.html">Verify_credentials -- I&#39;m doing something wrong here</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/software/index.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Software</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/software/mastodon/17.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #2b90d9'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Mastodon</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/marnanel.html'><span itemprop='name'>marnanel</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="440.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-12-28T16:42:50Z'>
              <time itemprop='dateModified' datetime='2019-12-28T17:40:07Z' class='post-time'>
                December 28, 2019,  5:40pm
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>(Is there a better place to ask questions about compliance?)</p>
<p>I’m testing how Tusky responds to kepi, and something seems to be wrong with the way kepi implements <code>verify_credentials</code>. kepi’s response in the presenting case is</p>
<pre><code class="lang-auto">{
  "id": "@marnanel",
  "username": "marnanel",
  "acct": "@marnanel@sandy-heath.thurman.org.uk",
  "display_name": "marnanel",
  "locked": false,
  "avatar": "https://sandy-heath.thurman.org.uk/static/defaults/avatar_9.jpg",
  "header": "https://sandy-heath.thurman.org.uk/static/defaults/header.jpg",
  "created_at": "2019-12-25T23:51:03.882335Z",
  "followers_count": 0,
  "following_count": 0,
  "statuses_count": 0,
  "note": "",
  "url": "https://sandy-heath.thurman.org.uk/users/marnanel",
  "avatar_static": "https://sandy-heath.thurman.org.uk/static/defaults/avatar_9.jpg",
  "header_static": "https://sandy-heath.thurman.org.uk/static/defaults/header.jpg",
  "moved_to": null,
  "fields": [],
  "emojis": [],
  "bot": false,
  "source": {
    "privacy": "public",
    "sensitive": false,
    "note": "",
    "language": "en"
  }
}
</code></pre>
<p>whereupon Tusky crashes. <code>adb logcat</code> shows the exception</p>
<pre><code class="lang-auto">java.lang.NullPointerException: Attempt to invoke interface method 'int java.lang.CharSequence.length()' on a null object reference
    at com.keylesspalace.tusky.entity.Account.getName(SourceFile:1)
</code></pre>
<p><a href="https://github.com/tuskyapp/Tusky/blob/2994af70916343765097b0d39597172177fd62d8/app/src/main/java/com/keylesspalace/tusky/entity/Account.kt" rel="nofollow noopener">which is here</a> and is checking <code>display_name</code> for zero length. But <code>display_name</code> is not null in what I sent. Is there something else obviously wrong in what I’m sending, or is this something I should be asking the Tusky devs about?</p>
        </div>

        <meta itemprop='headline' content='Verify_credentials -- I&#39;m doing something wrong here'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/nightpool.html'><span itemprop='name'>nightpool</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="440.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-28T17:39:38Z' class='post-time'>
                December 28, 2019,  5:39pm
              </time>
              <meta itemprop='dateModified' content='2019-12-28T17:39:38Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think this topic would be better for the mastodon forum, since it’s masto API specific. for now I’m going to move it to the mastodon category on this forum, but it might be better suited for another forum. I don’t want to give the impression that the mastodon API is a “de-facto” client to server standard, since it’s very poorly suited for that purpose, and is very tightly coupled to the specifics of mastodon’s design.</p>
        </div>

        <meta itemprop='headline' content='Verify_credentials -- I&#39;m doing something wrong here'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/trwnh.html'><span itemprop='name'>trwnh</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="440.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-31T03:07:01Z' class='post-time'>
                December 31, 2019,  3:07am
              </time>
              <meta itemprop='dateModified' content='2019-12-31T03:07:01Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>one thing i’m noticing is that <code>acct</code> should not include the leading @ symbol. the acct: URI takes the form of <code>username</code> for local users and <code>username@domain</code> for remote users.</p>
<p>the other thing is that the <code>id</code> is a string that does not correspond to a number. you’ll have to check with tusky devs about this (and i suspect other clients), but it wouldn’t be the first time client devs have made technically incorrect assumptions here. ID is always a string, and although it is cast from a number, it is not guaranteed to be one; however, mastodon uses 64-bit integers as base10, and pleroma uses 128-bit flake ids as base62. since these two softwares are the primary providers of the mastodon api, there haven’t been any counterexamples to break the assumption that id should at least represent a number (for sortability purposes, e.g.).</p>
        </div>

        <meta itemprop='headline' content='Verify_credentials -- I&#39;m doing something wrong here'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularités'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/marnanel.html'><span itemprop='name'>marnanel</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="440.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-09T20:30:26Z' class='post-time'>
                January 9, 2020,  8:30pm
              </time>
              <meta itemprop='dateModified' content='2020-01-09T20:30:26Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>thank you! that’s very helpful.</p>
        </div>

        <meta itemprop='headline' content='Verify_credentials -- I&#39;m doing something wrong here'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
