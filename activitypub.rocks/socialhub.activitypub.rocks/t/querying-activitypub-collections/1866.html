<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Querying ActivityPub collections - Server to Server - SocialHub</title>
    <meta name="description" content="It‚Äôs me again with my efforts to extend collections. This is somewhat of a continuation of the discussion started in the #fep-400e topic, but I feel like it warrants having a topic (and at some point a FEP) of its own. 
S&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.0.beta2 - https://github.com/discourse/discourse version c39ab6c0ae3803b6a62501954ae40adb6b73d580">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/b7023860b3d7df97ea10ba3c7ab11cb046a77c7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1866.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://socialhub.activitypub.rocks","potentialAction":{"@type":"SearchAction","target":"https://socialhub.activitypub.rocks/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="SocialHub Search">

      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop" />
      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_5_969dd27459c19a0b7620746a3d179b86ef033d7a.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_3_f50bf2f225326f482d56e65e93f1f047d48417a9.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_8_e3f93470fef56ec97b63f77e16779e328baab8ea.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="8"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_4_8d506fd22b761a15044193a6d4ebda5f6bde2498.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Querying ActivityPub collections&#39;" href="1866.rss" />
    <meta property="og:site_name" content="SocialHub" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:url" content="https://socialhub.activitypub.rocks/t/querying-activitypub-collections/1866" />
<meta name="twitter:url" content="https://socialhub.activitypub.rocks/t/querying-activitypub-collections/1866" />
<meta property="og:title" content="Querying ActivityPub collections" />
<meta name="twitter:title" content="Querying ActivityPub collections" />
<meta property="og:description" content="It‚Äôs me again with my efforts to extend collections. This is somewhat of a continuation of the discussion started in the #fep-400e topic, but I feel like it warrants having a topic (and at some point a FEP) of its own.  Sometimes, it‚Äôs useful to have the ability to issue a single request to ask a remote instance ‚Äúdoes this collection contain this object?‚Äù for an authoritative answer. This can be useful both for collection synchronization and to enforce bilateral relationships.  Example #1. There..." />
<meta name="twitter:description" content="It‚Äôs me again with my efforts to extend collections. This is somewhat of a continuation of the discussion started in the #fep-400e topic, but I feel like it warrants having a topic (and at some point a FEP) of its own.  Sometimes, it‚Äôs useful to have the ability to issue a single request to ask a remote instance ‚Äúdoes this collection contain this object?‚Äù for an authoritative answer. This can be useful both for collection synchronization and to enforce bilateral relationships.  Example #1. There..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="5 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="6 ‚ù§" />
<meta property="article:published_time" content="2021-06-19T02:18:13+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
<script src="https://socialhub.activitypub.rocks/theme-javascripts/3a68d4ddcab78e923b7c4169708a8f1deb79df66.js?__ws=socialhub.activitypub.rocks"></script>
    <header>
      <a href="https://socialhub.activitypub.rocks/">
          <img src="../../uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png" alt="SocialHub" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1866.html">Querying ActivityPub collections</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/activitypub.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #0088CC'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>ActivityPub</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/activitypub/s2s/7.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #808281'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Server to Server</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-19T02:18:13Z'>
              <time itemprop='dateModified' datetime='2021-06-19T02:20:13Z' class='post-time'>
                June 19, 2021,  2:20am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>It‚Äôs me again with my efforts to extend collections. This is somewhat of a continuation of the discussion started in the <a class="hashtag" href="../../tag/fep-400e.html">#<span>fep-400e</span></a> topic, but I feel like it warrants having a topic (and at some point a FEP) of its own.</p>
<p>Sometimes, it‚Äôs useful to have the ability to issue a single request to ask a remote instance ‚Äúdoes this collection contain this object?‚Äù for an authoritative answer. This can be useful both for collection synchronization and to enforce bilateral relationships.</p>
<p>Example <span class="hashtag">#1</span>. There‚Äôs a wall post made by a user from instance A on the wall of a group on instance B (in accordance to my <a class="hashtag" href="../../tag/fep-400e.html">#<span>fep-400e</span></a>). The user from instance A mentions a user from instance C in a reply to that post. The instance C fetches both the post and the reply to display them to its local user in a notification. <em>How does instance C verify that instance B has approved that parent post?</em></p>
<p>Example <span class="hashtag">#2</span>. A user from instance A and a user from instance B add each other as friends. They each have a ‚Äúfriends‚Äù collection that contains all such connections. Each sends an Add activity to their followers to keep friend lists in sync across instances. <em>How do recipients verify that this relationship was actually established on the other end if they only follow one of the users?</em></p>
<p>Currently, there‚Äôs no non-ugly way to do this ‚Äî the only way you can get something out of a collection is by going through its pages. I‚Äôd like to discuss an easy way to query a collection, for example, using a well-defined query parameter or an HTTP header. You‚Äôd send a request to the collection ID URL, specifying the ID of the object you‚Äôre checking for, and the response would be one of three discernible states:</p>
<ul>
<li>The collection contains the object</li>
<li>The collection does not contain the object</li>
<li>Inconclusive ‚Äî the server doesn‚Äôt support responding to these requests</li>
</ul>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../introducing-fedidb-devtools-for-activitypub/660/27.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://socialhub.activitypub.rocks/t/introducing-fedidb-devtools-for-activitypub/660/27'>
                      <span itemprop='name'>Introducing FediDB - DevTools for ActivityPub</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/naturzukunft.html'><span itemprop='name'>naturzukunft</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-19T05:28:49Z' class='post-time'>
                June 19, 2021,  5:28am
              </time>
              <meta itemprop='dateModified' content='2021-06-19T05:28:49Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>‚Äúusing a well-defined query parameter or an HTTP header.‚Äù This sounds to me like the beginning of a new query language. To query triples, there is already the standard SPQRQL.</p>
<p>I have a similar problem. An actor sets a task as an object of an activity and the actor that processes this task needs to be able to query for open tasks, for example.</p>
<p>I had thought about limiting this to collections, but decided to query the whole storage. (This was also easier for me at first.) However, I could still filter this by collection. Certainly relevant for some UseCases. However, there are probably use cases where a query across collections is desired.</p>
<p>My ActivityPub C2S interface has an endpoint that accepts SPQRQL queries and returns the result as SPQRQL bindings.</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/naturzukunft.html'><span itemprop='name'>naturzukunft</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-19T05:37:31Z' class='post-time'>
                June 19, 2021,  5:37am
              </time>
              <meta itemprop='dateModified' content='2021-06-19T05:37:31Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This became exciting for me because I assigned the task of an actor A, who created the task, to another actor B. So as:to and wf:assigned was ‚ÄòActor B‚Äô and no Actor B is my processing service.</p>
<p>But if I only store references in the inbox of Actor B instead of duplicating all activities and objects in my database, then I can‚Äôt query the activities and objects at all. I would have to send a query to distributed creator servers ;-(</p>
<p>Also a cache will be weird, as my cache will be organised by AP server rather than by inbox of a specific actor.</p>
<p>The question of whether an inbox contains objects or references is left to each implementation. Both have advantages and disadvantages.<br>
Copying all references into my database somehow doesn‚Äôt feel like liked data.</p>
<p><a class="mention" href="../../u/cjs.html">@cjs</a> has noted in another task that an inbox contains only references, not objects. (if I remember correctly)</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-19T13:11:25Z'>
              <time itemprop='dateModified' datetime='2021-06-19T16:07:18Z' class='post-time'>
                June 19, 2021,  4:07pm
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="naturzukunft" data-post="2" data-topic="1866">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/naturzukunft/40/983_2.png" class="avatar"> naturzukunft:</div>
<blockquote>
<p>This sounds to me like the beginning of a new query language.</p>
</blockquote>
</aside>
<p>No. Absolutely, categorically not. I mean for this to do one thing and one thing only. And it should be trivial to implement. It definitely shouldn‚Äôt require a library, or a lengthy spec with hundreds of unit tests. I‚Äôve already had enough ‚Äúfun‚Äù implementing JSON-LD processing algorithms. Except making a bug in a query language implementation also has a great potential of having security consequences.</p>
<p>So, no, I don‚Äôt want a query language. I don‚Äôt want this to be much extensible, if at all.</p>
<aside class="quote no-group" data-username="naturzukunft" data-post="3" data-topic="1866">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/naturzukunft/40/983_2.png" class="avatar"> naturzukunft:</div>
<blockquote>
<p>The question of whether an inbox contains objects or references is left to each implementation. Both have advantages and disadvantages.<br>
Copying all references into my database somehow doesn‚Äôt feel like liked data.</p>
</blockquote>
</aside>
<p>And now you‚Äôve met the exact reason why I think c2s can‚Äôt be made practical. You have to make way too many requests to way too many servers to render something like a news feed. You‚Äôd need to fetch your inbox, filter the activities you want, issue a request for potentially each actor you encounter‚Ä¶ Now imagine doing that on a crappy EDGE connection. Good luck.</p>
<p>If you used a domain-specific client API instead, like Mastodon does and like I‚Äôm planning to do, that would‚Äôve been a single request, with response containing everything you need, and the server itself handling the rest behind the scenes.</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/aschrijver.html'><span itemprop='name'>aschrijver</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-21T05:59:44Z'>
              <time itemprop='dateModified' datetime='2021-06-21T06:14:02Z' class='post-time'>
                June 21, 2021,  6:14am
              </time>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="naturzukunft" data-post="2" data-topic="1866">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/naturzukunft/40/983_2.png" class="avatar"> naturzukunft:</div>
<blockquote>
<p>‚Äúusing a well-defined query parameter or an HTTP header.‚Äù This sounds to me like the beginning of a new query language. To query triples, there is already the standard SPQRQL.</p>
</blockquote>
</aside>
<p>I don‚Äôt know the applicability of this, but just wanted to mention the <a href="https://m-ld.org/">Meld protocol</a> here (project will be presenting at <a class="mention" href="../../u/j8ter.html">@j8ter</a> <a href="../save-the-date-semantic-web-and-linked-data-ngi-event-june-21/1849.html">NGI Linked Data webinar</a> at 9.30 CEST).</p>
<blockquote>
<p>At the heart of <strong>m-ld</strong> is a decentralised protocol for distributing live state among <em>clones</em> . Using <strong>m-ld</strong> , every app instance has read-write access to the shared information via its local clone, with zero network latency. Changes to the information are propagated to all other app instances, so they are all <em>eventually consistent</em> .</p>
</blockquote>
<p>The <a href="https://spec.m-ld.org/">specification</a> includes a query language <a href="https://json-rql.org/#json-rql">json-rql</a> that is is a superset of JSON-LD, designed for query expressions.</p>
<blockquote>
<ol>
<li>It‚Äôs <a href="https://json-rql.org/json.org">JSON</a>: straightforward to construct in code, manipulate and serialize, and also to <em>constrain</em> . Use standard JSON tooling such as <a href="https://json-rql.org/schema.json">JSON schema</a> to limit your API to the queries that your back-end has been designed and tested for.</li>
<li>It‚Äôs <a href="https://www.w3.org/TR/sparql11-query/">SPARQL</a>: <em>in context</em> , all queries can be translated to the W3C standard language for directed, labeled graph data. This means that your API can be extended to cover future query requirements, without breaking changes.</li>
</ol>
</blockquote>
<p>With Meld, apps use one of  available <a href="https://m-ld.org/doc/#messaging">Message-layer adapters</a> to synchronise clones of ‚Äòdomain‚Äô data. It seems like this layer may as well be an ActivityPub adapter. A <a href="https://m-ld.org/doc/#platforms">Java platform implementation</a> is apparently in the works.</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/gsvarovsky.html'><span itemprop='name'>gsvarovsky</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-21T11:30:32Z'>
              <time itemprop='dateModified' datetime='2021-06-21T15:00:38Z' class='post-time'>
                June 21, 2021,  3:00pm
              </time>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks for the shout Arnold, and for posting the links. I don‚Äôt know enough about ActivityPub to really get the details of the use-case here but I‚Äôll make some comments about json-rql and <strong>m-ld</strong> in case they‚Äôre of interest.</p>
<p>Judging by this:</p>
<blockquote>
<p>No. Absolutely, categorically not [a new query language]</p>
</blockquote>
<p>I think, a little contrarily, that json-rql might be something interesting to you. Its principle is very simple: just encode SPARQL in JSON. But the key contribution is that this not only makes it easy to embed, serialise and parse, but also you can easily document which parts of it your service supports ‚Äì even if it‚Äôs very little. There‚Äôs some narrative about this on the <a href="https://github.com/gsvarovsky/json-rql/wiki" rel="noopener nofollow ugc">project wiki</a>.</p>
<p>Anyway happy to discuss further if you like the idea. There‚Äôs a <a href="https://github.com/gsvarovsky/json-rql-java" rel="noopener nofollow ugc">Java library</a> available, which has not had much love for a while but would be easy to re-invigorate.</p>
<p>In principle json-rql is agnostic about whether you‚Äôre on the client or the server (it‚Äôs just a serialisation of a language), so it should lend itself fine to having the application and the deployment making decisions about <em>where</em> to run the query. (Not really different to SPARQL in this regard ‚Äì just maybe a bit easier to work with, especially if the only query supported is really simple.)</p>
<p><strong>m-ld</strong> is a bit more of a machine with moving parts of its own. In effect it‚Äôs like a local database, with a json-rql API, which incidentally is very inclined to clone itself all over the place. <img src="../../images/emoji/twitter/rabbit.png@v=9" title=":rabbit:" class="emoji" alt=":rabbit:"> <img src="../../images/emoji/twitter/laughing.png@v=9" title=":laughing:" class="emoji" alt=":laughing:"></p>
<p>The Java engine for <strong>m-ld</strong> does exist, but needs quite a bit of work. I was maybe too hopeful last year for how much I would be able to do <img src="../../images/emoji/twitter/slight_smile.png@v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"> . Use-cases would help me prioritise, for sure!</p>
<aside class="quote no-group" data-username="aschrijver" data-post="5" data-topic="1866">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/aschrijver/40/278_2.png" class="avatar"> aschrijver:</div>
<blockquote>
<p>With Meld, apps use one of available Message-layer adapters to synchronise clones of ‚Äòdomain‚Äô data.</p>
</blockquote>
</aside>
<p><s>With regard to this, yes, an ActivityPub adapter might be a great thing for me to have.</s></p>
<p><em>Edit: Having read a little more, I think this sentence does not really make sense  ‚Äì I was assuming some peer-to-peer messaging going on, but I think ActivityPub is strongly client-server and a standard for activity publication (duh), agnostic to low-level message distribution. Let me know if I‚Äôm mistaken.</em></p>
<p>I‚Äôve just added a socket .io adapter (still incubating ‚Äì I‚Äôll update when it‚Äôs baked), but I still don‚Äôt have a great story for a fully decentralised messaging approach (even though <strong>m-ld</strong> itself is uninterested in servers or central coordination).</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/naturzukunft.html'><span itemprop='name'>naturzukunft</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-21T13:21:34Z' class='post-time'>
                June 21, 2021,  1:21pm
              </time>
              <meta itemprop='dateModified' content='2021-06-21T13:21:34Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>My ActivityPub (AP) implementation uses RDF4J as RDF store. AP has as UseCase in the ClientToServer part (C2S) A Client App sends an Activity to the outbox of an Actor.<br>
E.g. a webApp is calling the C2S API of an AP implementation and sends an activity (including object(s)) to an actors outbox.<br>
An activity can have recipients like a mail. to,cc, bto, bcc,‚Ä¶<br>
And the Server2SServer part defines the delivery to the recipient. Which means the recipient gets the reference to the sent activity in his inbox. See this picture: <a href="../../../activitypub.rocks/index.html">https://activitypub.rocks/</a></p>
<p>Now I have created a possibility to query the outbox of an actor with sparql. this works well. But if there are queries on the inbox, it becomes difficult, because there are only references. Hence the idea of managing a copy of all activities and objects. and aschrivjer mentioned meld as a possible solution. but i see a lot of problems or challanges <img src="../../images/emoji/twitter/wink.png@v=9" title=":wink:" class="emoji" alt=":wink:"><br>
Because it‚Äôs not that one copy. it‚Äôs a copy of some activities of different outboxes on different servers.</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-21T13:40:00Z' class='post-time'>
                June 21, 2021,  1:40pm
              </time>
              <meta itemprop='dateModified' content='2021-06-21T13:40:00Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="gsvarovsky" data-post="7" data-topic="1866">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/gsvarovsky/40/1232_2.png" class="avatar"> gsvarovsky:</div>
<blockquote>
<p>Anyway happy to discuss further if you like the idea. There‚Äôs a <a href="https://github.com/gsvarovsky/json-rql-java" rel="noopener nofollow ugc">Java library</a> available, which has not had much love for a while but would be easy to re-invigorate.</p>
</blockquote>
</aside>
<p>If it needs a library, it‚Äôs not simple enough for my needs.</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-21T13:42:30Z' class='post-time'>
                June 21, 2021,  1:42pm
              </time>
              <meta itemprop='dateModified' content='2021-06-21T13:42:30Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../u/marius.html">@marius</a> showed me a draft of a draft of his FEP that might be relevant to this discussion, and it <strong>is</strong> simple enough and doesn‚Äôt try its hardest to be SQL:</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://metalhead.club/@mariusor/106439251787831931">
  <header class="source">
      <img src="../../uploads/default/original/1X/fd156fff11fc042ed3ec6355c45f37e207e35839.ico" class="site-icon" width="45" height="48">

      <a href="https://metalhead.club/@mariusor/106439251787831931" target="_blank" rel="noopener nofollow ugc" title="08:21PM - 19 June 2021">\m/ Metalhead.club \m/ ‚Äì 19 Jun 21</a>
  </header>

  <article class="onebox-body">
    <img src="../../uploads/default/original/2X/b/b7a4512e9c26596948175adeea8899db3de7a9c9.png" class="thumbnail onebox-avatar" width="120" height="120">

<h3><a href="https://metalhead.club/@mariusor/106439251787831931" target="_blank" rel="noopener nofollow ugc">Marius Orcsik (@mariusor@metalhead.club)</a></h3>

  <p>@grishka@mastodon.social @activitypub@gup.pe 

I've started formalizing what I'm using for filtering on #fedbox into a FEP[1]. 

&gt; I‚Äôd like to discuss an easy way to query a collection, for example, using a well-defined query parameter or an HTTP...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/gsvarovsky.html'><span itemprop='name'>gsvarovsky</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-21T14:04:22Z'>
              <time itemprop='dateModified' datetime='2021-06-21T14:05:40Z' class='post-time'>
                June 21, 2021,  2:05pm
              </time>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Ah! Then in retrospect I should not have mentioned it. The library is only for convenience if you want to translate from json-rql to SPARQL or otherwise handle arbitrarily complex json-rql. Which I do ‚Äì but you probably don‚Äôt. The language is just simple way of expressing SPARQL in JSON. That‚Äôs it ‚Äì you can interpret the JSON yourself of course, especially if it‚Äôs only a small query.</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-21T14:22:45Z' class='post-time'>
                June 21, 2021,  2:22pm
              </time>
              <meta itemprop='dateModified' content='2021-06-21T14:22:45Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>That‚Äôs still way too complex for what I‚Äôm trying to achieve. Marius‚Äôs solution is also kinda complex in that it allows querying on arbitrary fields (on which I might not have indexes), but at least doesn‚Äôt support joining, sorting, or aggregation.</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Sebastian.html'><span itemprop='name'>Sebastian</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-22T14:52:03Z'>
              <time itemprop='dateModified' datetime='2021-06-22T14:52:20Z' class='post-time'>
                June 22, 2021,  2:52pm
              </time>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Well, I came to the conclusion that we can use a subset of JSON-Schema or better JSON-LD Framing for filtering and querying.</p>
<p>I agree with the conclusion in this article:</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://davidwbarratt.com/node/46">
  <header class="source">
      <img src="https://davidwbarratt.com/core/themes/olivero/favicon.ico" class="site-icon" width="32" height="32">

      <a href="https://davidwbarratt.com/node/46" target="_blank" rel="noopener nofollow ugc" title="12:51PM - 26 December 2020">david w barratt ‚Äì 26 Dec 20</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:657/500;"><img src="https://files.davidwbarratt.com/styles/max_2600x2600/s3/2020-12/Construction_workers_framing_posts_and_trusses_for_the_Palace_of_Varied_Industries_at_the_1904_World%27s_Fair.jpg?itok=oXzPGiwh" class="thumbnail" width="657" height="500"></div>

<h3><a href="https://davidwbarratt.com/node/46" target="_blank" rel="noopener nofollow ugc">Using JSON-LD Framing as a Query Language</a></h3>

  <p>I've been thinking about how app developers will interact with silk floss. Having a triplestore where apps can save any data in a structured format seems great on the surface, but presents a privacy nightmare.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Especially because ‚ÄúFraming‚Äù is well specified in the underlying specs.</p>
<p>See<br>
<a href="https://www.w3.org/TR/json-ld11-framing/#matching-on-properties" class="onebox" target="_blank" rel="noopener nofollow ugc">https://www.w3.org/TR/json-ld11-framing/#matching-on-properties</a></p>
<p>Opinions?</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/naturzukunft.html'><span itemprop='name'>naturzukunft</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-22T18:13:46Z' class='post-time'>
                June 22, 2021,  6:13pm
              </time>
              <meta itemprop='dateModified' content='2021-06-22T18:13:46Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think it‚Äôs a shame when applications that use a triple store have to struggle to provide the activityPub API. I don‚Äôt like this json-ld thing and for me it makes more trouble then fun.<br>
To me, activityPub sounds more and more like an RDF - json bridge.</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/marius.html'><span itemprop='name'>marius</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-23T08:57:49Z'>
              <time itemprop='dateModified' datetime='2021-06-23T09:02:55Z' class='post-time'>
                June 23, 2021,  9:02am
              </time>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../u/grishka.html">@grishka</a> I didn‚Äôt reply on Mastodon, but there is a way to <a href="https://metalhead.club/@mariusor/106408252333293353" rel="noopener nofollow ugc">automatically populate columns</a> in postgresql/sqlite based on extracting data from Json, so maybe that can allow you to modify your model to include more columns/indexes.</p>
<p>For my own application, in the case of relational databases storage, I‚Äôm thinking of using dual filtering:</p>
<ol>
<li>Filtering based on existing columns in the db, which can take advantage of indexes and such (ie, generating an SQL query)</li>
<li>Filtering the remaining criteria by iterating over the returned set/collection and further removing what doesn‚Äôt match.</li>
</ol>
<p>Also I have an sqlite example for the basic tables I‚Äôm using in fedbox using <a href="https://github.com/go-ap/fedbox/blob/63d6bd9e99d399bb49c0969fc5aa72f229e35f23/storage/sqlite/init.go#L7" rel="noopener nofollow ugc">this approach</a>. This is work in progress, so some things (like indexes) are missing.</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Sebastian.html'><span itemprop='name'>Sebastian</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-23T10:41:41Z'>
              <time itemprop='dateModified' datetime='2021-06-23T10:42:24Z' class='post-time'>
                June 23, 2021, 10:42am
              </time>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hey <a class="mention" href="../../u/marius.html">@marius</a> ‚Äì</p>
<p>thanks for posting and also thank you for the FEP.<br>
Would like to get your opinion on the above posted article.</p>
<p>ActivityPub is JSON LD and</p>
<blockquote>
<p>JSON-LD Framing allows developers to query by example and force a specific tree layout to a JSON-LD document.<br>
<a href="https://www.w3.org/TR/json-ld11-framing" rel="noopener nofollow ugc">https://www.w3.org/TR/json-ld11-framing</a></p>
</blockquote>
<p>I mean, it is maybe not as easy-to-use as the FEP but we can basically use it to query anything, also nested and it‚Äôs already a W3C recommendation.</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/marius.html'><span itemprop='name'>marius</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-23T15:44:54Z' class='post-time'>
                June 23, 2021,  3:44pm
              </time>
              <meta itemprop='dateModified' content='2021-06-23T15:44:54Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi <a class="mention" href="../../u/sebastian.html">@Sebastian</a>, it‚Äôs the first time I‚Äôve seen this document, I wasn‚Äôt aware that there‚Äôs an attempt at producing a querying specification for JSON-LD.</p>
<p>On a (very) quick glance, seems a step into the direction of GraphQL, which I personally don‚Äôt like. I consider it to be overkill for this specific use case, querying an ActivityPub server‚Äôs collection. It might be useful if there are libraries that seamlessly integrate the framing querying mechanism on top of some specific RDF storage, but I wouldn‚Äôt try to implement something like this from scratch on my own.</p>
<p>I think most developers in the AP space are pretending pretty hard that the -LD part is absent from the documents they process and treat everything like plain JSON. I know I do. <img src="../../images/emoji/twitter/smiley.png@v=9" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>PS. The FEP draft-draft  is pretty far from being ready. I haven‚Äôt finished putting on paper all the details. I offered it to Grishka as he wanted ideas for something he can use immediately and it‚Äôs probably sufficient for that purpose.</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-26T02:43:21Z' class='post-time'>
                June 26, 2021,  2:43am
              </time>
              <meta itemprop='dateModified' content='2021-06-26T02:43:21Z'>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="marius" data-post="17" data-topic="1866">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/marius/40/230_2.png" class="avatar"> marius:</div>
<blockquote>
<p>I think most developers in the AP space are pretending pretty hard that the -LD part is absent from the documents they process and treat everything like plain JSON. I know I do. <img src="../../images/emoji/twitter/smiley.png@v=9" title=":smiley:" class="emoji" alt=":smiley:"></p>
</blockquote>
</aside>
<p>Since I do actually run JSON-LD processing algorithms on everything I receive to convert it to my ‚Äúlocal context‚Äù, it‚Äôs been at least 2 times when someone forgot to add <code>"https://w3id.org/security/v1"</code> to their <code>@context</code> causing my code to not see the public key of an actor.</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/aschrijver.html'><span itemprop='name'>aschrijver</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-26T03:28:32Z' class='post-time'>
                June 26, 2021,  3:28am
              </time>
              <meta itemprop='dateModified' content='2021-06-26T03:28:32Z'>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I didn‚Äôt verify if/how handled, but this is where <a class="mention" href="../../u/dansup.html">@dansup</a>‚Äôs <a href="http://fedidb.org">fedidb.org</a> and <a class="mention" href="../../u/cjs.html">@cjs</a> <a href="https://test.activitypub.dev/">testsuite</a> can be very useful in conformance reporting. We should encourage app devs to run these.</p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../introducing-fedidb-devtools-for-activitypub/660/27.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://socialhub.activitypub.rocks/t/introducing-fedidb-devtools-for-activitypub/660/27'>
                      <span itemprop='name'>Introducing FediDB - DevTools for ActivityPub</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/aschrijver.html'><span itemprop='name'>aschrijver</span></a>
            
              split this topic 
          </span>

          <link itemprop="mainEntityOfPage" href="1866.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-27T12:47:54Z'>
              <time itemprop='dateModified' datetime='2021-06-27T12:47:54Z' class='post-time'>
                June 27, 2021, 12:47pm
              </time>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>5 posts were merged into an existing topic: <a href="../introducing-fedidb-devtools-for-activitypub/660/27.html">Introducing FediDB - DevTools for ActivityPub</a></p>
        </div>

        <meta itemprop='headline' content='Querying ActivityPub collections'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
