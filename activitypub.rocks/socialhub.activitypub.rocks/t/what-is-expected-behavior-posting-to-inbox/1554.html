<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>What is Expected Behavior POSTing to Inbox? - Mastodon - SocialHub</title>
    <meta name="description" content="This is more of a ‚ÄúServer to Server to Client‚Äù question, but this feels like the best place for it. 
I‚Äôm trying to implement very basic ActivityPub features in my Little Library (link to activitypub branch in GitHub) app&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.0.beta2 - https://github.com/discourse/discourse version c39ab6c0ae3803b6a62501954ae40adb6b73d580">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/b7023860b3d7df97ea10ba3c7ab11cb046a77c7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1554.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://socialhub.activitypub.rocks","potentialAction":{"@type":"SearchAction","target":"https://socialhub.activitypub.rocks/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="SocialHub Search">

      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop" />
      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_5_969dd27459c19a0b7620746a3d179b86ef033d7a.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_3_f50bf2f225326f482d56e65e93f1f047d48417a9.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_8_e3f93470fef56ec97b63f77e16779e328baab8ea.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="8"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_4_8d506fd22b761a15044193a6d4ebda5f6bde2498.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;What is Expected Behavior POSTing to Inbox?&#39;" href="1554.rss" />
    <meta property="og:site_name" content="SocialHub" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:url" content="https://socialhub.activitypub.rocks/t/what-is-expected-behavior-posting-to-inbox/1554" />
<meta name="twitter:url" content="https://socialhub.activitypub.rocks/t/what-is-expected-behavior-posting-to-inbox/1554" />
<meta property="og:title" content="What is Expected Behavior POSTing to Inbox?" />
<meta name="twitter:title" content="What is Expected Behavior POSTing to Inbox?" />
<meta property="og:description" content="This is more of a ‚ÄúServer to Server to Client‚Äù question, but this feels like the best place for it.  I‚Äôm trying to implement very basic ActivityPub features in my Little Library (link to activitypub branch in GitHub) app that allows other accounts to Follow it so they can get updates in their timeline when a book is added or removed. So far, I have succeeded in Accepting incoming Follow requests and removing followers on Undo{Follow} and Delete activities, but I‚Äôm not sure if I‚Äôm sending my Crea..." />
<meta name="twitter:description" content="This is more of a ‚ÄúServer to Server to Client‚Äù question, but this feels like the best place for it.  I‚Äôm trying to implement very basic ActivityPub features in my Little Library (link to activitypub branch in GitHub) app that allows other accounts to Follow it so they can get updates in their timeline when a book is added or removed. So far, I have succeeded in Accepting incoming Follow requests and removing followers on Undo{Follow} and Delete activities, but I‚Äôm not sure if I‚Äôm sending my Crea..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 ‚ù§" />
<meta property="article:published_time" content="2021-04-01T23:28:40+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
<script src="https://socialhub.activitypub.rocks/theme-javascripts/3a68d4ddcab78e923b7c4169708a8f1deb79df66.js?__ws=socialhub.activitypub.rocks"></script>
    <header>
      <a href="https://socialhub.activitypub.rocks/">
          <img src="../../uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png" alt="SocialHub" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1554.html">What is Expected Behavior POSTing to Inbox?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/software/index.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Software</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/software/mastodon/17.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #2b90d9'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Mastodon</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Alamantus.html'><span itemprop='name'>Alamantus</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1554.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-04-01T23:28:40Z'>
              <time itemprop='dateModified' datetime='2021-04-02T14:45:22Z' class='post-time'>
                April 2, 2021,  2:45pm
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This is more of a ‚ÄúServer to Server to Client‚Äù question, but this feels like the best place for it.</p>
<p>I‚Äôm trying to implement very basic ActivityPub features in my <a href="https://github.com/Alamantus/little-library/tree/activitypub" rel="noopener nofollow ugc">Little Library</a> (link to <code>activitypub</code> branch in GitHub) app that allows other accounts to <code>Follow</code> it so they can get updates in their timeline when a book is added or removed. So far, I have succeeded in <code>Accept</code>ing incoming <code>Follow</code> requests and removing followers on <code>Undo{Follow}</code> and <code>Delete</code> activities, but I‚Äôm not sure if I‚Äôm sending my <code>Create</code> activities correctly because when I send it to the follower (my Mastodon account), it does not appear to show up in my Mastodon timeline at all.</p>
<p>The actual process involves running through a queue of followers and sending them the activity, but here are the most relevant lines of code in GitHub:</p>
<ul>
<li>
<a href="https://github.com/Alamantus/little-library/blob/74d6c55c244a6acb12583cb5b03e1936c0de9e5e/server.js#L363-L400" rel="noopener nofollow ugc">createActivity method</a> (generates the <code>Create{Note}</code> activity that is sent)</li>
<li>
<a href="https://github.com/Alamantus/little-library/blob/74d6c55c244a6acb12583cb5b03e1936c0de9e5e/server.js#L402-L433" rel="noopener nofollow ugc">sendActivity method</a> (actually <code>POST</code>s the activity to the target inbox)</li>
</ul>
<p>I‚Äôm not receiving any errors or anything after sending to my Mastodon inbox, but it‚Äôs not showing on my timeline like other messages. Am I missing something required to get it to show up in the follower‚Äôs timeline?</p>
        </div>

        <meta itemprop='headline' content='What is Expected Behavior POSTing to Inbox?'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/nightpool.html'><span itemprop='name'>nightpool</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1554.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-04-02T14:45:14Z' class='post-time'>
                April 2, 2021,  2:45pm
              </time>
              <meta itemprop='dateModified' content='2021-04-02T14:45:14Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I‚Äôm not seeing anything obviously incorrect here, you‚Äôll have to look at the mastodon server logs for more information</p>
        </div>

        <meta itemprop='headline' content='What is Expected Behavior POSTing to Inbox?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Alamantus.html'><span itemprop='name'>Alamantus</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1554.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-04-02T17:30:12Z' class='post-time'>
                April 2, 2021,  5:30pm
              </time>
              <meta itemprop='dateModified' content='2021-04-02T17:30:12Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Really? Well that‚Äôs slightly comforting‚Ä¶ I don‚Äôt need to include the inbox I‚Äôm sending to in the <code>to</code> or <code>cc</code> or <code>bcc</code> field or anything like that? Would it help/hurt if I did?</p>
<p>I can‚Äôt easily look at the logs because I‚Äôm testing using live instances I don‚Äôt own like cybre.space and toot.cafe, but I guess I‚Äôll have to figure out a good way to set one up to test with huh?</p>
        </div>

        <meta itemprop='headline' content='What is Expected Behavior POSTing to Inbox?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/nightpool.html'><span itemprop='name'>nightpool</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1554.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-04-02T17:41:55Z'>
              <time itemprop='dateModified' datetime='2021-04-02T17:42:22Z' class='post-time'>
                April 2, 2021,  5:42pm
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>happy to look into the <a href="http://cybre.space">cybre.space</a> logs for you when I get a second <img src="../../images/emoji/twitter/stuck_out_tongue.png@v=9" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>I <em>think</em> the thing you did with cc: followers should be sufficient? I‚Äôd have to look in more detail though.</p>
        </div>

        <meta itemprop='headline' content='What is Expected Behavior POSTing to Inbox?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Alamantus.html'><span itemprop='name'>Alamantus</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1554.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-04-02T19:18:52Z'>
              <time itemprop='dateModified' datetime='2021-04-02T19:19:12Z' class='post-time'>
                April 2, 2021,  7:19pm
              </time>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Oh dang if you get a chance and you‚Äôre ok with it, it would be awesome if you could check the logs! The activities would be coming from <code>https://ap2.library.alamantus.com/activitypub/actor</code> and being sent to whatever the inbox is for <code>@Alamantus@cybre.space</code> is.</p>
        </div>

        <meta itemprop='headline' content='What is Expected Behavior POSTing to Inbox?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
