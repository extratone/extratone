<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Problems POSTing to Mastodon inbox</title>
    <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801</link>
    <description>Hi,

Following the Instructions in [How to implement a basic ActivityPub server](https://blog.joinmastodon.org/2018/06/how-to-implement-a-basic-activitypub-server/), I tried to POST a response to a Mastodon post from my own server.

The thing is: It does not show up, although I am getting a postive HTTP response (202 Accepted) and I am trying to figure out why. Perhaps someone here can give me a hint what is going on.

This is the kind of request I am making:

```
POST https://mastodon.social/inbox
Host: mastodon.social
Date: Mon, 13 Jul 2020 18:33:11 GMT
Signature: keyId=&quot;https://angelo.veltens.org/profile/actor#main-key&quot;,headers=&quot;(request-target) host date&quot;,signature=&quot;Q2n8kP3kqfqjP3FVhWwLQ/tqSSnRw5QYuNgodXzLM98fykRmp3eIvQJajOaAKgpMxlbeajFsbS8AjOQqX/mw4dcQnoYMRvlNxEwwmVGXxqIcuhjSqEdDScTCZhoNcI6yDthq0BwR3nUvd5uHhpsQ7nPYw6eOzxVQMXUSx6R95gAVwYh7cILmqE6/wUhduskcblNoFPsQUt1e9mEFYB1QR6QTN5d1MXmOvtV1Ze/VdTMmMpx3GuMklmtbOYtsqyfurBYPBYP2uYTxYCI7LzH8YpaD0uL+AdAV45ArUKvH8o6nhV2ZcPVUiuBrS5XVPMLdmgB2QRV85K9SE4KHlJWutQ==&quot;

{
  &quot;@context&quot;: &quot;https://www.w3.org/ns/activitystreams&quot;,

  &quot;id&quot;: &quot;https://angelo.veltens.org/public/toots/hello-solid#create&quot;,
  &quot;type&quot;: &quot;Create&quot;,
  &quot;actor&quot;: &quot;https://angelo.veltens.org/profile/actor&quot;,

  &quot;object&quot;: {
    &quot;id&quot;: &quot;https://angelo.veltens.org/public/toots/hello-solid#note&quot;,
    &quot;type&quot;: &quot;Note&quot;,
    &quot;published&quot;: &quot;2020-07-13T20:33:10+0200&quot;,
    &quot;attributedTo&quot;: &quot;https://angelo.veltens.org/profile/actor&quot;,
    &quot;inReplyTo&quot;: &quot;https://mastodon.social/@Gargron/100254678717223630&quot;,
    &quot;content&quot;: &quot;&lt;p&gt;Hello again from Solid&lt;/p&gt;&quot;,
    &quot;to&quot;: &quot;https://www.w3.org/ns/activitystreams#Public&quot;
  }
}
```

And this is the response:

```
HTTP/1.1 202 Accepted
Date: Mon, 13 Jul 2020 18:33:13 GMT
Content-Type: text/html
Transfer-Encoding: chunked
Connection: keep-alive
Server: Mastodon
X-Frame-Options: DENY
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Set-Cookie: _mkra_stck=postgres%3A1594665198.514459; path=/; max-age=10; expires=Mon, 13 Jul 2020 18:33:23 GMT; HttpOnly
Vary: Accept-Encoding
Cache-Control: no-cache
Content-Security-Policy: base-uri &#39;none&#39;; default-src &#39;none&#39;; frame-ancestors &#39;none&#39;; font-src &#39;self&#39; https://static-cdn.mastodon.social; img-src &#39;self&#39; https: data: blob: https://static-cdn.mastodon.social; style-src &#39;self&#39; https://static-cdn.mastodon.social &#39;nonce-PoTtEgRXnAWfIn/QUIV9qg==&#39;; media-src &#39;self&#39; https: data: https://static-cdn.mastodon.social; frame-src &#39;self&#39; https:; manifest-src &#39;self&#39; https://static-cdn.mastodon.social; connect-src &#39;self&#39; data: blob: https://static-cdn.mastodon.social https://files.mastodon.social wss://mastodon.social; script-src &#39;self&#39; https://static-cdn.mastodon.social; child-src &#39;self&#39; blob: https://static-cdn.mastodon.social; worker-src &#39;self&#39; blob: https://static-cdn.mastodon.social
X-Request-Id: ddcbf0ea-4af9-4dd9-be57-1d8c6c8265c9
X-Runtime: 0.029216

&lt;Response body is empty&gt;

Response code: 202 (Accepted); Time: 109ms; Content length: 0 bytes
```

If I mess up the `Signature` header deliberately I am getting `401 (Unauthorized)`, so I guess my signature is fine.

What else could be wrong or what reasons exist, that the post does not show up?

Thank you very much for your help.</description>
    
    <lastBuildDate>Tue, 15 Sep 2020 03:22:59 +0000</lastBuildDate>
    <category>Server to Server</category>
    <atom:link href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[MediaFormat]]></dc:creator>
        <description><![CDATA[
            <p>I ran into this object id <span class="hashtag">#fragment</span> problem as well. It seems because of some URL normalization,  Mastodon will remove the fragment, and drop any additional posts with different fragments (because they become the same url).</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/23">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/23</link>
        <pubDate>Thu, 10 Sep 2020 13:17:59 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-23</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[cjs]]></dc:creator>
        <description><![CDATA[
            <aside class="quote group-mastodon" data-username="nightpool" data-post="21" data-topic="801">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>sorry, i had just updated my post at the same time as you posted to clarify mastodon’s implementation vs my general position on the spec!</p>
</blockquote>
</aside>
<p>Gotcha! Thanks. I should have double checked before logging off last night &amp; saved you the trouble.</p>
<p>I don’t mean to continue the derail. If I can summarize, it sounds like the conclusion is that “using JSON-LD framing may cause some federation problems right now (for various software), but is a tractable problem with a solution that could be provided for the future”. Feel free to correct me.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/22">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/22</link>
        <pubDate>Fri, 17 Jul 2020 06:41:01 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-22</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[nightpool]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="cjs" data-post="20" data-topic="801">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/cjs/40/35_2.png" class="avatar"> cjs:</div>
<blockquote>
<p>Is this JSON-LD processing something that Mastodon does?</p>
</blockquote>
</aside>
<p>sorry, i had just updated my post at the same time as you posted to clarify mastodon’s implementation vs my general position on the spec!</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/21">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/21</link>
        <pubDate>Thu, 16 Jul 2020 20:35:47 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-21</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[cjs]]></dc:creator>
        <description><![CDATA[
            <aside class="quote group-mastodon" data-username="nightpool" data-post="19" data-topic="801">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/nightpool/40/36_2.png" class="avatar"> nightpool:</div>
<blockquote>
<p>All you need to do is keep track, when deserializing, of the different “id” nodes, and build a hashmap to them—or even just keep a single pointer to the id you’re looking for. It’s not going to be a performance bottleneck in most applications.</p>
</blockquote>
</aside>
<p>Is this JSON-LD processing something that Mastodon does?</p>
<p>I know go-fed does not do JSON-LD processing at runtime, which means it simply assumes performing a GET request to an IRI will yield an ActivityStreams payload that has that identifier as its root object.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/20">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/20</link>
        <pubDate>Thu, 16 Jul 2020 20:34:50 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-20</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[nightpool]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="vpzom" data-post="16" data-topic="801" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/letter_avatar_proxy/v4/letter/v/a698b9/40.png" class="avatar"> vpzom:</div>
<blockquote>
<p>I don’t think fragments offer any information about where to actually find the object unless the implementation walks every node looking for a matching string</p>
</blockquote>
</aside>
<p>All you need to do is keep track, when deserializing, of the different “id” nodes, and build a hashmap to them—or even just keep a single pointer to the id you’re looking for. It’s not going to be a performance bottleneck in most applications.</p>
<p>(Mastodon does not currently do this, but we’re very flexible about whether implementations want to send us the activity or the object, and tend to treat them interchangeably, so i don’t think we’d run into any problems here)</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/19">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/19</link>
        <pubDate>Thu, 16 Jul 2020 20:30:35 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-19</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[vpzom]]></dc:creator>
        <description><![CDATA[
            <p>That just looks like tree traversal with extra steps</p>
<p>Yes, technically ActivityStreams is JSON-LD, but very few implementations would actually accept any of the alternative forms</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/18">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/18</link>
        <pubDate>Thu, 16 Jul 2020 12:44:40 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-18</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[aveltens]]></dc:creator>
        <description><![CDATA[
            <p>That’s not true, and actually ony of the (hard to see <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/thinking.png?v=9" title=":thinking:" class="emoji" alt=":thinking:"> ) benefits of JSON-LD</p>
<p>Proper framing solves the problem:</p>
<p><a href="https://json-ld.org/playground/#startTab=tab-framed&amp;json-ld=https%3A%2F%2Fangelo.veltens.org%2Fpublic%2Ftoots%2Fhello-solid%23note&amp;frame=%7B%22%40context%22%3A%22https%3A%2F%2Fwww.w3.org%2Fns%2Factivitystreams%22%2C%22id%22%3A%22https%3A%2F%2Fangelo.veltens.org%2Fpublic%2Ftoots%2Fhello-solid%23note%22%7D&amp;context=%7B%7D" class="onebox" target="_blank" rel="nofollow noopener">https://json-ld.org/playground/#startTab=tab-framed&amp;json-ld=https%3A%2F%2Fangelo.veltens.org%2Fpublic%2Ftoots%2Fhello-solid%23note&amp;frame={"%40context"%3A"https%3A%2F%2Fwww.w3.org%2Fns%2Factivitystreams"%2C"id"%3A"https%3A%2F%2Fangelo.veltens.org%2Fpublic%2Ftoots%2Fhello-solid%23note"}&amp;context={}</a></p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/17">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/17</link>
        <pubDate>Thu, 16 Jul 2020 06:23:34 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-17</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[vpzom]]></dc:creator>
        <description><![CDATA[
            <p>I don’t think fragments offer any information about where to actually find the object unless the implementation walks every node looking for a matching string</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/16">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/16</link>
        <pubDate>Thu, 16 Jul 2020 01:26:06 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-16</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[nightpool]]></dc:creator>
        <description><![CDATA[
            <aside class="quote group-smithereen" data-username="grishka" data-post="13" data-topic="801">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/grishka/40/196_2.png" class="avatar"> grishka:</div>
<blockquote>
<p>Feels to me like that’s not a good thing. These are expected to be two distinct URLs — one that returns the <code>Note</code> wrapped in <code>Create</code> , and another one that returns the <code>Note</code> by itself.</p>
</blockquote>
</aside>
<p>I don’t think this is absolutely required—mastodon had a <code>#activity</code> URL for a long time. Since the network as a whole already uses this same behavior widely for <code>#main-key</code>, I can’t see where the harm would be in allowing it to be used here as well</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/15">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/15</link>
        <pubDate>Wed, 15 Jul 2020 20:39:58 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-15</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[nightpool]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="aveltens" data-post="10" data-topic="801">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/aveltens/40/333_2.png" class="avatar"> aveltens:</div>
<blockquote>
<p>Or did it work, because mastodon.online already knew about <code>@angelo@angelo.veltens.org</code> , because I did the search there before, but I did not do that on mastodon.social (due lack of account there).</p>
</blockquote>
</aside>
<p><a class="mention" href="/u/aveltens">@aveltens</a> yes, this is certainly the reason! Mastodon will not try to (or need to) resolve your account again if it already knows about it</p>
<p>My guess is that the webfinger -&gt; URL code is slightly less strict about the <code>Accept</code> header, because it already knows it’s looking for an AS2 document.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/14">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/14</link>
        <pubDate>Wed, 15 Jul 2020 20:26:49 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-14</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[grishka]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="aveltens" data-post="12" data-topic="801">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/aveltens/40/333_2.png" class="avatar"> aveltens:</div>
<blockquote>
<p>Of course the client will resolve the document URL <code>https://angelo.veltens.org/public/toots/hello-solid</code> but both resources are described in that document.</p>
</blockquote>
</aside>
<p>Feels to me like that’s not a good thing. These are expected to be two distinct URLs — one that returns the <code>Note</code> wrapped in <code>Create</code>, and another one that returns the <code>Note</code> by itself.</p>
<p>See for yourself how Mastodon does it. Try sending a GET request with <code>Accept: application/activity+json</code> to these URLs:<br>
<code>https://mastodon.social/users/Gargron/statuses/104517499488193307/activity</code><br>
<code>https://mastodon.social/users/Gargron/statuses/104517499488193307</code></p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/13">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/13</link>
        <pubDate>Wed, 15 Jul 2020 19:35:54 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-13</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[aveltens]]></dc:creator>
        <description><![CDATA[
            <p>Both URIs are permanent. Of course the client will resolve the document URL <code>https://angelo.veltens.org/public/toots/hello-solid</code> but both resources are described in that document.</p>
<p>I guess the problem is, that mastodon.social could not get a JSON-LD representation of the actor, while mastodon.online already had one cached from the webfinger search. Although this still does not explain how it could retrieve the actor during the search.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/12">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/12</link>
        <pubDate>Wed, 15 Jul 2020 19:19:31 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-12</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[grishka]]></dc:creator>
        <description><![CDATA[
            <p>The reason might also be that your IDs aren’t permanent, as in, they contain a <code>#fragment</code>. Posts and their corresponding Create activities are supposed to be <em>resolvable</em> — which means one should be able to send a GET request to the ID URL and get the object back. This can’t be done with an URL that contains a fragment as the fragment is not a part of the HTTP exchange, it’s processed on the client.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/11">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/11</link>
        <pubDate>Wed, 15 Jul 2020 19:00:28 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-11</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[aveltens]]></dc:creator>
        <description><![CDATA[
            <p>Ok, I just tried something else: I responded to a post of my account on mastodon.online and it worked!</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://socialhub.activitypub.rocks/uploads/default/original/1X/ee2965807be9c8aefa1f4b02d1f3347815ed5ecf.png" data-download-href="https://socialhub.activitypub.rocks/uploads/default/ee2965807be9c8aefa1f4b02d1f3347815ed5ecf" title="mastodon-post"><img src="https://socialhub.activitypub.rocks/uploads/default/optimized/1X/ee2965807be9c8aefa1f4b02d1f3347815ed5ecf_2_690x290.png" alt="mastodon-post" data-base62-sha1="xYSkqKWUoDuelfxqIKoCuHC5H3h" width="690" height="290" srcset="https://socialhub.activitypub.rocks/uploads/default/optimized/1X/ee2965807be9c8aefa1f4b02d1f3347815ed5ecf_2_690x290.png, https://socialhub.activitypub.rocks/uploads/default/optimized/1X/ee2965807be9c8aefa1f4b02d1f3347815ed5ecf_2_1035x435.png 1.5x, https://socialhub.activitypub.rocks/uploads/default/original/1X/ee2965807be9c8aefa1f4b02d1f3347815ed5ecf.png 2x" data-small-upload="https://socialhub.activitypub.rocks/uploads/default/optimized/1X/ee2965807be9c8aefa1f4b02d1f3347815ed5ecf_2_10x10.png"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">mastodon-post</span><span class="informations">1314×554 51.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
<p>I wonder why. Might mastodon.social and mastodon.online behave differently?</p>
<p>Or did it work, because mastodon.online already knew about <code>@angelo@angelo.veltens.org</code>, because I did the search there before, but I did not do that on mastodon.social (due lack of account there).</p>
<p>Lucky that it worked, but still confused <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/confused.png?v=9" title=":confused:" class="emoji" alt=":confused:"></p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/10">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/10</link>
        <pubDate>Tue, 14 Jul 2020 15:52:03 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-10</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[aveltens]]></dc:creator>
        <description><![CDATA[
            <p>Right, the actor has the same issue with <code>profile</code>. I did not think about that, because I actually was able to find it on mastodon using <code>angelo@angelo.veltens.org</code> and felt safe.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://socialhub.activitypub.rocks/uploads/default/original/1X/02b1bb71f869a336f60a31b02b75aeb8b1cd033e.png" data-download-href="https://socialhub.activitypub.rocks/uploads/default/02b1bb71f869a336f60a31b02b75aeb8b1cd033e" title="solid-mastodon"><img src="https://socialhub.activitypub.rocks/uploads/default/optimized/1X/02b1bb71f869a336f60a31b02b75aeb8b1cd033e_2_690x163.png" alt="solid-mastodon" data-base62-sha1="nPK9CSugIZ7JDK6B8l2167aQ3k" width="690" height="163" srcset="https://socialhub.activitypub.rocks/uploads/default/optimized/1X/02b1bb71f869a336f60a31b02b75aeb8b1cd033e_2_690x163.png, https://socialhub.activitypub.rocks/uploads/default/optimized/1X/02b1bb71f869a336f60a31b02b75aeb8b1cd033e_2_1035x244.png 1.5x, https://socialhub.activitypub.rocks/uploads/default/optimized/1X/02b1bb71f869a336f60a31b02b75aeb8b1cd033e_2_1380x326.png 2x" data-small-upload="https://socialhub.activitypub.rocks/uploads/default/optimized/1X/02b1bb71f869a336f60a31b02b75aeb8b1cd033e_2_10x10.png"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">solid-mastodon</span><span class="informations">1786×424 44.7 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
<p>But you are right, the actual actor URL does <strong>not</strong> give a result. This probably needs <a href="https://github.com/solid/node-solid-server/issues/943" rel="nofollow noopener">a fix on Node Solid Server</a>.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/9">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/9</link>
        <pubDate>Tue, 14 Jul 2020 15:43:24 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-9</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[nightpool]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="aveltens" data-post="5" data-topic="801">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/aveltens/40/333_2.png" class="avatar"> aveltens:</div>
<blockquote>
<p>JSON-LD without profile is working:</p>
</blockquote>
</aside>
<p>My guess is that the actor profile is being served with the same server, correct? Mastodon needs to be able to fetch your actor’s profile before it can attribute any posts to it, so if neither activity+json or ld+json with profile are responded to then that will cause a failure. I would suggest using mastodon’s “search box” as a debugging tool—put the URL of your actor into the search box, and if a profile comes up successfully, you can check off that step</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/8">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/8</link>
        <pubDate>Tue, 14 Jul 2020 13:08:36 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-8</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[nightpool]]></dc:creator>
        <description><![CDATA[
            <p>Mastodon does not return 202 if the signature is valid, although we would be well within our rights to per the spec. But for HTTP signatures specifically we always process those synchronously and return a 401 with a specific error reason. Like the spec says, we return 202 if we accept the payload for further asynchronous processing, regardless of whether that processing succeeds or not. (since it’s asynchronous, there’s no way to know)</p>
<p>(If you read the actual issue you linked, you’d know that this is the case, since it concludes by saying "We know now that 202 is okay in terms of signature)</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/7">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/7</link>
        <pubDate>Tue, 14 Jul 2020 13:04:32 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-7</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[Sebastian]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>so I guess my signature is fine.</p>
</blockquote>
<p>Unfortunately probably not.<br>
A known bug in mastodon is that signature errors return <code>202</code> !<br>
e.g. <a href="https://github.com/snarfed/bridgy-fed/issues/16">https://github.com/snarfed/bridgy-fed/issues/16</a></p>
<p>I also had this error when I followed the instructions.<br>
What I can offer you is an undocumented 245 lines nodeJS snippet where the folder name says “worked” but without guarantees <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"></p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/6">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/6</link>
        <pubDate>Tue, 14 Jul 2020 11:56:22 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-6</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[aveltens]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="cjs" data-post="4" data-topic="801">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/cjs/40/35_2.png" class="avatar"> cjs:</div>
<blockquote>
<p><code>curl https://angelo.veltens.org/public/toots/hello-solid#note -H"Accept: application/ld+json;</code></p>
</blockquote>
</aside>
<p>JSON-LD without profile is working:</p>
<pre><code class="lang-auto">▶ curl https://angelo.veltens.org/public/toots/hello-solid\#note -H"Accept: application/ld+json"
{
  "@context": "https://www.w3.org/ns/activitystreams",

  "id": "https://angelo.veltens.org/public/toots/hello-solid#create",
  "type": "Create",
  "actor": "https://angelo.veltens.org/profile/actor",
  "to": "https://www.w3.org/ns/activitystreams#Public",

  "object": {
    "id": "https://angelo.veltens.org/public/toots/hello-solid#note",
    "type": "Note",
    "published": "2020-07-13T20:33:10+0200",
    "attributedTo": "https://angelo.veltens.org/profile/actor",
    "inReplyTo": "https://mastodon.social/@Gargron/100254678717223630",
    "content": "&lt;p&gt;Hello from Solid&lt;/p&gt;",
    "to": "https://www.w3.org/ns/activitystreams#Public"
  }
}
</code></pre>
<p>The blogposts states:</p>
<blockquote>
<p>For our purposes, we don’t actually need to host this document publicly</p>
</blockquote>
<p>This of course might have changed meanwhile, since the article is 2 years old. So I will give it a try. If anyone knows for sure what is needed and what not, let me know please.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/5">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/5</link>
        <pubDate>Tue, 14 Jul 2020 06:49:39 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-5</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[cjs]]></dc:creator>
        <description><![CDATA[
            <p>When I run:</p>
<pre><code class="lang-auto">curl https://angelo.veltens.org/public/toots/hello-solid#note -H"Accept: application/activity+json"
</code></pre>
<p>Or:</p>
<pre><code class="lang-auto">curl https://angelo.veltens.org/public/toots/hello-solid#note -H"Accept: application/ld+json; profile=\"https://www.w3.org/ns/activitystreams\""
</code></pre>
<p>I get:</p>
<pre><code class="lang-auto">Cannot serve requested type: application/ld+json
</code></pre>
<p>I am not sure if Mastodon is also attempting to fetch the note to verify it exists at that ID, but you definitely want to be serving that created note at that endpoint.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/4">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/4</link>
        <pubDate>Tue, 14 Jul 2020 06:02:39 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-4</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[aveltens]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for the tip, but it still does not show up.</p>
<p>I tried adding <code>"to": "https://www.w3.org/ns/activitystreams#Public"</code> to the <code>Create</code> as well as</p>
<pre><code class="lang-auto">"to": [
    "https://www.w3.org/ns/activitystreams#Public",
    "https://mastodon.social/users/Gargron"
  ],
</code></pre>
<p>I also tried to deliver to <code>https://mastodon.social/users/Gargron/inbox</code>, but nothing works out.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/3">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/3</link>
        <pubDate>Tue, 14 Jul 2020 05:38:20 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-3</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[cjs]]></dc:creator>
        <description><![CDATA[
            <p>Have you tried putting the <code>to</code> field onto the Create Activity itself, and not just the object?</p>
<p>It’s a little odd that this is the recommended payload by Mastodon where <code>to</code> is on the object and not the Activity, since it violates expectations in 7.1 (server to server delivery) which also points to 6.1 (client addressing).</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/2">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/2</link>
        <pubDate>Tue, 14 Jul 2020 05:14:11 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-2</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
      <item>
        <title>Problems POSTing to Mastodon inbox</title>
        <dc:creator><![CDATA[aveltens]]></dc:creator>
        <description><![CDATA[
            <p>Hi,</p>
<p>Following the Instructions in <a href="https://blog.joinmastodon.org/2018/06/how-to-implement-a-basic-activitypub-server/" rel="nofollow noopener">How to implement a basic ActivityPub server</a>, I tried to POST a response to a Mastodon post from my own server.</p>
<p>The thing is: It does not show up, although I am getting a postive HTTP response (202 Accepted) and I am trying to figure out why. Perhaps someone here can give me a hint what is going on.</p>
<p>This is the kind of request I am making:</p>
<pre><code class="lang-auto">POST https://mastodon.social/inbox
Host: mastodon.social
Date: Mon, 13 Jul 2020 18:33:11 GMT
Signature: keyId="https://angelo.veltens.org/profile/actor#main-key",headers="(request-target) host date",signature="Q2n8kP3kqfqjP3FVhWwLQ/tqSSnRw5QYuNgodXzLM98fykRmp3eIvQJajOaAKgpMxlbeajFsbS8AjOQqX/mw4dcQnoYMRvlNxEwwmVGXxqIcuhjSqEdDScTCZhoNcI6yDthq0BwR3nUvd5uHhpsQ7nPYw6eOzxVQMXUSx6R95gAVwYh7cILmqE6/wUhduskcblNoFPsQUt1e9mEFYB1QR6QTN5d1MXmOvtV1Ze/VdTMmMpx3GuMklmtbOYtsqyfurBYPBYP2uYTxYCI7LzH8YpaD0uL+AdAV45ArUKvH8o6nhV2ZcPVUiuBrS5XVPMLdmgB2QRV85K9SE4KHlJWutQ=="

{
  "@context": "https://www.w3.org/ns/activitystreams",

  "id": "https://angelo.veltens.org/public/toots/hello-solid#create",
  "type": "Create",
  "actor": "https://angelo.veltens.org/profile/actor",

  "object": {
    "id": "https://angelo.veltens.org/public/toots/hello-solid#note",
    "type": "Note",
    "published": "2020-07-13T20:33:10+0200",
    "attributedTo": "https://angelo.veltens.org/profile/actor",
    "inReplyTo": "https://mastodon.social/@Gargron/100254678717223630",
    "content": "&lt;p&gt;Hello again from Solid&lt;/p&gt;",
    "to": "https://www.w3.org/ns/activitystreams#Public"
  }
}
</code></pre>
<p>And this is the response:</p>
<pre><code class="lang-auto">HTTP/1.1 202 Accepted
Date: Mon, 13 Jul 2020 18:33:13 GMT
Content-Type: text/html
Transfer-Encoding: chunked
Connection: keep-alive
Server: Mastodon
X-Frame-Options: DENY
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Set-Cookie: _mkra_stck=postgres%3A1594665198.514459; path=/; max-age=10; expires=Mon, 13 Jul 2020 18:33:23 GMT; HttpOnly
Vary: Accept-Encoding
Cache-Control: no-cache
Content-Security-Policy: base-uri 'none'; default-src 'none'; frame-ancestors 'none'; font-src 'self' https://static-cdn.mastodon.social; img-src 'self' https: data: blob: https://static-cdn.mastodon.social; style-src 'self' https://static-cdn.mastodon.social 'nonce-PoTtEgRXnAWfIn/QUIV9qg=='; media-src 'self' https: data: https://static-cdn.mastodon.social; frame-src 'self' https:; manifest-src 'self' https://static-cdn.mastodon.social; connect-src 'self' data: blob: https://static-cdn.mastodon.social https://files.mastodon.social wss://mastodon.social; script-src 'self' https://static-cdn.mastodon.social; child-src 'self' blob: https://static-cdn.mastodon.social; worker-src 'self' blob: https://static-cdn.mastodon.social
X-Request-Id: ddcbf0ea-4af9-4dd9-be57-1d8c6c8265c9
X-Runtime: 0.029216

&lt;Response body is empty&gt;

Response code: 202 (Accepted); Time: 109ms; Content length: 0 bytes
</code></pre>
<p>If I mess up the <code>Signature</code> header deliberately I am getting <code>401 (Unauthorized)</code>, so I guess my signature is fine.</p>
<p>What else could be wrong or what reasons exist, that the post does not show up?</p>
<p>Thank you very much for your help.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/1">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801/1</link>
        <pubDate>Mon, 13 Jul 2020 18:48:58 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-801-1</guid>
        <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
      </item>
  </channel>
</rss>
