<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Understanding follow request</title>
    <link>https://socialhub.activitypub.rocks/t/understanding-follow-request/746</link>
    <description>In addition to the documentation, I am trying to understand the ActivityPub protocol through replaying messages to a personal server. I am trying to understand how Follow requests work, but running into problems.

1. Where in the protocol documentation is the Follow example JSON?
2. What is the UUID value in the ID? How is that generated?
3. Why is the following request failing? I receive an internal error, as noted below:

`$ curl \
-H &#39;Content-Type: application/activity+json&#39; \
https://testserver.farhan.codes/inbox/ -d &#39;{&quot;@context&quot;:[&quot;https://www.w3.org/ns/activitystreams&quot;,&quot;https://dev.farhan.codes/schemas/litepub-0.1.jsonld&quot;,{&quot;@language&quot;:&quot;und&quot;}],&quot;actor&quot;:&quot;https://dev.farhan.codes/users/farhan&quot;,&quot;cc&quot;:[&quot;https://www.w3.org/ns/activitystreams#Public&quot;],&quot;id&quot;:&quot;https://testserver.farhan.codes/activities/47e0a50f-fa4b-4339-bf3c-ec7e927379e7&quot;,&quot;object&quot;:&quot;https://testserver.farhan.codes/users/farhan&quot;,&quot;published&quot;:&quot;2020-06-11T06:02:42.553779Z&quot;,&quot;state&quot;:&quot;pending&quot;,&quot;to&quot;:[&quot;https://testserver.farhan.codes/users/farhan&quot;],&quot;type&quot;:&quot;Follow&quot;}&#39;
{&quot;errors&quot;:{&quot;detail&quot;:&quot;Internal server error&quot;}}`

Please advise. Thanks!</description>
    
    <lastBuildDate>Fri, 26 Jun 2020 10:29:29 +0000</lastBuildDate>
    <category>Server to Server</category>
    <atom:link href="https://socialhub.activitypub.rocks/t/understanding-follow-request/746.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Understanding follow request</title>
        <dc:creator><![CDATA[grishka]]></dc:creator>
        <description><![CDATA[
            <p>Also, here’s my implementation of HTTP signature in Java: <a href="https://github.com/grishka/Smithereen/blob/5122851e6d9e03f831597064d0ca8bb080a6d6f4/src/main/java/smithereen/activitypub/ActivityPub.java#L86-L108" rel="nofollow noopener">https://github.com/grishka/Smithereen/blob/5122851e6d9e03f831597064d0ca8bb080a6d6f4/src/main/java/smithereen/activitypub/ActivityPub.java#L86-L108</a></p>
<p>Hope this helps.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/understanding-follow-request/746/10">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/understanding-follow-request/746/10</link>
        <pubDate>Fri, 26 Jun 2020 10:29:29 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-746-10</guid>
        <source url="https://socialhub.activitypub.rocks/t/understanding-follow-request/746.rss">Understanding follow request</source>
      </item>
      <item>
        <title>Understanding follow request</title>
        <dc:creator><![CDATA[grishka]]></dc:creator>
        <description><![CDATA[
            <p>HTTP signature is sent as an HTTP header. You should definitely read the Mastodon tutorial I linked.</p>
<p>Here’s what an activity request looks like with both HTTP signature (in headers) and LD-signature (<code>signature</code> field in JSON-LD itself):</p>
<pre><code class="lang-auto">POST /activitypub/sharedInbox HTTP/1.1
Signature: keyId="http://smithereen.local:8080/users/1#main-key",headers="(request-target) host date",signature="bh7lKy7gKmLqCXUJtHZxYV5r8wqMrWyeu7QvB8mkwMJuiNSqLtAcWZuM06WeerES0EZNFi+CdlfV+ssmsGUXl8lprdnyBRh0y6FCCqMnrBTq+Tsspn54QfC3nPUZKXPiED6BwOFuwuq7GWSifxEdKMF+Csy8dtlh+IcAWxCniWm/9npM3Bomk8fkBeezGE6obGG4xFtMMYEu9NBGgzF/UVMRVc3LnJKAzlubxqTfqSJNyC3qhTycdHN0Du6E0nTM9WzqSDkOmsvP6Iw/Vr1b/NRRpaRh5pY7ZQvRR1G4ZIIP4fik6KX9iJp80EnbZbS9N8VuLmGU1enbUsMvV30Brg=="
Date: Fri, 26 Jun 2020 10:16:04 GMT
Content-Type: application/ld+json; profile="https://www.w3.org/ns/activitystreams"; charset=utf-8
Content-Length: 1218
Host: localhost2:7890
Connection: Keep-Alive
Accept-Encoding: gzip
User-Agent: okhttp/3.2.0

{"cc":["http://smithereen.local:8080/users/1/followers"],"actor":"http://smithereen.local:8080/users/1","signature":{"creator":"http://smithereen.local:8080/users/1#main-key","created":"2020-06-26T10:16:04Z","type":"RsaSignature2017","signatureValue":"FflQcL2S99CFCdSd22bOz0S2pZ59fsODQA4XRBz4Fxo1pwOWciP3WZUnfpumMFzTnHs96VTeg8d7yzW36mYkITkaMyul4touUiE31X5WRd5lpRTQbU7qKlsyJ4ScF5jrhW9v8o5QhmSixV9dB4Dqypy7xVPUj2aTbhXZHNdv3kNDjyimgWRHYKUTpwU7n17zRatGe+TmhX2j/pnngKsU9eTbY/hmbGRxr8GZe8nUlV3cruQhaxTW7MB4+1+EeZRfPo7T6O1drnYDxqpshS9N25SRXJHpofEUQX/CLHn0yFt6gZhftYyhEvxk9duXR49VFen75OqS6c8jSmfDs6xvfg=="},"id":"http://smithereen.local:8080/posts/111/activityCreate","published":"2020-06-26T10:16:04Z","to":["https://www.w3.org/ns/activitystreams#Public"],"type":"Create","@context":["https://www.w3.org/ns/activitystreams",{"sensitive":"as:sensitive"}],"object":{"cc":["http://smithereen.local:8080/users/1/followers"],"id":"http://smithereen.local:8080/posts/111","attributedTo":"http://smithereen.local:8080/users/1","published":"2020-06-26T10:16:04Z","to":["https://www.w3.org/ns/activitystreams#Public"],"sensitive":false,"type":"Note","content":"&lt;p&gt;Test for farhan&lt;\/p&gt;","url":"http://smithereen.local:8080/posts/111"}}
</code></pre>
<p>You don’t need LD-signatures now though. You only need HTTP as those are enough to participate in the network.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/understanding-follow-request/746/9">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/understanding-follow-request/746/9</link>
        <pubDate>Fri, 26 Jun 2020 10:23:46 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-746-9</guid>
        <source url="https://socialhub.activitypub.rocks/t/understanding-follow-request/746.rss">Understanding follow request</source>
      </item>
      <item>
        <title>Understanding follow request</title>
        <dc:creator><![CDATA[aschrijver]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="/u/dansup">@dansup</a>’s <a href="https://socialhub.activitypub.rocks/t/introducing-fedidb-devtools-for-activitypub/660">FediDB</a> might be able to help with HTTP Signatures, but I’m not sure if it is still in private beta (you may request access from dansup).</p>
          <p><a href="https://socialhub.activitypub.rocks/t/understanding-follow-request/746/8">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/understanding-follow-request/746/8</link>
        <pubDate>Fri, 26 Jun 2020 09:32:16 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-746-8</guid>
        <source url="https://socialhub.activitypub.rocks/t/understanding-follow-request/746.rss">Understanding follow request</source>
      </item>
      <item>
        <title>Understanding follow request</title>
        <dc:creator><![CDATA[farhan]]></dc:creator>
        <description><![CDATA[
            <p>What would the JSON-LD of a signed request look like? Can you give me an example? I cannot find one anywhere and my attempts to reverse engineer a follow request do not know the signing you are referencing.</p>
<p>I’ve been stuck for weeks now…</p>
          <p><a href="https://socialhub.activitypub.rocks/t/understanding-follow-request/746/7">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/understanding-follow-request/746/7</link>
        <pubDate>Fri, 26 Jun 2020 06:10:12 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-746-7</guid>
        <source url="https://socialhub.activitypub.rocks/t/understanding-follow-request/746.rss">Understanding follow request</source>
      </item>
      <item>
        <title>Understanding follow request</title>
        <dc:creator><![CDATA[farhan]]></dc:creator>
        <description><![CDATA[
            <ol>
<li>
<p>What would a signed request look like? The specific JSON-LD?</p>
</li>
<li>
<p>How would a “generic” request from any particular system look like? What does the JSON-LD look like?</p>
</li>
</ol>
<p>I can’t find an example or documentation that says how I need to do this…</p>
          <p><a href="https://socialhub.activitypub.rocks/t/understanding-follow-request/746/6">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/understanding-follow-request/746/6</link>
        <pubDate>Fri, 26 Jun 2020 06:08:30 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-746-6</guid>
        <source url="https://socialhub.activitypub.rocks/t/understanding-follow-request/746.rss">Understanding follow request</source>
      </item>
      <item>
        <title>Understanding follow request</title>
        <dc:creator><![CDATA[rinpatch]]></dc:creator>
        <description><![CDATA[
            <p>The server in your example is down, but judging by the URI structure I am guessing this is a Pleroma server.</p>
<p>There are several problems with the request in your example:</p>
<ol>
<li>It’s not signed, Pleroma requires requests to be signed, or for the activity to be publicly fetchable</li>
<li>The id of the activity is not on the same host the actor is, which is also a requirement for Pleroma.</li>
</ol>
          <p><a href="https://socialhub.activitypub.rocks/t/understanding-follow-request/746/4">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/understanding-follow-request/746/4</link>
        <pubDate>Mon, 15 Jun 2020 21:03:31 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-746-4</guid>
        <source url="https://socialhub.activitypub.rocks/t/understanding-follow-request/746.rss">Understanding follow request</source>
      </item>
      <item>
        <title>Understanding follow request</title>
        <dc:creator><![CDATA[grishka]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="farhan" data-post="1" data-topic="746">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/farhan/40/382_2.png" class="avatar"> farhan:</div>
<blockquote>
<p>Where in the protocol documentation is the Follow example JSON?</p>
</blockquote>
</aside>
<p>I don’t think there is one.</p>
<aside class="quote no-group" data-username="farhan" data-post="1" data-topic="746">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/farhan/40/382_2.png" class="avatar"> farhan:</div>
<blockquote>
<p>What is the UUID value in the ID? How is that generated?</p>
</blockquote>
</aside>
<p>This is generated arbitrarily by the server that sends it. To make sure your implementation is interoperable, you shouldn’t attempt to interpret it beyond making sure it’s a valid URI.</p>
<aside class="quote no-group" data-username="farhan" data-post="1" data-topic="746">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://socialhub.activitypub.rocks/user_avatar/socialhub.activitypub.rocks/farhan/40/382_2.png" class="avatar"> farhan:</div>
<blockquote>
<p>Why is the following request failing? I receive an internal error, as noted below:</p>
</blockquote>
</aside>
<p>You need to have the actor object publicly available at the URL you specify for <code>actor</code> (the receiving server will fetch it), it needs to have a public RSA key, and you need to sign your request with the private counterpart of that key. See <a href="https://blog.joinmastodon.org/2018/06/how-to-implement-a-basic-activitypub-server/" rel="nofollow noopener">this</a> and <a href="https://blog.joinmastodon.org/2018/07/how-to-make-friends-and-verify-requests/" rel="nofollow noopener">this</a> for details.</p>
          <p><a href="https://socialhub.activitypub.rocks/t/understanding-follow-request/746/3">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/understanding-follow-request/746/3</link>
        <pubDate>Sun, 14 Jun 2020 15:11:29 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-746-3</guid>
        <source url="https://socialhub.activitypub.rocks/t/understanding-follow-request/746.rss">Understanding follow request</source>
      </item>
      <item>
        <title>Understanding follow request</title>
        <dc:creator><![CDATA[farhan]]></dc:creator>
        <description><![CDATA[
            <p>The answer to the second appears to be arbitrary by the server.<br>
However, I cannot find the answer to the other two questions in the documentation.</p>
<p>Why would a replay fail? Is this a problem in the protocol?</p>
          <p><a href="https://socialhub.activitypub.rocks/t/understanding-follow-request/746/2">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/understanding-follow-request/746/2</link>
        <pubDate>Fri, 12 Jun 2020 05:08:43 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-746-2</guid>
        <source url="https://socialhub.activitypub.rocks/t/understanding-follow-request/746.rss">Understanding follow request</source>
      </item>
      <item>
        <title>Understanding follow request</title>
        <dc:creator><![CDATA[farhan]]></dc:creator>
        <description><![CDATA[
            <p>In addition to the documentation, I am trying to understand the ActivityPub protocol through replaying messages to a personal server. I am trying to understand how Follow requests work, but running into problems.</p>
<ol>
<li>Where in the protocol documentation is the Follow example JSON?</li>
<li>What is the UUID value in the ID? How is that generated?</li>
<li>Why is the following request failing? I receive an internal error, as noted below:</li>
</ol>
<p><code>$ curl \ -H 'Content-Type: application/activity+json' \ https://testserver.farhan.codes/inbox/ -d '{"@context":["https://www.w3.org/ns/activitystreams","https://dev.farhan.codes/schemas/litepub-0.1.jsonld",{"@language":"und"}],"actor":"https://dev.farhan.codes/users/farhan","cc":["https://www.w3.org/ns/activitystreams#Public"],"id":"https://testserver.farhan.codes/activities/47e0a50f-fa4b-4339-bf3c-ec7e927379e7","object":"https://testserver.farhan.codes/users/farhan","published":"2020-06-11T06:02:42.553779Z","state":"pending","to":["https://testserver.farhan.codes/users/farhan"],"type":"Follow"}' {"errors":{"detail":"Internal server error"}}</code></p>
<p>Please advise. Thanks!</p>
          <p><a href="https://socialhub.activitypub.rocks/t/understanding-follow-request/746/1">Read full topic</a></p>
        ]]></description>
        <link>https://socialhub.activitypub.rocks/t/understanding-follow-request/746/1</link>
        <pubDate>Thu, 11 Jun 2020 20:17:02 +0000</pubDate>
        <guid isPermaLink="false">socialhub.activitypub.rocks-post-746-1</guid>
        <source url="https://socialhub.activitypub.rocks/t/understanding-follow-request/746.rss">Understanding follow request</source>
      </item>
  </channel>
</rss>
