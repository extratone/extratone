<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>How do I store activities and objects in an SQL database? - ActivityPub - SocialHub</title>
    <meta name="description" content="There are two ways of doing that I can think about: 

Have a table for each activity type and store them there.
Have a one big activities table and store activities as JSON.

Both of those options seem to have some serio&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.0.beta2 - https://github.com/discourse/discourse version c39ab6c0ae3803b6a62501954ae40adb6b73d580">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/b7023860b3d7df97ea10ba3c7ab11cb046a77c7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1880.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://socialhub.activitypub.rocks","potentialAction":{"@type":"SearchAction","target":"https://socialhub.activitypub.rocks/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="SocialHub Search">

      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop" />
      <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_5_969dd27459c19a0b7620746a3d179b86ef033d7a.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_3_f50bf2f225326f482d56e65e93f1f047d48417a9.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_8_e3f93470fef56ec97b63f77e16779e328baab8ea.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="8"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_4_8d506fd22b761a15044193a6d4ebda5f6bde2498.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;How do I store activities and objects in an SQL database?&#39;" href="1880.rss" />
    <meta property="og:site_name" content="SocialHub" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:image" content="https://socialhub.activitypub.rocks/uploads/default/original/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f.png" />
<meta property="og:url" content="https://socialhub.activitypub.rocks/t/how-do-i-store-activities-and-objects-in-an-sql-database/1880" />
<meta name="twitter:url" content="https://socialhub.activitypub.rocks/t/how-do-i-store-activities-and-objects-in-an-sql-database/1880" />
<meta property="og:title" content="How do I store activities and objects in an SQL database?" />
<meta name="twitter:title" content="How do I store activities and objects in an SQL database?" />
<meta property="og:description" content="There are two ways of doing that I can think about:   Have a table for each activity type and store them there. Have a one big activities table and store activities as JSON.  Both of those options seem to have some serious disadvantages, the former one makes it difficult to get all activities from one actor in the chronological order and is not very scalable, the latter one doesn‚Äôt allow me to know what actor created the activity and other data without parsing JSON first.  Is there a better way ..." />
<meta name="twitter:description" content="There are two ways of doing that I can think about:   Have a table for each activity type and store them there. Have a one big activities table and store activities as JSON.  Both of those options seem to have some serious disadvantages, the former one makes it difficult to get all activities from one actor in the chronological order and is not very scalable, the latter one doesn‚Äôt allow me to know what actor created the activity and other data without parsing JSON first.  Is there a better way ..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ‚ù§" />
<meta property="article:published_time" content="2021-06-25T14:39:46+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
<script src="https://socialhub.activitypub.rocks/theme-javascripts/3a68d4ddcab78e923b7c4169708a8f1deb79df66.js?__ws=socialhub.activitypub.rocks"></script>
    <header>
      <a href="https://socialhub.activitypub.rocks/">
          <img src="../../uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png" alt="SocialHub" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1880.html">How do I store activities and objects in an SQL database?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/activitypub.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #0088CC'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>ActivityPub</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/protheory8.html'><span itemprop='name'>protheory8</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1880.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-25T14:39:46Z' class='post-time'>
                June 25, 2021,  2:39pm
              </time>
              <meta itemprop='dateModified' content='2021-06-25T14:39:46Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>There are two ways of doing that I can think about:</p>
<ol>
<li>Have a table for each activity type and store them there.</li>
<li>Have a one big <code>activities</code> table and store activities as JSON.</li>
</ol>
<p>Both of those options seem to have some serious disadvantages, the former one makes it difficult to get all activities from one actor in the chronological order and is not very scalable, the latter one doesn‚Äôt allow me to know what actor created the activity and other data without parsing JSON first.</p>
<p>Is there a better way than using those two option? Or is there a way to ‚Äúfix‚Äù disadvantages that I mentioned?</p>
        </div>

        <meta itemprop='headline' content='How do I store activities and objects in an SQL database?'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/heluecht.html'><span itemprop='name'>heluecht</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1880.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-25T15:54:35Z'>
              <time itemprop='dateModified' datetime='2021-06-25T15:57:04Z' class='post-time'>
                June 25, 2021,  3:57pm
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>In Friendica we only store the processed data for a longer period. We store the raw JSON only for some days for caching purposes.</p>
        </div>

        <meta itemprop='headline' content='How do I store activities and objects in an SQL database?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/protheory8.html'><span itemprop='name'>protheory8</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1880.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-25T17:04:41Z' class='post-time'>
                June 25, 2021,  5:04pm
              </time>
              <meta itemprop='dateModified' content='2021-06-25T17:04:41Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>What period, what do you mean?</p>
        </div>

        <meta itemprop='headline' content='How do I store activities and objects in an SQL database?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/heluecht.html'><span itemprop='name'>heluecht</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1880.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-26T03:21:16Z'>
              <time itemprop='dateModified' datetime='2021-06-26T03:25:46Z' class='post-time'>
                June 26, 2021,  3:25am
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I guess we store the raw data for a month.</p>
        </div>

        <meta itemprop='headline' content='How do I store activities and objects in an SQL database?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/weex.html'><span itemprop='name'>weex</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1880.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-26T03:34:09Z' class='post-time'>
                June 26, 2021,  3:34am
              </time>
              <meta itemprop='dateModified' content='2021-06-26T03:34:09Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>There are plenty of implementations that you could use as a template, but I guess the bigger question is, what do you plan to do with the data? You could certainly store the json and a selection of parsed fields (with indexes) to be able to retrieve the data you need.</p>
        </div>

        <meta itemprop='headline' content='How do I store activities and objects in an SQL database?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1880.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-26T18:40:20Z' class='post-time'>
                June 26, 2021,  6:40pm
              </time>
              <meta itemprop='dateModified' content='2021-06-26T18:40:20Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I don‚Äôt store the activities themselves, and I treat ActivityPub like an API. I synthesize the objects and activities as needed from my data. This does mean that I can‚Äôt return the original JSON later should that be needed, but that‚Äôs fine for me since I don‚Äôt implement c2s and don‚Äôt plan to.</p>
<p>Here‚Äôs my database schema if you‚Äôre curious:</p><aside class="onebox githubblob" data-onebox-src="https://github.com/grishka/Smithereen/blob/a9b92f3a3fb876b380082fdbbc7ea90ea82d35d6/schema.sql">
  <header class="source">

      <a href="https://github.com/grishka/Smithereen/blob/a9b92f3a3fb876b380082fdbbc7ea90ea82d35d6/schema.sql" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/grishka/Smithereen/blob/a9b92f3a3fb876b380082fdbbc7ea90ea82d35d6/schema.sql" target="_blank" rel="noopener nofollow ugc">grishka/Smithereen/blob/a9b92f3a3fb876b380082fdbbc7ea90ea82d35d6/schema.sql</a></h4>


    <pre><code class="lang-sql"># ************************************************************
# Sequel Pro SQL dump
# Version 5446
#
# https://www.sequelpro.com/
# https://github.com/sequelpro/sequelpro
#
# Host: localhost (MySQL 5.7.9)
# Database: smithereen
# Generation Time: 2021-05-25 05:56:55 +0000
# ************************************************************


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
SET NAMES utf8mb4;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
</code></pre>


  This file has been truncated. <a href="https://github.com/grishka/Smithereen/blob/a9b92f3a3fb876b380082fdbbc7ea90ea82d35d6/schema.sql" target="_blank" rel="noopener nofollow ugc">show original</a>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='How do I store activities and objects in an SQL database?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/naturzukunft.html'><span itemprop='name'>naturzukunft</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1880.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-29T09:43:26Z'>
              <time itemprop='dateModified' datetime='2021-06-29T09:45:50Z' class='post-time'>
                June 29, 2021,  9:45am
              </time>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>In my eyes an SQL Database is the wrong way.<br>
But if you rally want to do it, you should store triples!<br>
So your table(s) has the columns subject, predicate(property), object(value)</p>
<p>search for: <a href="https://www.startpage.com/do/dsearch?query=storing+rdf+in+sql+database&amp;cat=web&amp;pl=ext-ff&amp;language=deutsch&amp;extVersion=1.3.0" class="inline-onebox" rel="noopener nofollow ugc">Startpage Suchergebnisse</a></p>
        </div>

        <meta itemprop='headline' content='How do I store activities and objects in an SQL database?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/heluecht.html'><span itemprop='name'>heluecht</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1880.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-29T10:58:28Z'>
              <time itemprop='dateModified' datetime='2021-06-29T11:06:46Z' class='post-time'>
                June 29, 2021, 11:06am
              </time>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>BTW: Friendica is ‚Äúslightly‚Äù more complicated, due to the fact that we support multiple protocols: <a href="https://github.com/friendica/friendica/blob/2021.06-rc/database.sql" rel="noopener nofollow ugc">https://github.com/friendica/friendica/blob/a44a9e73c3b70523f38ec960b153673d96de425d/database.sql</a></p>
        </div>

        <meta itemprop='headline' content='How do I store activities and objects in an SQL database?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/grishka.html'><span itemprop='name'>grishka</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1880.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-29T19:41:51Z' class='post-time'>
                June 29, 2021,  7:41pm
              </time>
              <meta itemprop='dateModified' content='2021-06-29T19:41:51Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="naturzukunft" data-post="7" data-topic="1880">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/socialhub.activitypub.rocks/naturzukunft/40/983_2.png" class="avatar"> naturzukunft:</div>
<blockquote>
<p>In my eyes an SQL Database is the wrong way.</p>
</blockquote>
</aside>
<p>Again, that depends on what you‚Äôre trying to achieve. In my opinion, it doesn‚Äôt matter much what happens <em>inside</em> your server, as long as the right bits come out of it for any given input. It‚Äôs much more convenient for me to treat ActivityPub like an API and let my presentation (UI) dictate the storage. Though I‚Äôm thinking about adding a separate table that would map ActivityPub object IDs to their types so I wouldn‚Äôt have to query several tables until I find the thing I‚Äôm looking for. That would allow retrieving any object in 2 queries and getting a definitive ‚Äúnot found‚Äù answer in one.</p>
<p>If you do want to store the original JSON, you could use a NoSQL database like MongoDB or ElasticSearch instead.</p>
        </div>

        <meta itemprop='headline' content='How do I store activities and objects in an SQL database?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/weex.html'><span itemprop='name'>weex</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1880.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-29T20:29:35Z' class='post-time'>
                June 29, 2021,  8:29pm
              </time>
              <meta itemprop='dateModified' content='2021-06-29T20:29:35Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="../../u/protheory8.html">@protheory8</a> Do any of the above answers solve your question?</p>
        </div>

        <meta itemprop='headline' content='How do I store activities and objects in an SQL database?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Petites Singularit√©s'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://socialhub.activitypub.rocks/uploads/default/original/1X/4d2bcc2cd17698f8d3efb8ffaa6983d11bbf3229.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/koehn.html'><span itemprop='name'>koehn</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1880.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-30T10:11:20Z' class='post-time'>
                June 30, 2021, 10:11am
              </time>
              <meta itemprop='dateModified' content='2021-06-30T10:11:20Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I did an experiment using a document database (CouchDB). The ease of storing a <em>very</em> flexible schema like ActivityPub, combined with high scalability made for a powerful combination. Otherwise you need to pre-determine all the crazy ways ActivityPub allows you to specify things (e.g., images) and convert every format to match your database schema when the message is received. If (when) you get a message that doesn‚Äôt conform, you have a real problem. By always working in the original JSON, you can eliminate that problem.</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://gitlab.koehn.com/mammoth">
  <header class="source">
      <img src="../../uploads/default/original/1X/c2911d91c1567acaf78af4212b7669f2f61f67c1.png" class="site-icon" width="32" height="32">

      <a href="https://gitlab.koehn.com/mammoth" target="_blank" rel="noopener nofollow ugc">GitLab</a>
  </header>

  <article class="onebox-body">
    <img src="../../uploads/default/original/1X/10f2d759dce6ea753e1e0b2bf9dc52b57a2f433b.png" class="thumbnail onebox-avatar" width="128" height="128">

<h3><a href="https://gitlab.koehn.com/mammoth" target="_blank" rel="noopener nofollow ugc">mammoth</a></h3>

  <p>Mammoth is a federated social media platform implementing the ActivityPub specification for client/server and server/server communications. It's broken into two projects, mammoth-ui and mammoth-server.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='How do I store activities and objects in an SQL database?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://socialhub.activitypub.rocks/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
