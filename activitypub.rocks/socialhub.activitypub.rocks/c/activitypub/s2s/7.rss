<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:discourse="http://www.discourse.org/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Server to Server - SocialHub</title>
    <link>https://socialhub.activitypub.rocks/c/activitypub/s2s/7</link>
    <description>Topics in the &#39;Server to Server&#39; category This protocol is used to distribute activities between actors on different servers, tying them into the same social graph.</description>
    
      <lastBuildDate>Sat, 19 Jun 2021 02:18:13 +0000</lastBuildDate>
      <atom:link href="https://socialhub.activitypub.rocks/c/activitypub/s2s/7.rss" rel="self" type="application/rss+xml" />
        <item>
          <title>Querying ActivityPub collections</title>
          <dc:creator><![CDATA[grishka]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>It’s me again with my efforts to extend collections. This is somewhat of a continuation of the discussion started in the <a class="hashtag" href="/tag/fep-400e">#<span>fep-400e</span></a> topic, but I feel like it warrants having a topic (and at some point a FEP) of its own.</p>
<p>Sometimes, it’s useful to have the ability to issue a single request to ask a remote instance “does this collection contain this object?” for an authoritative answer. This can be useful both for collection synchronization and to enforce bilateral relationships.</p>
<p>Example <span class="hashtag">#1</span>. There’s a wall post made by a user from instance A on the wall of a group on instance B (in accordance to my <a class="hashtag" href="/tag/fep-400e">#<span>fep-400e</span></a>). The user from instance A mentions a user from instance C in a reply to that post. The instance C fetches both the post and the reply to display them to its local user in a notification. <em>How does instance C verify that instance B has approved that parent post?</em></p>
<p>Example <span class="hashtag">#2</span>. A user from instance A and a user from instance B add each other as friends. They each have a “friends” collection that contains all such connections. Each sends an Add activity to their followers to keep friend lists in sync across instances. <em>How do recipients verify that this relationship was actually established on the other end if they only follow one of the users?</em></p>
<p>Currently, there’s no non-ugly way to do this — the only way you can get something out of a collection is by going through its pages. I’d like to discuss an easy way to query a collection, for example, using a well-defined query parameter or an HTTP header. You’d send a request to the collection ID URL, specifying the ID of the object you’re checking for, and the response would be one of three discernible states:</p>
<ul>
<li>The collection contains the object</li>
<li>The collection does not contain the object</li>
<li>Inconclusive — the server doesn’t support responding to these requests</li>
</ul>
            <p><small>19 posts - 6 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/querying-activitypub-collections/1866">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/querying-activitypub-collections/1866</link>
          <pubDate>Sat, 19 Jun 2021 02:18:13 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-1866</guid>
          <source url="https://socialhub.activitypub.rocks/t/querying-activitypub-collections/1866.rss">Querying ActivityPub collections</source>
        </item>
        <item>
          <title>S2S Create Activity</title>
          <dc:creator><![CDATA[naturzukunft]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>Question to <a href="https://www.w3.org/TR/activitypub/#create-activity-inbox" rel="noopener nofollow ugc">S2S Create Activity</a></p>
<p>A client sends an activity to <a href="http://server_a.com/max" rel="noopener nofollow ugc">http://server_a.com/max</a>  .<br>
It gets the id: <a href="http://server_a.com/max/activity_0815" rel="noopener nofollow ugc">http://server_a.com/max/activity_0815</a>.<br>
The property <strong>as:to</strong> of <a href="http://server_a.com/max/activity_0815" rel="noopener nofollow ugc">http://server_a.com/max/activity_0815</a> is <a href="http://server_b.com/jane" rel="noopener nofollow ugc">http://server_b.com/jane</a>.</p>
<p>So <a href="http://server_a.com/max/outbox" rel="noopener nofollow ugc">http://server_a.com/max/outbox</a> is something like that:</p>
<pre><code class="lang-auto">    {
    	  "@context": "[https://www.w3.org/ns/activitystreams](https://www.w3.org/ns/activitystreams)",
    	  "type": "OrderedCollection",
    	  "totalItems": 1,
    	  "orderedItems": [
    	    {
    	      "type": "Create",
    	      "id": "http://server_a.com/max/activity_0815"
    	      "name": "A Simple Activity"
    	      "to": "http://server_b.com/jane"
    	    }
    	  ]
    }	
</code></pre>
<p>Now <a href="http://server_a.com" rel="noopener nofollow ugc">http://server_a.com</a> has to deliver the activity to <a href="http://server_b.com/jane/inbox" rel="noopener nofollow ugc">http://server_b.com/jane/inbox</a>:</p>
<pre><code class="lang-auto">{
	  "@context": "https://www.w3.org/ns/activitystreams",
	  "type": "OrderedCollection",
	  "totalItems": 1,
	  "orderedItems": [
	    {
	      "type": "Create",
	      "id": "???????????????????"
	      "name": "A Simple Activity"
	      "to": "http://server_b.com/jane"
	    }
	  ]
}	
</code></pre>
<p>What is the <strong>id</strong> of the activity in <a href="http://server_b.com/jane/inbox" rel="noopener nofollow ugc">http://server_b.com/jane/inbox</a> ? Is it also <a href="http://server_a.com/max/activity_0815" rel="noopener nofollow ugc">http://server_a.com/max/activity_0815</a> because it’s a 100% copy (like a cache)<br>
Or does it gets a new Id <a href="http://server_b.com/max/activity_15" rel="noopener nofollow ugc">http://server_b.com/max/activity_15</a> ?</p>
            <p><small>21 posts - 3 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/s2s-create-activity/1647</link>
          <pubDate>Fri, 23 Apr 2021 16:54:46 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-1647</guid>
          <source url="https://socialhub.activitypub.rocks/t/s2s-create-activity/1647.rss">S2S Create Activity</source>
        </item>
        <item>
          <title>The Block activity, how&#39;s that supposed to work?</title>
          <dc:creator><![CDATA[grishka]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>I’m now at the point where I’m satisfied with my main features and almost ready to make my first release. Though in order to be a feasible fediverse server, I need to implement some sort of user blocking. So here goes.</p>
<p>The spec says that the Block activity is c2s only. Mastodon does send Block and Undo{Block} activities when you block and unblock a remote actor. What am I meant to do upon receipt of these activities? Remove all follow relationships and disallow the blocked actor any interactions with the originating actor and their content? Something else?</p>
<p>(I’m not really a fan of the whole “you see more if you log out” approach most social media implementations out there take, both centralized and not. I won’t be hiding anything publicly viewable if its author blocked you.)</p>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/the-block-activity-hows-that-supposed-to-work/1572">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/the-block-activity-hows-that-supposed-to-work/1572</link>
          <pubDate>Sun, 11 Apr 2021 17:32:38 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-1572</guid>
          <source url="https://socialhub.activitypub.rocks/t/the-block-activity-hows-that-supposed-to-work/1572.rss">The Block activity, how&#39;s that supposed to work?</source>
        </item>
        <item>
          <title>Best (or Various) Way(s) to Check if Your Users Belong to Collections in Addressing?</title>
          <dc:creator><![CDATA[WammKD]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>Simply, how might one handle checking (to process) addressing (<code>to</code>, <code>bto</code>, <code>cc</code>, <code>bcc</code>)?</p>
<p>Handling specific Object IDs or Public addressing is, obviously, easy but what about collections?</p>
<p>If the types of collections were limited (say to only followers and following), I could see an easy way to verify quickly but, as far as I understand the spec., any collection technically qualifies for what can be put in the addressing attributes.</p>
<p>And you can’t (easily) just grab the collection to check if any of your users reside in said collection since that collection could be paginated.</p>
<p>And large collections mean, potentially, churning through a ton of pages just to check if you see any of your users.</p>
<p>And there’s no provided way to request the remote instance to see if some user is a part of one of the instance’s collections so the searching, I would thing, ultimately resides with you.</p>
<p>So…how can you know whether an Object is addressed to any of your users with the expectation that said addressing could contain any collection, whatsoever?</p>
<p>I feel like I’m missing something obvious but I can’t seem to reason my way out of this conundrum.</p>
<p>Thanks for any help!</p>
            <p><small>4 posts - 2 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/best-or-various-way-s-to-check-if-your-users-belong-to-collections-in-addressing/1451">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/best-or-various-way-s-to-check-if-your-users-belong-to-collections-in-addressing/1451</link>
          <pubDate>Thu, 18 Feb 2021 17:06:22 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-1451</guid>
          <source url="https://socialhub.activitypub.rocks/t/best-or-various-way-s-to-check-if-your-users-belong-to-collections-in-addressing/1451.rss">Best (or Various) Way(s) to Check if Your Users Belong to Collections in Addressing?</source>
        </item>
        <item>
          <title>Unit-Testing Federations (or networks in general)</title>
          <dc:creator><![CDATA[calummackervoy]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>Hello !</p>
<p>I’ve been writing unit tests in Django and we rely quite heavily on ActivityStreams messages being sent between servers in the federation. The first solution I wrote turned out to have an infinite loop in it, because two servers were reacting to each other’s messages by sending another one <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/grin.png?v=9" title=":grin:" class="emoji" alt=":grin:"> infinite oneupmanship</p>
<p>if I had a magic wand I’d love to be able to write unit tests in which I had multiple servers. I haven’t been able to find anything like this for Django specifically, but does anyone know of any examples in other frameworks, have any insight into the topic or any interesting reading ?</p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/unit-testing-federations-or-networks-in-general/1296">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/unit-testing-federations-or-networks-in-general/1296</link>
          <pubDate>Fri, 15 Jan 2021 08:31:41 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-1296</guid>
          <source url="https://socialhub.activitypub.rocks/t/unit-testing-federations-or-networks-in-general/1296.rss">Unit-Testing Federations (or networks in general)</source>
        </item>
        <item>
          <title>How to stop incoming updates?</title>
          <dc:creator><![CDATA[aveltens]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>Since I experimented with ActivityPub my server keeps getting updates about user deletions from other instances like mastodon.social</p>
<p>How can I stop those?</p>
            <p><small>3 posts - 2 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/how-to-stop-incoming-updates/1266">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/how-to-stop-incoming-updates/1266</link>
          <pubDate>Thu, 07 Jan 2021 08:56:47 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-1266</guid>
          <source url="https://socialhub.activitypub.rocks/t/how-to-stop-incoming-updates/1266.rss">How to stop incoming updates?</source>
        </item>
        <item>
          <title>Mastodon responds with 500 to Follow request</title>
          <dc:creator><![CDATA[protheory8]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>Source code: <a href="https://pastebin.com/cCnnVA0d" rel="noopener nofollow ugc">https://pastebin.com/cCnnVA0d</a><br>
(imports and declaration of some variables omitted).</p>
<p>When I execute that code I get 500 from Mastodon and 401 from Pleroma, I’m pretty sure lines 18-20 are at the fault here.</p>
<p>My server outputs this when sending GET requests to /users/admin (domain replaced with <a href="http://example.com" rel="noopener nofollow ugc">example.com</a>):</p>
<pre><code>{
  "@context": "https://www.w3.org/ns/activitystreams",
  "id": "https://example.com/users/admin",
  "name": "admin",
  "type": "Person",
  "inbox": "https://example.com/users/admin/inbox",
  "liked": "https://example.com/users/admin/liked",
  "outbox": "https://example.com/users/admin/outbox",
  "followers": "https://example.com/users/admin/followers",
  "following": "https://example.com/users/admin/following",
  "publicKey": {
    "id": "https://example.com/users/admin#main-key",
    "owner": "https://example.com/users/admin",
    "publicKeyPem": "-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAq1PxyqkNEbeyRAIf7epP\n4IBPlcWIX6KV1E8IKzbWcNHAzw3f/e3ngUe9ny1R+72DZwnDU1BJ9DH2jKcLRN+G\nHGYaKLwfKthESe/gShdlLQGRMdoMTtI/QWP4RhK9opZ4Bs7WPUdvVPEzA6GaFFvs\nTeF0CTZOFBNZ7htIyYJe0UL3Anf4hsjzO+Y51BWfZrrQAXV6xlx/TWyHcaukkLmw\nQrBvyOiDmQjVtVVDvdVrFYjAt9+hjJBe645UKW0Wc03UydWFhs0evYFy9Rgp9kDr\nAAitRHCRp+PxXmw3bf/UThNTh4NCXGWRDJgYscnh17FZfCA/Le40kWvxTokXxpJ4\njQIDAQAB\n-----END PUBLIC KEY-----"
  },
  "preferredUsername": "admin"
}
</code></pre>
<p>What do I do?</p>
            <p><small>10 posts - 4 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/mastodon-responds-with-500-to-follow-request/1158">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/mastodon-responds-with-500-to-follow-request/1158</link>
          <pubDate>Fri, 27 Nov 2020 10:34:22 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-1158</guid>
          <source url="https://socialhub.activitypub.rocks/t/mastodon-responds-with-500-to-follow-request/1158.rss">Mastodon responds with 500 to Follow request</source>
        </item>
        <item>
          <title>Follow Activity python code not working, STUCK!</title>
          <dc:creator><![CDATA[farhan]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>Hi all,<br>
I am trying to wrote some sample Follow code and Instance response code on the Fediverse, but am not having success after a prolonged period of time.</p>
<p>In short, I am trying to simulate a Follow request from one instance to another. The Follow Request instance is supposed to be farhan@p.farhan.codes. This runs some custom Python code I have written. The receiving host is <a href="mailto:ngrok@ee880c3b32b8.ngrok.io">ngrok@ee880c3b32b8.ngrok.io</a>, an active instance running Pleroma.</p>
<p>I am having the receiving host, in this case ee880c3b32b8 (dot) ngrok (dot) io (changed because of forum limitations), reach back out to the test server, p.farhan.codes/users/farhan, upon which it reports back that there was a failure.</p>
<p>I suspect the mistake is somewhere in the httpsig or the response, but I have no idea where or what. My follow code is as follows below. Feel free to also reach out to the running host p.farhan.codes.</p>
<p>Please please assist! I am utterly stuck!<br>
<a href="https://dpaste.org/8OGk" rel="noopener nofollow ugc">https://dpaste.org/8OGk</a></p>
            <p><small>8 posts - 3 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/follow-activity-python-code-not-working-stuck/1130">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/follow-activity-python-code-not-working-stuck/1130</link>
          <pubDate>Sun, 08 Nov 2020 08:08:37 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-1130</guid>
          <source url="https://socialhub.activitypub.rocks/t/follow-activity-python-code-not-working-stuck/1130.rss">Follow Activity python code not working, STUCK!</source>
        </item>
        <item>
          <title>What happens after Follow request?</title>
          <dc:creator><![CDATA[farhan]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>Hi all,</p>
<p>I am trying to understand what a server does after a Follow request. Specifically:<br>
A. How does it verify the signature of the client request?<br>
B. How does it communicate the Accept object?<br>
C. How does the server reply to the Accept object?</p>
<p>Thanks!</p>
            <p><small>3 posts - 3 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/what-happens-after-follow-request/1127">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/what-happens-after-follow-request/1127</link>
          <pubDate>Sat, 07 Nov 2020 05:29:22 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-1127</guid>
          <source url="https://socialhub.activitypub.rocks/t/what-happens-after-follow-request/1127.rss">What happens after Follow request?</source>
        </item>
        <item>
          <title>Confused about the (two types of?) Actor Objects</title>
          <dc:creator><![CDATA[tinyrabbit]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>The Actor Object as described in the <a href="https://www.w3.org/TR/activitypub/#actor-objects" rel="noopener nofollow ugc">specification</a> has an Inobx property that is a JSON file (a Collection, in this case), but when a server <a href="https://www.w3.org/TR/activitypub/#delivery" rel="noopener nofollow ugc">retrieves the Actor JSON-LD representation to find its inbox</a>, I’m assuming it wants to find a URL path to post to. Something like <a href="https://blog.joinmastodon.org/2018/06/how-to-implement-a-basic-activitypub-server/" rel="noopener nofollow ugc">this.</a><br>
What <em>is</em> the Actor Object? Are there different types? Where should a remote server and/or a client find it?</p>
            <p><small>9 posts - 4 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/confused-about-the-two-types-of-actor-objects/1098">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/confused-about-the-two-types-of-actor-objects/1098</link>
          <pubDate>Wed, 21 Oct 2020 12:30:32 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-1098</guid>
          <source url="https://socialhub.activitypub.rocks/t/confused-about-the-two-types-of-actor-objects/1098.rss">Confused about the (two types of?) Actor Objects</source>
        </item>
        <item>
          <title>ActivityPub in Godmother&#39;s House</title>
          <dc:creator><![CDATA[marnanel]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>Back in July I wrote a couple of introductory pieces about how ActivityPub works server-to-server.</p>
<ul>
<li><a href="https://marnanel.dreamwidth.org/417305.html" rel="nofollow noopener">Part 1: Overview</a></li>
<li><a href="https://marnanel.dreamwidth.org/417662.html" rel="nofollow noopener">Part 2: Authentication</a></li>
</ul>
<p>I’d welcome suggested edits and ideas about what else the series should cover.</p>
<p>(The theme is based on Joyce Lankester Brisley’s children’s story <a href="https://www.goodreads.com/book/show/788236.Marigold_In_Godmother_s_House" rel="nofollow noopener"><em>Marigold in Godmother’s House</em></a>.)</p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/activitypub-in-godmothers-house/989">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/activitypub-in-godmothers-house/989</link>
          <pubDate>Fri, 02 Oct 2020 00:46:14 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-989</guid>
          <source url="https://socialhub.activitypub.rocks/t/activitypub-in-godmothers-house/989.rss">ActivityPub in Godmother&#39;s House</source>
        </item>
        <item>
          <title>Proposal: Mechanism for synchronizing followers lists across servers</title>
          <dc:creator><![CDATA[Claire]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <h2>Context</h2>
<p>Due to software bugs (e.g., Pleroma forgetting follow relationships a while ago, Mastodon mishandling Reject on Accepted Follows for the time being, etc.), crashes, backup rollbacks, etc., state may get out of sync between instances, in particular regarding followers information. With Mastodon’s follower-only privacy scope, this can get particularly damaging, as receiving remote instances are asked to deliver the message to who they know to follow the poster: if that gets out of sync, then the messages may reach people that the poster expects to not have access to.</p>
<p>Therefore, a mechanism to detect synchronization issues and correct them is needed. Such a mechanism has to take into account that the full list of an account’s followers may not be public information, and should thus only consider followers residing on a specific domain.</p>
<h2>Proposal</h2>
<p>Protocol extensions and an implementation are proposed in the following Mastodon Pull Request: <a href="https://github.com/tootsuite/mastodon/pull/14510" rel="nofollow noopener">https://github.com/tootsuite/mastodon/pull/14510</a></p>
<p>The basic idea being the addition of an optional <code>collectionSynchronization</code> attribute to activities such as <code>Create</code> and <code>Announce</code> activities. This attribute, typically set on activities addressed to the author’s followers specifically, would contain one or more <code>SynchronizationItem</code> objects with the following attributes:</p>
<ul>
<li>
<code>object</code>: the identifier of the collection this is describing. This collection MUST be owned by the activity’s author. For our current purposes, it must be the activity author’s followers collection.</li>
<li>
<code>domain</code>: the domain name of the instance the message is addressed to. It can be used to catch implementation bugs or to allow implementations to inline multiple <code>SynchronizationItem</code> corresponding to different servers in a same payload (e.g. when using relays)</li>
<li>
<code>partialCollection</code>: an URI to a collection that is the subset of the <code>object</code> collection made of the URIs of objects owned by <code>domain</code>. Accessing this collection SHOULD require the request to be signed (HTTP Sigs) with an account owned by the <code>domain</code>. For security reasons, it must be on the same domain as the collection it is describing.</li>
<li>
<code>digest</code>: A <a href="https://w3c-ccg.github.io/security-vocab/#Digest" rel="nofollow noopener">Digest</a> of the <code>partialCollection</code>'s items, in alphabetical order, and joined by a newline. In the proposed implementation, SHA256 (<code>http://www.w3.org/2001/04/xmlenc#sha256</code>) is the only acceptable algorithm. Choosing a common algorithm enables caching that information on each instance as necessary.</li>
</ul>
<p>A server receiving an activity with such a <code>SynchronizationItem</code> would check that it is the intended receiver (<code>domain</code> attribute), that the <code>object</code> is indeed the author’s follower collection, check that the <code>partialCollection</code> resides on the same domain name as the author, then check the digest, and in case that digest doesn’t match, it would fetch the <code>partialCollection</code>, remove any local follower not listed there, and send an <code>Undo Follow</code> for any follower listed there that it doesn’t know to be followers.</p>
<h2>Example</h2>
<p><code>Create</code> activity:</p>
<pre><code class="lang-json">{
  "@context": [
    "https://www.w3.org/ns/activitystreams",
    "https://w3id.org/security/v1",
    {
      "toot":"http://joinmastodon.org/ns#",
      "collectionSynchronization":"toot:collectionSynchronization",
      "SynchronizationItem":"toot:SynchronizationItem",
      "partialCollection": "toot:partialCollection"
  }],
  "id": "https://social.sitedethib.com/users/Thib/statuses/1234",
  "type": "Note",
  "attributedTo": "https://social.sitedethib.com/users/Thib",
  "to": ["https://social.sitedethib.com/users/Thib/followers"],
  "content": "This is just a private toot",
  "collectionSynchronization": [
    {
      "type": "SynchronizationItem",
      "domain": "mastodon.social",
      "object": "https://social.sitedethib.com/users/Thib/followers",
      "partialCollection": "https://social.sitedethib.com/users/Thib/followers_synchronization",
      "digest": {
        "type": "Digest",
        "digestAlgorithm": "http://www.w3.org/2001/04/xmlenc#sha256",
        "digestValue": "b08ab6951c7d6cc2b91e17ebd9557da7fae02489728e9332fcb3a97748244d50"
      }
    }
  ]
}
</code></pre>
<p>Result of querying <code>https://social.sitedethib.com/users/Thib/followers_synchronization</code> (when signing the request on behalf of a mastodon.social account):</p>
<pre><code class="lang-json">{
  "@context": "https://www.w3.org/ns/activitystreams",
  "id": "https://social.sitedethib.com/users/Thib/followers?domain=mastodon.social",
  "type": "OrderedCollection",
  "orderedItems": [
    "https://mastodon.social/users/Gargron"
  ]
}
</code></pre>
            <p><small>3 posts - 6 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/proposal-mechanism-for-synchronizing-followers-lists-across-servers/852">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/proposal-mechanism-for-synchronizing-followers-lists-across-servers/852</link>
          <pubDate>Tue, 04 Aug 2020 13:29:38 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>Yes</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-852</guid>
          <source url="https://socialhub.activitypub.rocks/t/proposal-mechanism-for-synchronizing-followers-lists-across-servers/852.rss">Proposal: Mechanism for synchronizing followers lists across servers</source>
        </item>
        <item>
          <title>Changeable usernames?</title>
          <dc:creator><![CDATA[grishka]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>It’s me and my weird edge cases again <img src="https://socialhub.activitypub.rocks/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"></p>
<p>In the spec, there’s nothing that inherently prevents one from changing their username, yet the very idea of it seems to be very much opposed by most of the community — or, at least, the Mastodon team. So I’m trying to understand why is that.</p>
<p>Here’s my understanding of the problem:</p>
<ul>
<li>The uniqueness of an AP object, internet-wide, is determined by its <code>id</code> a.k.a. <code>@id</code>. This is supposed to remain constant throughout the object lifetime.</li>
<li>The rest of the fields in an object can be changed, added, or removed with an <code>Update</code> containing that object, as long as the <code>id</code> remains the same. These fields include <code>url</code> and <code>preferredUsername</code> for actors.</li>
<li>So, as long as the <code>id</code> remains unchanged, there isn’t technically anything preventing one from changing their username.
<ul>
<li>Some implementations (again, Mastodon) use the username for both the <code>id</code> and the <code>url</code>. This means that Mastodon users won’t ever be able to change their usernames.</li>
<li>But, this would be effortless to implement in Smithereen — I already use database row IDs to generate my <code>id</code> URLs. It should already work as intended if another server does it this way.</li>
</ul>
</li>
</ul>
<p>So what is it, then, that prevents us from having changeable usernames?</p>
            <p><small>12 posts - 6 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/changeable-usernames/830">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/changeable-usernames/830</link>
          <pubDate>Wed, 29 Jul 2020 19:01:22 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-830</guid>
          <source url="https://socialhub.activitypub.rocks/t/changeable-usernames/830.rss">Changeable usernames?</source>
        </item>
        <item>
          <title>A proposal for signature algorithm specification</title>
          <dc:creator><![CDATA[vpzom]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>(following on from <a href="https://socialhub.activitypub.rocks/t/state-of-http-signatures/754/8" class="inline-onebox">State of HTTP Signatures?</a>)</p>
<p>The current version of the HTTP Signatures spec requires that the signature algorithm be “derived from metadata associated with ‘keyId’”. As far as I know, no implementation actually did this, and instead assumed all signatures were rsa-sha256 (of those that even updated to the new drafts).</p>
<p>Note that older versions of the spec included the algorithm in the signature, but this is insecure as malicious actors could specify a weaker algorithm than the real sender intended.</p>
<p>I propose the following solution, <em>roughly</em> based on the CCG’s <a href="https://w3c-ccg.github.io/security-vocab/#signatureAlgorithm" rel="nofollow noopener">Security Vocabulary</a>:</p>
<ul>
<li>Add a <code>signatureAlgorithm</code> field to the <code>publicKey</code> field on Actors, with a value chosen from the list in RFC 6931, most likely <code>http://www.w3.org/2001/04/xmldsig-more#rsa-sha256 </code>
</li>
<li>Parse incoming signatures based on the <code>signatureAlgorithm</code> value, with a subset of possible algorithms defined by the implementation. If the key is not present, default to rsa-sha256, since this is what current implementations use.</li>
</ul>
<p>I’ve implemented this with support for both rsa-sha256 and rsa-sha512 for incoming signatures in lotide, but would like to hear from other implementers in case there’s a better path. Additionally, what other signature algorithms would be worthwhile to add support for?</p>
            <p><small>6 posts - 3 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/a-proposal-for-signature-algorithm-specification/819">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/a-proposal-for-signature-algorithm-specification/819</link>
          <pubDate>Sat, 25 Jul 2020 20:15:34 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-819</guid>
          <source url="https://socialhub.activitypub.rocks/t/a-proposal-for-signature-algorithm-specification/819.rss">A proposal for signature algorithm specification</source>
        </item>
        <item>
          <title>Collections that are modifiable by actors other than their owner</title>
          <dc:creator><![CDATA[grishka]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>Continuing on my outbox questions, here’s the general construct I need: a collection that belongs to an actor that other actors can add objects to, with the owner having the ability to intervene. Examples:</p>
<ul>
<li>Walls, again — both owned by users and groups</li>
<li>Photo albums in groups, where any member can upload a photo</li>
<li>Discussion boards in groups, where any member can create a topic</li>
</ul>
<p>In all these cases, there needs to be the ability for the collection owner to refuse the activity/object to be added to the collection, for example due to their privacy settings — a user should be able to only allow their friends to post on their wall. The collection owner should also be able to arbitrarily delete objects from the collection, for spam prevention or moderation purposes, or, really, any reason because they own the thing.</p>
<p>What I suggest:</p>
<ul>
<li>Adding an object to a collection is done by specifying the collection ID in its <code>partOf</code> field, and then sending it to the collection owner.
<ul>
<li>If the receiving server accepts the addition, it simply responds with <code>200 OK</code> and stores the object in its database. It can then forward it to anyone it deems appropriate for the purpose of data consistency.</li>
<li>If it does not because that would violate owner’s privacy settings, it responds with <code>403 Unauthorized</code>. The originating server may reflect that in its UI.</li>
</ul>
</li>
<li>Deletion from the owner side is done by the owner sending a <code>Delete</code> with the original object ID as the <code>object</code> to the server that hosts the object being deleted, and optionally to any servers that it forwarded the object to earlier.</li>
</ul>
<p>Is this okay?</p>
            <p><small>5 posts - 4 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/collections-that-are-modifiable-by-actors-other-than-their-owner/815">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/collections-that-are-modifiable-by-actors-other-than-their-owner/815</link>
          <pubDate>Wed, 22 Jul 2020 22:25:55 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-815</guid>
          <source url="https://socialhub.activitypub.rocks/t/collections-that-are-modifiable-by-actors-other-than-their-owner/815.rss">Collections that are modifiable by actors other than their owner</source>
        </item>
        <item>
          <title>What is an outbox, really? What should be there? What should not?</title>
          <dc:creator><![CDATA[grishka]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>I’ve been thinking about walls and groups and whatnot and I realized I have more questions than I do answers. The spec says this:</p>
<blockquote>
<p>The outbox stream contains activities the user has published, subject to the ability of the requestor to retrieve the activity (that is, the contents of the outbox are filtered by the permissions of the person reading it). If a user submits a request without <a href="https://www.w3.org/TR/activitypub/#authorization" rel="nofollow noopener">Authorization</a> the server should respond with all of the <a href="https://www.w3.org/TR/activitypub/#public-addressing" rel="nofollow noopener">Public</a> posts.</p>
</blockquote>
<p>My understanding:</p>
<ul>
<li>Outbox absolutely should contain actor’s own posts as <code>Create{Note}</code>, if they’re capable of posting.</li>
<li>Outbox should contain <code>Announce</code> activities for those implementations that use them for reposting.</li>
<li>Outbox <em>may</em> contain actor’s comments, especially for implementations that don’t draw much of a line between top-level posts and replies.</li>
</ul>
<p>My questions up for discussion:</p>
<ul>
<li>Should an outbox contain likes? Likes on public posts are public in the sense that anyone who sees the post is in principle supposed to see the list of the actors who liked it.<br>
(consistency isn’t that great on the existing fediverse but I’ve improved it on my side a bit by LD-signing the likes and forwarding them to any instance that might have the post)</li>
<li>I implement Facebook-style walls and currently outboxes contain wall posts as well — these are activities made by actors other than the owner of the outbox. Is this okay? Is this not okay? Should I create a separate collection instead under <code>collections</code>? Is there an even better way?</li>
<li>Suppose an implementation has photo albums in addition to posts, as separate entities visible in the profiles of its actors in the UI. When an actor uploads a photo to their album, this produces an <code>Add{Photo}</code> or <code>Create{Photo}</code> activity. Should these activities be part of their outbox? Should these activities be part of <em>any</em> collection, or it’s enough to expose a collection of photo albums each of which then contains a collection of photos, each of which then contains collections of tags and comments and so on?</li>
<li>When a member of a public group does something, anything, that needs to be known by all members of the group in order to keep their local states in sync, does that activity go into the group’s outbox? Or maybe it doesn’t the way it is, maybe it makes sense to wrap it into another activity of a purpose-made type that’s on behalf of the group actor? See also <a href="https://socialhub.activitypub.rocks/t/groups-implementation/591/56" class="inline-onebox">Groups implementation</a> for a lengthy discussion on the subject.</li>
</ul>
            <p><small>3 posts - 3 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/what-is-an-outbox-really-what-should-be-there-what-should-not/814">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/what-is-an-outbox-really-what-should-be-there-what-should-not/814</link>
          <pubDate>Wed, 22 Jul 2020 21:55:54 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-814</guid>
          <source url="https://socialhub.activitypub.rocks/t/what-is-an-outbox-really-what-should-be-there-what-should-not/814.rss">What is an outbox, really? What should be there? What should not?</source>
        </item>
        <item>
          <title>Problems POSTing to Mastodon inbox</title>
          <dc:creator><![CDATA[aveltens]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>Hi,</p>
<p>Following the Instructions in <a href="https://blog.joinmastodon.org/2018/06/how-to-implement-a-basic-activitypub-server/" rel="nofollow noopener">How to implement a basic ActivityPub server</a>, I tried to POST a response to a Mastodon post from my own server.</p>
<p>The thing is: It does not show up, although I am getting a postive HTTP response (202 Accepted) and I am trying to figure out why. Perhaps someone here can give me a hint what is going on.</p>
<p>This is the kind of request I am making:</p>
<pre><code class="lang-auto">POST https://mastodon.social/inbox
Host: mastodon.social
Date: Mon, 13 Jul 2020 18:33:11 GMT
Signature: keyId="https://angelo.veltens.org/profile/actor#main-key",headers="(request-target) host date",signature="Q2n8kP3kqfqjP3FVhWwLQ/tqSSnRw5QYuNgodXzLM98fykRmp3eIvQJajOaAKgpMxlbeajFsbS8AjOQqX/mw4dcQnoYMRvlNxEwwmVGXxqIcuhjSqEdDScTCZhoNcI6yDthq0BwR3nUvd5uHhpsQ7nPYw6eOzxVQMXUSx6R95gAVwYh7cILmqE6/wUhduskcblNoFPsQUt1e9mEFYB1QR6QTN5d1MXmOvtV1Ze/VdTMmMpx3GuMklmtbOYtsqyfurBYPBYP2uYTxYCI7LzH8YpaD0uL+AdAV45ArUKvH8o6nhV2ZcPVUiuBrS5XVPMLdmgB2QRV85K9SE4KHlJWutQ=="

{
  "@context": "https://www.w3.org/ns/activitystreams",

  "id": "https://angelo.veltens.org/public/toots/hello-solid#create",
  "type": "Create",
  "actor": "https://angelo.veltens.org/profile/actor",

  "object": {
    "id": "https://angelo.veltens.org/public/toots/hello-solid#note",
    "type": "Note",
    "published": "2020-07-13T20:33:10+0200",
    "attributedTo": "https://angelo.veltens.org/profile/actor",
    "inReplyTo": "https://mastodon.social/@Gargron/100254678717223630",
    "content": "&lt;p&gt;Hello again from Solid&lt;/p&gt;",
    "to": "https://www.w3.org/ns/activitystreams#Public"
  }
}
</code></pre>
<p>And this is the response:</p>
<pre><code class="lang-auto">HTTP/1.1 202 Accepted
Date: Mon, 13 Jul 2020 18:33:13 GMT
Content-Type: text/html
Transfer-Encoding: chunked
Connection: keep-alive
Server: Mastodon
X-Frame-Options: DENY
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Set-Cookie: _mkra_stck=postgres%3A1594665198.514459; path=/; max-age=10; expires=Mon, 13 Jul 2020 18:33:23 GMT; HttpOnly
Vary: Accept-Encoding
Cache-Control: no-cache
Content-Security-Policy: base-uri 'none'; default-src 'none'; frame-ancestors 'none'; font-src 'self' https://static-cdn.mastodon.social; img-src 'self' https: data: blob: https://static-cdn.mastodon.social; style-src 'self' https://static-cdn.mastodon.social 'nonce-PoTtEgRXnAWfIn/QUIV9qg=='; media-src 'self' https: data: https://static-cdn.mastodon.social; frame-src 'self' https:; manifest-src 'self' https://static-cdn.mastodon.social; connect-src 'self' data: blob: https://static-cdn.mastodon.social https://files.mastodon.social wss://mastodon.social; script-src 'self' https://static-cdn.mastodon.social; child-src 'self' blob: https://static-cdn.mastodon.social; worker-src 'self' blob: https://static-cdn.mastodon.social
X-Request-Id: ddcbf0ea-4af9-4dd9-be57-1d8c6c8265c9
X-Runtime: 0.029216

&lt;Response body is empty&gt;

Response code: 202 (Accepted); Time: 109ms; Content length: 0 bytes
</code></pre>
<p>If I mess up the <code>Signature</code> header deliberately I am getting <code>401 (Unauthorized)</code>, so I guess my signature is fine.</p>
<p>What else could be wrong or what reasons exist, that the post does not show up?</p>
<p>Thank you very much for your help.</p>
            <p><small>23 posts - 7 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801</link>
          <pubDate>Mon, 13 Jul 2020 18:48:58 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-801</guid>
          <source url="https://socialhub.activitypub.rocks/t/problems-posting-to-mastodon-inbox/801.rss">Problems POSTing to Mastodon inbox</source>
        </item>
        <item>
          <title>State of HTTP Signatures?</title>
          <dc:creator><![CDATA[vpzom]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>The “Guide for new ActivityPub implementers” (<a href="https://socialhub.activitypub.rocks/t/guide-for-new-activitypub-implementers/479">here</a>) links to draft 8 of HTTP Signatures, but it seems there are <a href="https://datatracker.ietf.org/doc/draft-ietf-httpbis-message-signatures/" rel="nofollow noopener">newer versions</a> now that might not be exactly compatible? How are AP implementations treating this situation?</p>
            <p><small>21 posts - 6 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/state-of-http-signatures/754">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/state-of-http-signatures/754</link>
          <pubDate>Thu, 18 Jun 2020 14:48:35 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-754</guid>
          <source url="https://socialhub.activitypub.rocks/t/state-of-http-signatures/754.rss">State of HTTP Signatures?</source>
        </item>
        <item>
          <title>Understanding follow request</title>
          <dc:creator><![CDATA[farhan]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>In addition to the documentation, I am trying to understand the ActivityPub protocol through replaying messages to a personal server. I am trying to understand how Follow requests work, but running into problems.</p>
<ol>
<li>Where in the protocol documentation is the Follow example JSON?</li>
<li>What is the UUID value in the ID? How is that generated?</li>
<li>Why is the following request failing? I receive an internal error, as noted below:</li>
</ol>
<p><code>$ curl \ -H 'Content-Type: application/activity+json' \ https://testserver.farhan.codes/inbox/ -d '{"@context":["https://www.w3.org/ns/activitystreams","https://dev.farhan.codes/schemas/litepub-0.1.jsonld",{"@language":"und"}],"actor":"https://dev.farhan.codes/users/farhan","cc":["https://www.w3.org/ns/activitystreams#Public"],"id":"https://testserver.farhan.codes/activities/47e0a50f-fa4b-4339-bf3c-ec7e927379e7","object":"https://testserver.farhan.codes/users/farhan","published":"2020-06-11T06:02:42.553779Z","state":"pending","to":["https://testserver.farhan.codes/users/farhan"],"type":"Follow"}' {"errors":{"detail":"Internal server error"}}</code></p>
<p>Please advise. Thanks!</p>
            <p><small>9 posts - 4 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/understanding-follow-request/746">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/understanding-follow-request/746</link>
          <pubDate>Thu, 11 Jun 2020 20:17:02 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-746</guid>
          <source url="https://socialhub.activitypub.rocks/t/understanding-follow-request/746.rss">Understanding follow request</source>
        </item>
        <item>
          <title>Post deletions and their potential to break threads</title>
          <dc:creator><![CDATA[grishka]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>Suppose this happens: (users A and B are on the same instance)</p>
<ol>
<li>User A creates a post.</li>
<li>User B replies to that post.</li>
<li>User A replies to that reply.</li>
<li>User B deletes their first reply.</li>
<li>User B replies to user A’s reply and mentions the user C who is from another instance that doesn’t have any of these posts in its database.</li>
</ol>
<p>You end up with something like this, except the “test comment” is deleted:</p>
<p><img src="https://socialhub.activitypub.rocks/uploads/default/original/1X/f883ceb77cbfaf6db7f454921d81aa298b874fe4.png" alt="image" data-base62-sha1="zssO9s1gEqOhIASdKuSXnKuSKqM" width="418" height="283"></p>
<p>The issue: when user C’s instance receives a <code>Create</code> activity about the last reply and goes to fetch the complete thread, it can’t. The idea is that you would follow <code>inReplyTo</code> references up, until you encounter an object without this field, which means you’ve reached the top-level post. But if there is any deleted object along the way, you kind of hit a wall and don’t have any way of getting to the top-level post and thus completing your representation of the comment thread. Or do you? I’ve just tested with Mastodon and it doesn’t even return a <code>Tombstone</code>, it acts as if the post didn’t ever exist by returning a 404. Anyway, any ideas on solving this?</p>
<p>Related: going in the opposite direction, down from the top-level post, you have the exact same issue but with the <code>replies</code> collection.</p>
            <p><small>4 posts - 3 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/post-deletions-and-their-potential-to-break-threads/708">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/post-deletions-and-their-potential-to-break-threads/708</link>
          <pubDate>Sat, 23 May 2020 09:54:49 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-708</guid>
          <source url="https://socialhub.activitypub.rocks/t/post-deletions-and-their-potential-to-break-threads/708.rss">Post deletions and their potential to break threads</source>
        </item>
        <item>
          <title>Repost/share with quote a.k.a. attach someone else&#39;s post to your own post</title>
          <dc:creator><![CDATA[grishka]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>I thought I was going to be the first one to make these but as it turns out, Misskey already has this functionality, but it’s implemented in a weird way. Here’s the test post I made: <a href="https://misskey.io/notes/86wfb5uayv" rel="nofollow noopener">https://misskey.io/notes/86wfb5uayv</a></p>
<p>And here’s it as an AP object:</p>
<pre><code class="lang-json">{
  "@context": [
    "https://www.w3.org/ns/activitystreams",
    "https://w3id.org/security/v1",
    {
      "Hashtag": "as:Hashtag"
    }
  ],
  "id": "https://misskey.io/notes/86wfb5uayv",
  "type": "Note",
  "attributedTo": "https://misskey.io/users/81qo6ts4l7",
  "summary": null,
  "content": "&lt;p&gt;&lt;span&gt;TIL that some fediverse software already allows reposts with quotes.&lt;br&gt;&lt;br&gt;RE: &lt;/span&gt;&lt;a href=\"https://friends.grishka.me/posts/12082\"&gt;https://friends.grishka.me/posts/12082&lt;/a&gt;&lt;/p&gt;",
  "_misskey_content": "TIL that some fediverse software already allows reposts with quotes.",
  "_misskey_quote": "https://friends.grishka.me/posts/12082",
  "quoteUrl": "https://friends.grishka.me/posts/12082",
  "published": "2020-05-04T19:10:39.442Z",
  "to": [
    "https://www.w3.org/ns/activitystreams#Public"
  ],
  "cc": [
    "https://misskey.io/users/81qo6ts4l7/followers"
  ],
  "inReplyTo": null,
  "attachment": [],
  "sensitive": false,
  "tag": []
}
</code></pre>
<p>As you see, it does two things:</p>
<ul>
<li>There’s the URL for the quoted post, but for some reason it’s in two different fields. Of course the <code>_misskey</code> ones are completely custom, but I can’t seem to figure out where <code>quoteUrl</code> comes from and what it’s used by — it’s not in the ActivityStreams vocabulary.</li>
<li>There’s also this URL in the content, presumably for backwards compatibility with Mastodon, Pleroma etc.</li>
</ul>
<p>Anyway, let’s figure out the best way to standardize these reposts.</p>
            <p><small>17 posts - 6 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/repost-share-with-quote-a-k-a-attach-someone-elses-post-to-your-own-post/659">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/repost-share-with-quote-a-k-a-attach-someone-elses-post-to-your-own-post/659</link>
          <pubDate>Mon, 04 May 2020 20:39:37 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-659</guid>
          <source url="https://socialhub.activitypub.rocks/t/repost-share-with-quote-a-k-a-attach-someone-elses-post-to-your-own-post/659.rss">Repost/share with quote a.k.a. attach someone else&#39;s post to your own post</source>
        </item>
        <item>
          <title>How are you handling deletes / undeletes?</title>
          <dc:creator><![CDATA[dessalines]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p><a class="mention" href="/u/nutomic">@nutomic</a> and I currently have the ability in Lemmy to delete a thing, but then undelete it, since deleting really just sets a <code>deleted</code> boolean column for the object, and all actions in Lemmy are reversible.</p>
<p>In adding federated actions, we’re using a Delete activitypub , which sends a tombstone to the other servers (I don’t know if this is correct, maybe it should just reference the object URI?</p>
<pre><code class="lang-auto">Shared inbox received activity: {"type":"Delete","
actor":"http://lemmy_beta:8550/u/lemmy_beta","object":{"type":"Tombstone","id":"http://lemmy_beta:8550/c/trawl_4","formerType":"Group
","deleted":"2020-04-30T21:15:21.690553+00:00"},"id":"http://lemmy_beta:8550/c/trawl_4/delete/7e0cdb49-1d16-47cd-8026-970e6c0945db","
@context":"https://www.w3.org/ns/activitystreams","to":"https://www.w3.org/ns/activitystreams#Public","cc":"http://lemmy_beta:8550/c/
trawl_4/followers"}
</code></pre>
<p>But also, how are yall handling undeletes? Maybe <code>Undo</code> referencing the delete id?</p>
            <p><small>5 posts - 4 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/how-are-you-handling-deletes-undeletes/655">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/how-are-you-handling-deletes-undeletes/655</link>
          <pubDate>Fri, 01 May 2020 01:10:02 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-655</guid>
          <source url="https://socialhub.activitypub.rocks/t/how-are-you-handling-deletes-undeletes/655.rss">How are you handling deletes / undeletes?</source>
        </item>
        <item>
          <title>Service Capability Discovery</title>
          <dc:creator><![CDATA[koehn]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>The S2S specification doesn’t appear to have an API for discovering what capabilities an Actor’s server supports. As an example, I happen to know that right now Mastodon doesn’t support AP features such as relationships, so I shouldn’t offer my users an option to use those features with actors running on Mastodon. If I did, the experience for my user would be confusing (“I sent Bob an <code>Offer</code> activity (friend request), but Bob never responded,” when Mastodon never presented Bob with the activity).</p>
<p>How can I as a developer (on behalf of my users), know what features are supported for a given Actor? Manually maintaining a table of (Server, Version) =&gt; [Feature] seems inadequate, but also seems like the only option available to me right now.</p>
<p>How is service interoperability supposed to work in this model?</p>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/service-capability-discovery/630">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/service-capability-discovery/630</link>
          <pubDate>Tue, 21 Apr 2020 13:00:50 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-630</guid>
          <source url="https://socialhub.activitypub.rocks/t/service-capability-discovery/630.rss">Service Capability Discovery</source>
        </item>
        <item>
          <title>How should anonymized Likes work?</title>
          <dc:creator><![CDATA[vpzom]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>Link aggregation sites typically work by sorting posts using anonymous likes. How should this work in ActivityPub, where Likes are associated with users? Could we somehow federate numbers instead of individual objects for this? Or at least send likes without revealing the liker?</p>
            <p><small>3 posts - 3 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/how-should-anonymized-likes-work/628">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/how-should-anonymized-likes-work/628</link>
          <pubDate>Tue, 21 Apr 2020 00:24:06 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-628</guid>
          <source url="https://socialhub.activitypub.rocks/t/how-should-anonymized-likes-work/628.rss">How should anonymized Likes work?</source>
        </item>
        <item>
          <title>Murmurations protocol for directories and maps</title>
          <dc:creator><![CDATA[strypey]]></dc:creator>
          <category>Server to Server</category>
          <description><![CDATA[
            <p>I wonder if this is or could be compatible with AP?</p>
<p>"Rather than creating centralised data sets, The Murmurations protocol makes it easy for Organisations to host data about themselves on their own web sites.</p>
<p>The data is structured in a way that it can be automatically ‘crawled’ and aggregated, based on specific filterable criteria, so that directories and maps are automatically updated about an organisation from a single authoritative source. That source being the organisation itself!"<br>
<a href="https://murmurations.network/" class="onebox" target="_blank" rel="nofollow noopener">https://murmurations.network/</a></p>
<p>Apparently it can speak JSON.</p>
<blockquote>
<p>now we have built a stand-alone .json file creator to enable anyone running any other type of website to create their profile and add their org / project to the index<br>
<a href="https://www.loomio.org/d/xbZAQPDa/murmurations-protocol" rel="nofollow noopener">https://www.loomio.org/d/xbZAQPDa/murmurations-protocol</a></p>
</blockquote>
<p>White paper here:<br>
<aside class="onebox pdf">
  <header class="source">
      <a href="https://murmurations.network/wp-content/uploads/2019/09/murmurations-white-paper-v0.1.0.pdf" target="_blank" rel="nofollow noopener">murmurations.network</a>
  </header>
  <article class="onebox-body">
    <a href="https://murmurations.network/wp-content/uploads/2019/09/murmurations-white-paper-v0.1.0.pdf" target="_blank" rel="nofollow noopener"><span class="pdf-onebox-logo"></span></a>
<h3><a href="https://murmurations.network/wp-content/uploads/2019/09/murmurations-white-paper-v0.1.0.pdf" target="_blank" rel="nofollow noopener">murmurations-white-paper-v0.1.0.pdf</a></h3>

<p class="filesize">77.39 KB</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
            <p><small>15 posts - 6 participants</small></p>
            <p><a href="https://socialhub.activitypub.rocks/t/murmurations-protocol-for-directories-and-maps/609">Read full topic</a></p>
          ]]></description>
          <link>https://socialhub.activitypub.rocks/t/murmurations-protocol-for-directories-and-maps/609</link>
          <pubDate>Mon, 13 Apr 2020 06:54:31 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">socialhub.activitypub.rocks-topic-609</guid>
          <source url="https://socialhub.activitypub.rocks/t/murmurations-protocol-for-directories-and-maps/609.rss">Murmurations protocol for directories and maps</source>
        </item>
  </channel>
</rss>
