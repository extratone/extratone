<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Guide for new ActivityPub implementers - SocialHub</title>
    <meta name="generator" content="Discourse 2.8.0.beta2 - https://github.com/discourse/discourse version c39ab6c0ae3803b6a62501954ae40adb6b73d580">
<link rel="icon" type="image/png" href="../uploads/default/optimized/1X/b7023860b3d7df97ea10ba3c7ab11cb046a77c7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../uploads/default/optimized/1X/8faac84234dc73d074dadaa2bcf24dc746b8647f_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../t/draft-guide-for-new-activitypub-implementers/479.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://socialhub.activitypub.rocks","potentialAction":{"@type":"SearchAction","target":"https://socialhub.activitypub.rocks/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../opensearch.xml" title="SocialHub Search">

    <link href="../stylesheets/publish_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="publish" />

  <link href="../stylesheets/publish_desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="publish_desktop" />

  <link href="../stylesheets/discourse-assign_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-assign" />
  <link href="../stylesheets/discourse-calendar_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-calendar" />
  <link href="../stylesheets/discourse-canned-replies_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-canned-replies" />
  <link href="../stylesheets/discourse-checklist_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-checklist" />
  <link href="../stylesheets/discourse-details_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-details" />
  <link href="../stylesheets/discourse-footnote_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-footnote" />
  <link href="../stylesheets/discourse-graphviz_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-graphviz" />
  <link href="../stylesheets/discourse-local-dates_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-local-dates" />
  <link href="../stylesheets/discourse-locations_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-locations" />
  <link href="../stylesheets/discourse-math_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-math" />
  <link href="../stylesheets/discourse-narrative-bot_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-narrative-bot" />
  <link href="../stylesheets/discourse-policy_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-policy" />
  <link href="../stylesheets/discourse-presence_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-presence" />
  <link href="../stylesheets/discourse-saved-searches_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-saved-searches" />
  <link href="../stylesheets/discourse-shared-edits_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-shared-edits" />
  <link href="../stylesheets/discourse-solved_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-solved" />
  <link href="../stylesheets/discourse-spoiler-alert_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-spoiler-alert" />
  <link href="../stylesheets/discourse-voting_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-voting" />
  <link href="../stylesheets/discourse-whos-online_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-whos-online" />
  <link href="../stylesheets/lazy-yt_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="lazy-yt" />
  <link href="../stylesheets/poll_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="poll" />
  <link href="../stylesheets/discourse-calendar_desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-calendar_desktop" />
  <link href="../stylesheets/discourse-locations_desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-locations_desktop" />
  <link href="../stylesheets/discourse-voting_desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="discourse-voting_desktop" />
  <link href="../stylesheets/poll_desktop_caa977791d50efc800b8ef1bcbafb8a15f082761.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" data-target="poll_desktop" />

  <link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_5_969dd27459c19a0b7620746a3d179b86ef033d7a.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_3_f50bf2f225326f482d56e65e93f1f047d48417a9.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_8_e3f93470fef56ec97b63f77e16779e328baab8ea.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="8"/>
<link href="https://socialhub.activitypub.rocks/stylesheets/desktop_theme_4_8d506fd22b761a15044193a6d4ebda5f6bde2498.css?__ws=socialhub.activitypub.rocks" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4"/>

    
    
  </head>
  <body class="published-page guide-for-new-activitypub-implementers topic-479 draft activitypub">
    
<script src="https://socialhub.activitypub.rocks/theme-javascripts/3a68d4ddcab78e923b7c4169708a8f1deb79df66.js?__ws=socialhub.activitypub.rocks"></script>
    <link href="../stylesheets/color_definitions_light_2_3_02b5438f3657e77e9ea02422453c87de522549c5.css@__ws=socialhub.activitypub.rocks.css" media="all" rel="stylesheet" class="light-scheme"/>

<div class="published-page-header">
    <div class="published-page-header-wrapper">
        <a href="https://socialhub.activitypub.rocks">
          <img class="published-page-logo" src="https://socialhub.activitypub.rocks/uploads/default/original/1X/2957f9f20df131569f26dd7b28bbe7f4af5739f5.png"/>
        </a>
      <h1 class="published-page-title">Guide for new ActivityPub implementers</h1>
    </div>
  </div>
<div class="published-page-content-wrapper">
  <div class="published-page-content-header">
    <div class="published-page-author">
      <img class="avatar" src="../letter_avatar_proxy/v4/letter/n/da6949/90.png">
      <div class="published-page-author-details">
        <div class="username">nedjo</div>
        <div class="topic-created-at">January 21, 2020</div>
      </div>
    </div>
  </div>
    <div class="published-page-content-body">
      <p>This wiki post is a place for collaboratively drafting ActivityPub documentation with the hope that this material may be incorporated into proposed improvements to the activitypub.rocks site, see <a href="../t/discussing-the-evolution-of-the-activitypub-rocks-site/142.html">the conversation about the new main page</a> and the <a href="https://rigelk.gitlab.io/activitypub.rocks/" rel="noopener nofollow ugc">demonstration </a>.</p>
<div data-theme-toc="true"> </div>
<h2>
<a name="about-this-guide" class="anchor" href="guide-for-new-activitypub-implementers.html#about-this-guide"></a>About this guide</h2>
<p>This is an informal guide to help new implementers get up to speed with the <a href="https://www.w3.org/TR/activitypub" rel="noopener nofollow ugc">ActivityPub specification</a> and how to built projects with ActivityPub support.</p>
<h3>
<a name="why-choose-activitypub" class="anchor" href="guide-for-new-activitypub-implementers.html#why-choose-activitypub"></a>Why choose ActivityPub?</h3>
<p>Why might you choose to implement ActivityPub in your project? Possible reasons include:</p>
<ul>
<li>“to move beyond the silos of social media sites run by individual companies” (<a href="https://flak.tedunangst.com/post/ActivityPub-as-it-has-been-understood" rel="noopener nofollow ugc">ActivityPub as it has been understood</a>)</li>
<li>Interoperability with other software supporting the same protocols.</li>
<li>Ability to build off existing implementations.</li>
<li>Collaboration opportunities.</li>
</ul>
<h3>
<a name="disclaimers" class="anchor" href="guide-for-new-activitypub-implementers.html#disclaimers"></a>Disclaimers</h3>
<p>This guide includes lots of links to various projects. The point is not “this is the best implementation” so much as “here’s some stuff that could be useful”.</p>
<p>This guide is intended to <em>supplement</em> and expand on what’s in the relevant specs. Those specs remain the primary sources and will cover a lot that isn’t covered here.</p>
<p>Before deep-diving into technical details it is recommended to read <a href="https://cjslep.com/c/blog/an-activitypub-philosophy" rel="noopener nofollow ugc">An ActivityPub Philosophy</a> which places the ActivityPub standard in its proper context, and helps taking the proper approach when building extensions.</p>
<h2>
<a name="resources" class="anchor" href="guide-for-new-activitypub-implementers.html#resources"></a>Resources</h2>
<p>If you’re used to specifications that are written in obscure technospeak, you may be pleasantly surprised when you look at the <a href="https://www.w3.org/TR/activitypub" rel="noopener nofollow ugc">ActivityPub specification</a>. The authors put in a lot of effort to try to make the spec readable and easy to understand. A good starting place is the <a href="https://www.w3.org/TR/activitypub/#Overview" rel="noopener nofollow ugc">overview</a>.</p>
<h3>
<a name="specifications" class="anchor" href="guide-for-new-activitypub-implementers.html#specifications"></a>Specifications</h3>
<p>Sooner or later as an ActivityPub implementer you’ll find yourself spending some time with many or most of the relevant specifications.</p>
<ul>
<li>Specification for <a href="https://www.w3.org/TR/activitypub" rel="noopener nofollow ugc">ActivityPub</a>
</li>
<li>Specification for <a href="https://www.w3.org/TR/activitystreams-core" rel="noopener nofollow ugc">ActivityStreams</a>, the basis of ActivityPub.</li>
<li>Specification for <a href="https://www.w3.org/TR/activitystreams-vocabulary" rel="noopener nofollow ugc">Activity Vocabulary</a>, which details “extended types” for ActivityStreams actors and object such as Person and Note.</li>
<li>Some work has been done towards <a href="https://litepub.social/litepub" rel="noopener nofollow ugc">Litepub</a>, a set of protocols extending ActivityPub. At time of writing (January 2020), that work appears to be on pause.</li>
<li>ActivityPub and its two related specs, Activity Streams and Activity Vocabulary, all structure their data in JSON-LD. The <a href="https://www.w3.org/TR/json-ld" rel="noopener nofollow ugc">JSON-LD specification</a> is a hefty one and if you’re new to the format you may want to start with introductory material, such as:
<ul>
<li><a href="https://json-ld.org/primer/latest" rel="noopener nofollow ugc">JSON-LD Primer</a></li>
<li><a href="https://blog.jonm.dev/posts/intro-json-ld" rel="noopener nofollow ugc">An Introduction to JSON-LD</a></li>
</ul>
</li>
</ul>
<h3>
<a name="tutorials" class="anchor" href="guide-for-new-activitypub-implementers.html#tutorials"></a>Tutorials</h3>
<ul>
<li>
<a href="https://blog.joinmastodon.org/2018/06/how-to-implement-a-basic-activitypub-server" rel="noopener nofollow ugc">How to implement a basic ActivityPub server</a> (Mastodon)</li>
<li><a href="https://hacks.mozilla.org/2018/11/decentralizing-social-interactions-with-activitypub" rel="noopener nofollow ugc">Decentralizing Social Interactions with ActivityPub</a></li>
<li><a href="https://tinysubversions.com/notes/reading-activitypub/" rel="noopener nofollow ugc">A Highly Opinionated Guide to Learning About ActivityPub</a></li>
<li>Video (in Spanish), <a href="https://vimeo.com/256483933" rel="noopener nofollow ugc">Mini implementación de ActivityPub en Ruby</a>
</li>
</ul>
<p>          <iframe width="640" height="360" src="https://player.vimeo.com/video/256483933" data-original-href="https://vimeo.com/256483933" frameborder="0" allowfullscreen="" seamless="seamless" sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation"></iframe>
</p>
<h3>
<a name="technical-activitypub-introductions" class="anchor" href="guide-for-new-activitypub-implementers.html#technical-activitypub-introductions"></a>Technical ActivityPub introductions</h3>
<ul>
<li>
<a href="https://librelounge.org" rel="noopener nofollow ugc">LibreLounge podcast</a>
<ul>
<li><a href="https://librelounge.org/episodes/episode-12-activitypub-part-1.html" rel="noopener nofollow ugc">Episode 12: ActivityPub Part 1</a></li>
<li><a href="https://librelounge.org/episodes/episode-17-activitypub-part-2.html" rel="noopener nofollow ugc">Episode 17: ActivityPub Part 2</a></li>
<li><a href="https://librelounge.org/episodes/episode-20-activitypub-part-3.html" rel="noopener nofollow ugc">Episode 20: ActivityPub Part 3</a></li>
</ul>
</li>
<li>
<a href="https://flak.tedunangst.com/post/ActivityPub-as-it-has-been-understood" rel="noopener nofollow ugc">ActivityPub as it has been understood</a>–includes lots of relevant links.</li>
<li>
<a href="https://blog.soykaf.com/post/activity-pub-in-pleroma" rel="noopener nofollow ugc">ActivityPub in Pleroma</a>.</li>
</ul>
<h3>
<a name="api-documentation-for-specific-implementations" class="anchor" href="guide-for-new-activitypub-implementers.html#api-documentation-for-specific-implementations"></a>API documentation for specific implementations</h3>
<ul>
<li>
<a href="https://docs.joinpeertube.org/#/api-activitypub" rel="noopener nofollow ugc">PeerTube ActivityPub API</a>.</li>
<li><a href="https://docs.funkwhale.audio/federation/index.html" rel="noopener nofollow ugc">FunkWhale Federation</a></li>
<li>
<a href="https://blog.moodle.net/2018/what-is-activitypub/" rel="noopener nofollow ugc">What is ActivityPub?</a> (MoodleNet)</li>
<li><a href="https://docs.joinmastodon.org/spec/activitypub" rel="noopener nofollow ugc">Mastodon ActivityPub API</a></li>
</ul>
<h3>
<a name="areas-of-critique-and-debate" class="anchor" href="guide-for-new-activitypub-implementers.html#areas-of-critique-and-debate"></a>Areas of critique and debate</h3>
<p>As you assess the work of implementing in ActivityPub it can help to be up on some of the areas of discussion within the community.</p>
<h4>
<a name="decisions-against-adopting-activitypub" class="anchor" href="guide-for-new-activitypub-implementers.html#decisions-against-adopting-activitypub"></a>Decisions against adopting ActivityPub</h4>
<p>The Diaspora project has effectively decided against integrating with ActivityPub, see <a href="https://github.com/diaspora/diaspora/issues/7422" rel="noopener nofollow ugc">this issue</a> which includes some critiques of the protocol. See also <a href="https://schub.wtf/blog/2019/01/13/activitypub-final-thoughts-one-year-later.html" rel="noopener nofollow ugc">ActivityPub - Final thoughts, one year later</a>.</p>
<h4>
<a name="private-content-and-trust" class="anchor" href="guide-for-new-activitypub-implementers.html#private-content-and-trust"></a>Private content and trust</h4>
<p>At <a href="https://blog.dereferenced.org" rel="noopener nofollow ugc">https://blog.dereferenced.org</a> and elsewhere, Ariadne Conill has critiqued the ActivityPub specification from a trust and safety perspective. See <a href="https://blog.dereferenced.org/activitypub-the-worse-is-better-approach-to-federated-social-networking" rel="noopener nofollow ugc">ActivityPub: The “Worse Is Better” Approach to Federated Social Networking</a> and subsequent posts.</p>
<p>Others have critiqued the ActivityPub federation model’s reliance on external sites maintaining privacy restrictions. One commenter <a href="https://beesbuzz.biz/blog/4379-Im-warming-up-to-ActivityPub" rel="noopener nofollow ugc">noted</a>:</p>
<blockquote>
<p>For the sake of privacy and safety I think that private posts should still only be pushed in stub/notification form (mostly because I don’t trust most ActivityPub implementations to keep private stuff private)</p>
</blockquote>
<h4>
<a name="federation-issues" class="anchor" href="guide-for-new-activitypub-implementers.html#federation-issues"></a>Federation issues</h4>
<p>From <a href="https://wiki.freedombone.net/view/welcome-visitors/view/a-peoples-history-of-the-fediverse/view/protocol-wars/view/views-on-activitypub" rel="noopener nofollow ugc">A People’s History of the Fediverse</a></p>
<blockquote>
<p>ActivityPub didn’t solve the longstanding federation issues which had been known about since before its creation, such as nomadic identity, key based identity rather than domain based identity and the ability to easily migrate accounts between instances.</p>
</blockquote>
<h2>
<a name="whats-already-out-there" class="anchor" href="guide-for-new-activitypub-implementers.html#whats-already-out-there"></a>What’s already out there?</h2>
<p>As you start in, it’s useful to get a sense of what ActivityPub implementations and code projects already exist. Doing so will help you:</p>
<ul>
<li>Identify opportunities to collaborate and combine efforts.</li>
<li>Identify examples and models to work from.</li>
<li>See how your project relates to others.</li>
<li>Connect with the ActivityPub community.</li>
</ul>
<p>A wiki page on the Fediverse.Party site, <a href="https://git.feneas.org/feneas/fediverse/-/wikis/watchlist-for-activitypub-apps" rel="noopener nofollow ugc">watchlist for ActivityPub apps</a>, contains one of the most extensive listings of ActivityPub projects. See in particular the <a href="https://git.feneas.org/feneas/fediverse/-/wikis/watchlist-for-activitypub-apps#developer-tools" rel="noopener nofollow ugc">developer tools</a> section for lots of packages, libraries, and other software useful to ActivityPub implementers.</p>
<p>Additional places to look include:</p>
<ul>
<li>The <a href="../c/software/index.html">Software category</a> and <a href="https://socialhub.activitypub.rocks/c/programming/33">Programming category</a> on the <a href="https://socialhub.activitypub.rocks">ActivityPub SocialHub forum</a>.</li>
<li>A <a href="https://ethercalc.org/fediverse-stacks" rel="noopener nofollow ugc">web spreadsheet of AP apps</a> and their characteristics by <a href="https://socialhub.activitypub.rocks/mayel">@mayel</a> from Social.coop.</li>
<li>Fediverse.Party, which lists Fediverse projects including ones that support ActivityPub. You can find information in two places:
<ul>
<li>The <a href="https://fediverse.party" rel="noopener nofollow ugc">home page</a> has links to a curated list of Fediverse projects. Click on each to find very detailed information on the projects, including the languages they’re written in.</li>
<li>A list of <a href="https://fediverse.party/en/miscellaneous" rel="noopener nofollow ugc">more apps</a> has more basic information on a bunch of other projects. On this page you can filter to see only apps that support ActivityPub.</li>
</ul>
</li>
<li>The various Fediverse aggregators, some of which include information on the software running each instance.</li>
</ul>
<h2>
<a name="implementing-activitypub" class="anchor" href="guide-for-new-activitypub-implementers.html#implementing-activitypub"></a>Implementing ActivityPub</h2>
<p>The ActivityPub, Activity Streams, and Activity Vocabulary specifications are the main places to look for details on what’s required to implement ActivityPub support. The notes here are intended to give pointers on areas not covered by the specs or where clarification or subsequent work is relevant.</p>
<h3>
<a name="activitypub-objects-and-activities" class="anchor" href="guide-for-new-activitypub-implementers.html#activitypub-objects-and-activities"></a>ActivityPub objects and activities</h3>
<p>While formally there are eight <a href="https://www.w3.org/TR/activitystreams-vocabulary/#types" rel="noopener nofollow ugc">core object types</a> defined in the Activity Vocabulary spec, with many <a href="https://www.w3.org/TR/activitystreams-vocabulary/#extendedtypes" rel="noopener nofollow ugc">“extended” types</a>, it can help to think of these objects as falling into four main groups:</p>
<ul>
<li>
<a href="https://www.w3.org/TR/activitystreams-vocabulary/#dfn-activity" rel="noopener nofollow ugc"><code>Activity</code></a> objects like <code>Follow</code> or <code>Announce</code>. An activity is an action undertaken by an actor.</li>
<li>
<a href="https://www.w3.org/TR/activitystreams-vocabulary/#dfn-activity" rel="noopener nofollow ugc">Actor objects</a>, like a <code>Person</code> or <code>Group</code>. Actors undertake activities like following or creating content.</li>
<li>
<a href="https://www.w3.org/TR/activitystreams-vocabulary/#object-types" rel="noopener nofollow ugc">Object (and link) types</a> such as a <code>Note</code> or a <code>Video</code>. These objects types usually represent content of some sort.</li>
<li>
<a href="https://www.w3.org/TR/activitystreams-core/#collections" rel="noopener nofollow ugc"><code>Collection</code></a> objects. These are groupings or listings of multiple other objects, such as a list of followers of a particular person or a list of public posts.</li>
</ul>
<p>Implementing ActivityPub support is about letting actors like site members on your application or site - in the Fediverse, often called an <em>instance</em> - have back and forth exchanges with actors on other instances. As discussed in <a href="https://librelounge.org/episodes/episode-12-activitypub-part-1.html" rel="noopener nofollow ugc">Episode 12: ActivityPub Part 1</a> of the <a href="https://librelounge.org" rel="noopener nofollow ugc">LibreLounge podcast</a> (15:26 - 20:24), ActivityPub structures these exchanges in a way that’s analogous to a simple subject-verb-object statement. In every message that’s sent server-to-server:</p>
<blockquote>
<p><em>Somebody</em> is doing <em>something</em> to some <em>object</em>. In ActivityPub terms, that’s an <em>Actor</em> is performing an <em>Activity</em> on an <em>Object</em>.</p>
</blockquote>
<p>In ActivityPub, two servers are federated with each other when there is a relationship between one or more actors on each. A common relationship is <em>following</em>: an actor on one server follows an actor on another server. From there, a whole set of other activities are opened up, like when the followed actor posts a <code>Note</code> or <code>Video</code>, the follower’s account receives a notification (in the form of a <code>Create</code> activity).</p>
<p>Some data are tracked on both sides of the relationship. For example, if <code>@chris@example1.org</code> follows <code>@georgie@example2.net</code>, that relationship is tracked both as a record on <a href="http://example1.org" rel="noopener nofollow ugc">example1.org</a> (georgie is in chris’s following collection) and on <a href="http://example2.net" rel="noopener nofollow ugc">example2.net</a> (chris is in georgie’s followers collection).</p>
<p>ActivityPub URIs serve a dual role depending on the HTTP method used. Pretty much, a given URI such as the <code>id</code> URI of a <code>Person</code> or the URI of an actor’s <code>inbox</code>supports two types of operations:</p>
<ul>
<li>GET <em>fetches</em> an object or collection of objects.</li>
<li>POST <em>receives</em> an activity in JSON-LD format.</li>
</ul>
<p>Note that instead of the other standard HTTP methods - PATCH, PUT, DELETE - there are different activity types (<code>Create</code>, <code>Update</code>, <code>Delete</code>).</p>
<p>The <code>id</code> of an object is a URI that can be “dereferenced”–that is, assuming appropriate access authorization, a GET request to the URI will look up and return the full object.</p>
<p>So URIs that are the <code>id</code> of a single object such as an <code>Actor</code> return data about that object. Other URIs, such as that of an actor’s <code>outbox</code>, can return a <code>Collection</code> of objects.</p>
<h3>
<a name="json-ld" class="anchor" href="guide-for-new-activitypub-implementers.html#json-ld"></a>JSON-LD</h3>
<p>If you’re developing for ActivityPub, you’re going to be dealing with JSON-LD, since that’s the format ActivityPub JSON is in. While JSON-LD <em>can</em> be handled as regular JSON, there are also specialized tools in JSON-LD that may be valuable to your application.</p>
<h4>
<a name="expansion-compaction-flattening" class="anchor" href="guide-for-new-activitypub-implementers.html#expansion-compaction-flattening"></a>Expansion, compaction, flattening</h4>
<p>One thing you’ll quickly notice when reading through code examples in the ActivityPub specifications is that the JSON-LD can be super variable in its format. Add to that the fact it will be coming from any number of different implementations and you’ve got a big challenge when it comes to parsing the incoming information.</p>
<p>So it’s worth noting that JSON-LD supports compacted and expanded formats as well as flattening of either. To avoid having to directly manage the inconsistencies of the compact format, you may want to standardize on <a href="https://w3c.github.io/json-ld-api/#expansion" rel="noopener nofollow ugc">expanded</a> and flattened, then compact before returning. <a href="https://w3c.github.io/json-ld-api/#flattening" rel="noopener nofollow ugc">Flattening</a>:</p>
<blockquote>
<p>may drastically simplify the code required to process JSON-LD data in certain applications.</p>
</blockquote>
<p>Discussion: <a href="https://jeremydormitzer.com/blog/more-than-json.html" rel="noopener nofollow ugc">More than JSON: ActivityPub and JSON-LD</a>.</p>
<h4>
<a name="conversion-to-and-from-rdf" class="anchor" href="guide-for-new-activitypub-implementers.html#conversion-to-and-from-rdf"></a>Conversion to and from RDF</h4>
<p>If you’re working in an environment where there’s existing support for <a href="https://www.w3.org/2001/sw/wiki/RDF" rel="noopener nofollow ugc">RDF</a>, you might want to look at JSON-LD support for <a href="https://w3c.github.io/json-ld-api/#rdf-serialization-deserialization" rel="noopener nofollow ugc">RDF serialization and deserialization</a>.</p>
<h4>
<a name="json-ld-libraries-and-packages" class="anchor" href="guide-for-new-activitypub-implementers.html#json-ld-libraries-and-packages"></a>JSON-LD libraries and packages</h4>
<p>The JSON-LD specification is widely supported and you may find an implementation in your programming language that will provide basic functionality such as methods to expand, compact, and flatten. Packages include:</p>
<ul>
<li>PHP
<ul>
<li><a href="https://github.com/lanthaler/JsonLD" rel="noopener nofollow ugc">JsonLD</a></li>
<li><a href="https://github.com/digitalbazaar/php-json-ld" rel="noopener nofollow ugc">php-json-ld</a></li>
</ul>
</li>
<li>Python
<ul>
<li><a href="https://github.com/digitalbazaar/pyld" rel="noopener nofollow ugc">PyLD</a></li>
</ul>
</li>
<li>Ruby
<ul>
<li><a href="https://github.com/ruby-rdf/json-ld/" rel="noopener nofollow ugc">JSON-LD reader/writer</a></li>
</ul>
</li>
</ul>
<h3>
<a name="validation" class="anchor" href="guide-for-new-activitypub-implementers.html#validation"></a>Validation</h3>
<p>There’s an unofficial <a href="https://github.com/redaktor/ActivityPubSchema" rel="noopener nofollow ugc">ActivityPubSchema</a> that may be useful if you’re validating the JSON-LD of ActivityPub requests and responses.</p>
<h3>
<a name="developer-vs-user-terminology" class="anchor" href="guide-for-new-activitypub-implementers.html#developer-vs-user-terminology"></a>Developer vs. user terminology</h3>
<p>While “ActivityPub” may mean something to people with a technical bent, it’s probably not the best way to convey to site members what your software is and does.</p>
<p>“Fediverse” is probably a <em>bit</em> better, in that at least if you look it up you’re slightly more likely to find something basically readable. Still, it’s worth looking around at how other software are handling the question of presenting the ideas of federation and ActivityPub to their users.</p>
<h3>
<a name="the-missing-pieces" class="anchor" href="guide-for-new-activitypub-implementers.html#the-missing-pieces"></a>The “missing” pieces</h3>
<p>While the ActivityPub specification covers a lot, there are also areas that aren’t spelled out and left to implementers to decide. As <a href="https://blog.emacsen.net" rel="noopener nofollow ugc">Serge Wroclawski</a> put it in an <a href="https://librelounge.org/episodes/episode-20-activitypub-part-3.html" rel="noopener nofollow ugc">episode of the Libre Lounge podcast</a> (1:38 - 1:52):</p>
<blockquote>
<p>If you’re an implementer and you first look at ActivityPub, it seems like there’s a lot missing, and there absolutely is. And so what you have to do is you have to look at best practices at the time, which aren’t necessarily in the standard itself.</p>
</blockquote>
<p>This section is about those current practices.</p>
<h4>
<a name="discovery-webfinger" class="anchor" href="guide-for-new-activitypub-implementers.html#discovery-webfinger"></a>Discovery: Webfinger</h4>
<p>How to look up actor accounts on another server?</p>
<p>In ActivityPub, an <code>Actor</code> such as a <code>Person</code> (often, a user with an account on a given site) is identified by an ID in the form of a URI. That URI <em>could</em> be what’s used to identify the actor on other ActivityPub sites. But URIs can be hard to work with and understand. A much more familiar format is <code>user@domain.tld</code> (or, by convention in the Fediverse, <code>@user@domain.tld</code>, to distinguish the handle from an email address).</p>
<p>The ActivityPub spec doesn’t cover profile discovery, that is, the ability to look up a handle like <code>@user@domain.tld</code> and find the URI for the account’s profile. However, per <a href="https://feneas.org/activitypub-well-its-not-that-bad/#missing-specification-for-profile-discovery" rel="noopener nofollow ugc">ActivityPub? Well, it’s not that bad</a>:</p>
<blockquote>
<p>Most current implementers have integrated <a href="https://tools.ietf.org/html/rfc7033" rel="noopener nofollow ugc">Webfinger</a> for that purpose, since users like to work with handles rather than URLs.</p>
</blockquote>
<p>For example, Webfinger is implemented in Mastodon and is the recommended way to implement interoperability. See the <a href="https://docs.joinmastodon.org/spec/webfinger" rel="noopener nofollow ugc">Mastodon documentation on Webfinger</a> and <a href="https://blog.joinmastodon.org/2018/06/how-to-implement-a-basic-activitypub-server/#webfinger" rel="noopener nofollow ugc">this tutorial</a>.</p>
<h4>
<a name="authentication-and-authorization" class="anchor" href="guide-for-new-activitypub-implementers.html#authentication-and-authorization"></a>Authentication and authorization</h4>
<p>ActivityPub doesn’t itself specify how to handle server to server user authentication, but it provides some hints in a wiki page, <a href="https://www.w3.org/wiki/SocialCG/ActivityPub/Authentication_Authorization" rel="noopener nofollow ugc">SocialCG/ActivityPub/Authentication Authorization</a>. In your implementation you’ll probably find yourself implementing at least one of the solutions they point to.</p>
<h5>
<a name="client-to-server" class="anchor" href="guide-for-new-activitypub-implementers.html#client-to-server"></a>Client to server</h5>
<p>As <a href="https://www.w3.org/wiki/SocialCG/ActivityPub/Authentication_Authorization#Client_to_Server" rel="noopener nofollow ugc">noted in the SocialCG wiki</a>:</p>
<blockquote>
<p>ActivityPub clients authenticate against a server using <a href="https://oauth.net/2" rel="noopener nofollow ugc">OAuth 2.0</a> bearer tokens.</p>
</blockquote>
<p>So if you’re building a client app, or if you’re building a server app that supports client connections, you’ll need to build in OAuth 2.0 support.</p>
<p>Note: There are a lot of intricacies to C2S authentication. See this <a href="https://andstatus.org" rel="noopener nofollow ugc">AndStatus</a> issue <a href="https://github.com/andstatus/andstatus/issues/499" rel="noopener nofollow ugc">Basic implementation of “client to server” ActivityPub protocol (#499)</a> for a detailed discussion with many cross-references.</p>
<h5>
<a name="server-to-server" class="anchor" href="guide-for-new-activitypub-implementers.html#server-to-server"></a>Server to server</h5>
<h6>
<a name="http-signatures" class="anchor" href="guide-for-new-activitypub-implementers.html#http-signatures"></a>HTTP Signatures</h6>
<p><a href="https://tools.ietf.org/html/draft-cavage-http-signatures-08" rel="noopener nofollow ugc">HTTP Signatures</a> is the approach taken in most current implementations.</p>
<p>Usually you’ll need to both:</p>
<ul>
<li>Support HTTP signature verification from remote instances.</li>
<li>Verify HTTP signatures on incoming activities.</li>
</ul>
<p>The tutorial <a href="https://blog.joinmastodon.org/2018/06/how-to-implement-a-basic-activitypub-server" rel="noopener nofollow ugc">How to implement a basic ActivityPub server</a> includes a good introduction to HTTP Signatures and how to use them, including how to add a <code>publicKey</code> attribute to an actor object.</p>
<h6>
<a name="linked-data-signatures" class="anchor" href="guide-for-new-activitypub-implementers.html#linked-data-signatures"></a>Linked Data Signatures</h6>
<p><a href="https://w3c-dvcg.github.io/ld-signatures" rel="noopener nofollow ugc">Linked Data Signatures</a> are <a href="https://www.w3.org/wiki/SocialCG/ActivityPub/Authentication_Authorization#Linked_Data_Signatures" rel="noopener nofollow ugc">recommended when</a>:</p>
<blockquote>
<p>it is important to be able to verify that the actors specified in the <code>actor</code> and <code>attributedTo</code> fields really did author the objects they are being claimed to have authored.</p>
</blockquote>
<h4>
<a name="information-about-the-instancenode" class="anchor" href="guide-for-new-activitypub-implementers.html#information-about-the-instancenode"></a>Information about the instance/node</h4>
<p>ActivityPub is all about actors, activities, and objects, but doesn’t say anything about the instance itself–the site that’s hosting all this. Various approaches are filling this gap.</p>
<h5>
<a name="nodeinfo" class="anchor" href="guide-for-new-activitypub-implementers.html#nodeinfo"></a>NodeInfo</h5>
<p>There is a <a href="https://github.com/jhass/nodeinfo" rel="noopener nofollow ugc">NodeInfo standard</a> adopted by many ActivityPub implementations.</p>
<p>NodeInfo <a href="http://nodeinfo.diaspora.software" rel="noopener nofollow ugc">is</a>:</p>
<blockquote>
<p>an effort to create a standardized way of exposing metadata about a server running one of the distributed social networks. The two key goals are being able to get better insights into the user base of distributed social networking and the ability to build tools that allow users to choose the best fitting software and server for their needs.</p>
</blockquote>
<p>There is an alternate <a href="https://github.com/jaywink/nodeinfo2" rel="noopener nofollow ugc">NodeInfo2</a> standard.</p>
<blockquote>
<p>NodeInfo2 is a fork of NodeInfo which was seen as too complex for the problem it is solving.</p>
</blockquote>
<p>There has also been discussion about the <a href="../t/discussing-onboarding-for-developers/61/4.html">possibility of ActivityPub-specific discovery</a>.</p>
<h5>
<a name="federationmd" class="anchor" href="guide-for-new-activitypub-implementers.html#federationmd"></a>Federation.md</h5>
<p>Complementary to NodeInfo, some implementations have introduced a federation.md file to describe instance capabilities in a human readable way. See <a href="../t/documenting-federation-behavior-in-a-semi-standard-way/453.html">this discussion</a> for more information. The federation.md files are a good way to get a sense of how different projects are using and adapting ActivityPub. Examples include:</p>
<ul>
<li><a href="https://github.com/dariusk/gathio/blob/master/FEDERATION.md" rel="noopener nofollow ugc">gathio</a></li>
<li><a href="https://github.com/writefreely/documentation/blob/master/writer/federation.md" rel="noopener nofollow ugc">WriteFreely</a></li>
<li><a href="https://codeberg.org/zot/zap/src/branch/release/FEDERATION.md" rel="noopener nofollow ugc">Zap</a></li>
<li><a href="https://gitlab.com/ngerakines/tavern/-/blob/master/FEDERATION.md" rel="noopener nofollow ugc">Tavern</a></li>
<li><a href="https://github.com/grishka/Smithereen/blob/master/FEDERATION.md" rel="noopener nofollow ugc">Smithereen</a></li>
<li><a href="https://github.com/lesion/gancio/blob/gh/docs/federation.md" rel="noopener nofollow ugc">gancio</a></li>
<li><a href="https://join.lemmy.ml/docs/en/federation/overview.html" rel="noopener nofollow ugc">Lemmy</a></li>
</ul>
<h4>
<a name="filtering-out-abuse-and-hate" class="anchor" href="guide-for-new-activitypub-implementers.html#filtering-out-abuse-and-hate"></a>Filtering out abuse and hate</h4>
<p>ActivityPub provides a way to connect to other instances. But what if there are instances a particular site’s administrators don’t want to connect to? How to deal with the fact that the Fediverse is by default unfiltered and there are nodes that permit or actively encourage hate speech and abuse?</p>
<p>Background on the problem and proposed solutions:</p>
<ul>
<li><a href="https://github.com/WebOfTrustInfo/rwot9-prague/blob/1c4c3f81bb5dc018cd05910b8b249f9657e72743/topics-and-advance-readings/ap-unwanted-messages.md" rel="noopener nofollow ugc">Keeping Unwanted Messages off the Fediverse</a></li>
<li><a href="https://gitlab.com/spritely/ocappub" rel="noopener nofollow ugc">OcapPub: Towards networks of consent</a></li>
</ul>
<p>A very basic approach is to enable whitelisting/blacklisting of ActivityPub domains so that an individual site’s admins can decide who to or not to federate with. That’s what’s supported in Mastodon.</p>
<p>Relevant background from the Mastodon project:</p>
<ul>
<li><a href="https://www.theverge.com/2019/7/12/20691957/mastodon-decentralized-social-network-gab-migration-fediverse-app-blocking" rel="noopener nofollow ugc">How the biggest decentralized social network is dealing with its Nazi problem</a></li>
<li><a href="https://blog.joinmastodon.org/2019/07/statement-on-gabs-fork-of-mastodon" rel="noopener nofollow ugc">Statement on Gab’s fork of Mastodon</a></li>
<li><a href="https://docs.joinmastodon.org/admin/moderation#server-wide-moderation" rel="noopener nofollow ugc">Documentation on server-wide moderation</a></li>
<li><a href="https://github.com/Gargron/mastodon.social-misc" rel="noopener nofollow ugc">List of instances blocked by mastodon.social</a></li>
<li><a href="https://awoo.space/about/more" rel="noopener nofollow ugc">Mastondon instance with a forked codebase allowing whitelisting of domains rather than the default blacklist</a></li>
</ul>
<h4>
<a name="extensions" class="anchor" href="guide-for-new-activitypub-implementers.html#extensions"></a>Extensions</h4>
<p>While you may find the set of objects and properties spelled out in the Activity Streams specs is sufficient for your use case, in many cases it won’t be.</p>
<p>The upside of custom extensions is they meet a specific need. The downside is they limit interoperability with other ActivityPub implementations.</p>
<p>While you can definitely create your own extensions, it’s worth getting familiar with what other implementers have already done.</p>
<ul>
<li>Mastodon uses an <a href="https://docs.joinmastodon.org/spec/activitypub/#namespaces" rel="noopener nofollow ugc">extensive set of non-ActivityPub extensions</a>.</li>
</ul>
<h2>
<a name="frequently-asked-questions-tips-tricks" class="anchor" href="guide-for-new-activitypub-implementers.html#frequently-asked-questions-tips-tricks"></a>Frequently asked questions, tips, tricks</h2>
<p>Designed to address the most common questions, this section is a compendium of tips, suggestions, and ideas around specific implementation questions.</p>
<h3>
<a name="what-do-i-need-to-present-to-my-users" class="anchor" href="guide-for-new-activitypub-implementers.html#what-do-i-need-to-present-to-my-users"></a>What do I need to present to my users?</h3>
<p>For starters, if you’re building a server app, you’ll probably want to display the ID of the user’s ActivityPub profile, since this is the way that others can interact with them in the Fediverse. If you’re using Webfinger, you may also want to display the <code>@username@example.com</code> format so that users on other instances can use that to mention or look up your users.</p>
<h3>
<a name="what-document-object-types-to-use" class="anchor" href="guide-for-new-activitypub-implementers.html#what-document-object-types-to-use"></a>What document object types to use?</h3>
<p>Activity Vocabulary defines several types of objects, such as <code>Note</code>, <code>Article</code>, and <code>Video</code>. Currently there is some tension between interoperability, on the one hand, and adherence the spec, on the other. Some implementers are focusing on what’s currently supported in Mastodon, where a <code>Note</code> will be fully displayed (minus certain markup) while an <code>Article</code>, for example, will appear as a link.</p>
<h3>
<a name="how-to-handle-public-content" class="anchor" href="guide-for-new-activitypub-implementers.html#how-to-handle-public-content"></a>How to handle public content?</h3>
<p>ActivityPub content may be <a href="https://www.w3.org/TR/activitypub/#public-addressing" rel="noopener nofollow ugc">publicly addressed</a>. It’s left to implementers to decide how to handle such content.</p>
<p>Questions to consider include:</p>
<ul>
<li>Should any locally generated public content be posted to all known <code>sharedInbox</code> URIs?</li>
<li>If you’ve implemented a <code>sharedInbox</code>, what if anything do you want to do with publicly addressed content that arrives there?</li>
</ul>
<h3>
<a name="whats-special-about-the-sharedinbox" class="anchor" href="guide-for-new-activitypub-implementers.html#whats-special-about-the-sharedinbox"></a>What’s special about the <code>sharedInbox</code>?</h3>
<p>Among other uses, a shared inbox can optionally be used to send a single post to multiple actors who would otherwise need to each be messaged separately. When you are sending an activity to remote instances, instead of sending one per <code>Actor</code>, you can instead iterate through all your actors and post to the list of unique <code>sharedInbox</code> URIs. The ActivityPub spec notes:</p>
<blockquote>
<p>in this scenario, the remote/receiving server participates in determining targeting and performing delivery to specific inboxes.</p>
</blockquote>
<p>Participates? How?</p>
<p>The idea here is that in theory a following relationship is tracked on both sides: as part of a <code>followers</code> collection associated with the actor on the originating server <em>and</em> as part of a <code>followed</code> collection associated with the actor on the receiving server. So the originating server doesn’t need to explicitly list recipients. Instead, the receiving server can take the ID of the activity’s <code>actor</code>, look up its own list of who’s following that actor, and deliver the object to each member of that list.</p>
<h3>
<a name="what-data-do-i-need-to-store-locally" class="anchor" href="guide-for-new-activitypub-implementers.html#what-data-do-i-need-to-store-locally"></a>What data do I need to store locally?</h3>
<p>Many web application developers will be used to a model where there’s a clear separation between (a) what’s created and managed within the application and (b) any data objects that are externally hosted. For example, in the most simple case, you might have your own <code>User</code> and <code>Article</code> entities which you store locally. If you also, say, display remote content from an RSS feed, you might might model and store that content and its authors quite differently than your own <code>User</code> and <code>Article</code> data.</p>
<p>With ActivityPub, there’s at least the potential to use the same models for both local and remote objects. For example, if a user on your site both (a) posts <code>Article</code> content of their own and (b) follows actors on remote instances and so gets content when those remote actors make <code>Article</code> posts, you <em>may</em> decide to handle both local and remote articles in the same local model.</p>
<h3>
<a name="how-can-i-add-activitypub-support-to-my-existing-software-project" class="anchor" href="guide-for-new-activitypub-implementers.html#how-can-i-add-activitypub-support-to-my-existing-software-project"></a>How can I add ActivityPub support to my existing software project?</h3>
<p>If you have an existing software and want to add ActivityPub support to it, it may help to look at what that’s looked like for projects that have already done it. Places to look include:</p>
<ul>
<li>The issue to <a href="https://github.com/tootsuite/mastodon/issues/1557#issuecomment-294529696" rel="noopener nofollow ugc">add ActivityPub support to Mastodon</a>.</li>
</ul>
<h2>
<a name="improving-activitypub" class="anchor" href="guide-for-new-activitypub-implementers.html#improving-activitypub"></a>Improving ActivityPub</h2>
<p>Aided by a culture of collaboration among Fediverse advocates and participants, there is ongoing work to improve both the ActivityPub specification and interoperability among different ActivityPub implementations.</p>
<h3>
<a name="complimentary-initiatives" class="anchor" href="guide-for-new-activitypub-implementers.html#complimentary-initiatives"></a>Complimentary initiatives</h3>
<p>There are initiatives towards complimentary standards that could help address issues left unresolved in ActivityPub.</p>
<h4>
<a name="datashards" class="anchor" href="guide-for-new-activitypub-implementers.html#datashards"></a>Datashards</h4>
<p><a href="https://datashards.net" rel="noopener nofollow ugc">Datashards</a>:</p>
<blockquote>
<p>brings secure storage foundations to the modern web. It allows users and application developers to reason about secure, private data online or offline.</p>
</blockquote>
<p>Datashards might help with ActivityPub issues like account migration.</p>
<h3>
<a name="join-the-conversation" class="anchor" href="guide-for-new-activitypub-implementers.html#join-the-conversation"></a>Join the conversation</h3>
<p>Initiatives like <a href="https://fediconf.org" rel="noopener nofollow ugc">FediConf</a>, <a href="https://feneas.org" rel="noopener nofollow ugc">Feneas </a>, and the <a href="https://socialhub.activitypub.rocks">ActivityPub forum on Activitypub.Rocks</a> are great places to connect with other implementers and help move things forward.</p>
<h2>
<a name="more-information" class="anchor" href="guide-for-new-activitypub-implementers.html#more-information"></a>More information</h2>
<p>See the accompanying guides:</p>
<ul>
<li><a href="../t/introduction-to-activitypub/508.html">Introduction to ActivityPub</a></li>
<li><a href="../t/guide-for-activitypub-users/509.html">Guide for ActivityPub users</a></li>
</ul>
    </div>
</div>

    
  </body>
</html>
